<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta content="IE=Edge" http-equiv="X-UA-Compatible"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content=""><title></title></head><body><style>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}h4{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}img{vertical-align:middle;border-style:none}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button{overflow:visible}button{text-transform:none}[role=button]{cursor:pointer}[type=button],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}h4{margin-bottom:.5rem;font-weight:500;line-height:1.2}h4{font-size:1.5rem}.small{font-size:80%;font-weight:400}.img-thumbnail{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;border-radius:.25rem;max-width:100%;height:auto}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.col,.col-6,.col-md-4{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}@media(min-width:768px){.row-cols-md-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}}@media(min-width:1200px){.row-cols-xl-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn:not(:disabled):not(.disabled){cursor:pointer}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active{color:#fff;background-color:#0062cc;border-color:#005cbf}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-secondary{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn-secondary:focus{color:#fff;background-color:#5a6268;border-color:#545b62;box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-secondary:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:not(:disabled):not(.disabled).active,.btn-secondary:not(:disabled):not(.disabled):active,.show>.btn-secondary.dropdown-toggle{color:#fff;background-color:#545b62;border-color:#4e555b}.btn-secondary:not(:disabled):not(.disabled).active:focus,.btn-secondary:not(:disabled):not(.disabled):active:focus,.show>.btn-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-success{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success:focus{color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-success:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:not(:disabled):not(.disabled).active,.btn-success:not(:disabled):not(.disabled):active{color:#fff;background-color:#1e7e34;border-color:#1c7430}.btn-success:not(:disabled):not(.disabled).active:focus,.btn-success:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-info:not(:disabled):not(.disabled).active,.btn-info:not(:disabled):not(.disabled):active{color:#fff;background-color:#117a8b;border-color:#10707f}.btn-info:not(:disabled):not(.disabled).active:focus,.btn-info:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:not(:disabled):not(.disabled).active,.btn-warning:not(:disabled):not(.disabled):active{color:#212529;background-color:#d39e00;border-color:#c69500}.btn-warning:not(:disabled):not(.disabled).active:focus,.btn-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-danger:not(:disabled):not(.disabled).active,.btn-danger:not(:disabled):not(.disabled):active{color:#fff;background-color:#bd2130;border-color:#b21f2d}.btn-danger:not(:disabled):not(.disabled).active:focus,.btn-danger:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.btn-light:not(:disabled):not(.disabled).active,.btn-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#dae0e5;border-color:#d3d9df}.btn-light:not(:disabled):not(.disabled).active:focus,.btn-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-dark:not(:disabled):not(.disabled).active,.btn-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#1d2124;border-color:#171a1d}.btn-dark:not(:disabled):not(.disabled).active:focus,.btn-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-outline-primary:not(:disabled):not(.disabled).active,.btn-outline-primary:not(:disabled):not(.disabled):active{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:not(:disabled):not(.disabled).active:focus,.btn-outline-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-secondary:not(:disabled):not(.disabled).active,.btn-outline-secondary:not(:disabled):not(.disabled):active{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-outline-secondary:not(:disabled):not(.disabled).active:focus,.btn-outline-secondary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.btn-outline-success:not(:disabled):not(.disabled).active,.btn-outline-success:not(:disabled):not(.disabled):active{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success:not(:disabled):not(.disabled).active:focus,.btn-outline-success:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-info:not(:disabled):not(.disabled).active,.btn-outline-info:not(:disabled):not(.disabled):active{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:not(:disabled):not(.disabled).active:focus,.btn-outline-info:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-warning:not(:disabled):not(.disabled).active,.btn-outline-warning:not(:disabled):not(.disabled):active{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:not(:disabled):not(.disabled).active:focus,.btn-outline-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-danger:not(:disabled):not(.disabled).active,.btn-outline-danger:not(:disabled):not(.disabled):active{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-outline-danger:not(:disabled):not(.disabled).active:focus,.btn-outline-danger:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.btn-outline-light:not(:disabled):not(.disabled).active,.btn-outline-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:not(:disabled):not(.disabled).active:focus,.btn-outline-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-dark:not(:disabled):not(.disabled).active,.btn-outline-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:not(:disabled):not(.disabled).active:focus,.btn-outline-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-sm{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.collapse:not(.show){display:none}.dropdown{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.dropdown-item{display:block;width:100%;padding:.25rem 1.5rem;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.dropdown-item:focus,.dropdown-item:hover{color:#16181b;text-decoration:none;background-color:#e9ecef}.dropdown-item.active,.dropdown-item:active{color:#fff;text-decoration:none;background-color:#007bff}.dropdown-item:disabled{color:#adb5bd;pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.nav-link{display:block;padding:.5rem 1rem}.nav-link:focus,.nav-link:hover{text-decoration:none}.navbar{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem 1rem}.navbar .container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.navbar-brand{display:inline-block;padding-top:.3125rem;padding-bottom:.3125rem;margin-right:1rem;font-size:1.25rem;line-height:inherit;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-nav{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link{padding-right:0;padding-left:0}.navbar-nav .dropdown-menu{position:static;float:none}.navbar-collapse{-ms-flex-preferred-size:100%;flex-basis:100%;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:1px solid transparent;border-radius:.25rem}.navbar-toggler:focus,.navbar-toggler:hover{text-decoration:none}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;content:"";background:50%/100% 100% no-repeat}@media(max-width:767.98px){.navbar-expand-md>.container{padding-right:0;padding-left:0}}@media(min-width:768px){.navbar-expand-md{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-md .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-md>.container{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-md .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}}@media(max-width:991.98px){.navbar-expand-lg>.container{padding-right:0;padding-left:0}}@media(min-width:992px){.navbar-expand-lg{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-lg .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-lg>.container{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-lg .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}}@media(max-width:1199.98px){.navbar-expand-xl>.container{padding-right:0;padding-left:0}}@media(min-width:1200px){.navbar-expand-xl{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-xl .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-xl>.container{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-xl .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}}.navbar-dark .navbar-brand{color:#fff}.navbar-dark .navbar-brand:focus,.navbar-dark .navbar-brand:hover{color:#fff}.navbar-dark .navbar-nav .nav-link{color:rgba(255,255,255,.5)}.navbar-dark .navbar-nav .nav-link:focus,.navbar-dark .navbar-nav .nav-link:hover{color:rgba(255,255,255,.75)}.navbar-dark .navbar-nav .nav-link.active{color:#fff}.navbar-dark .navbar-toggler{color:rgba(255,255,255,.5);border-color:rgba(255,255,255,.1)}.navbar-dark .navbar-toggler-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.5%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.card{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}button.close{padding:0;background-color:transparent;border:0}.modal-open{overflow:hidden}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal{position:fixed;top:0;left:0;z-index:1050;display:none;width:100%;height:100%;overflow:hidden;outline:0}.modal-dialog{position:relative;width:auto;margin:.5rem;pointer-events:none}.modal.show .modal-dialog{-webkit-transform:none;transform:none}.modal-dialog-centered{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;min-height:calc(100% - 1rem)}.modal-dialog-centered::before{display:block;height:calc(100vh - 1rem);height:-webkit-min-content;height:-moz-min-content;height:min-content;content:""}.modal-content{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0}.modal-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.modal-backdrop.show{opacity:.5}.modal-header{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;padding:1rem 1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.modal-header .close{padding:1rem 1rem;margin:-1rem -1rem -1rem auto}.modal-title{margin-bottom:0;line-height:1.5}.modal-body{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem}.modal-footer{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}.modal-footer>*{margin:.25rem}@media(min-width:576px){.modal-dialog{max-width:500px;margin:1.75rem auto}.modal-dialog-centered{min-height:calc(100% - 3.5rem)}.modal-dialog-centered::before{height:calc(100vh - 3.5rem);height:-webkit-min-content;height:-moz-min-content;height:min-content}}@media(min-width:992px){.modal-xl{max-width:800px}}@media(min-width:1200px){.modal-xl{max-width:1140px}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.spinner-border{display:inline-block;width:2rem;height:2rem;vertical-align:-.125em;border:.25em solid currentColor;border-right-color:transparent;border-radius:50%;-webkit-animation:.75s linear infinite spinner-border;animation:.75s linear infinite spinner-border}.spinner-border-sm{width:1rem;height:1rem;border-width:.2em}@media(prefers-reduced-motion:reduce){.spinner-border{-webkit-animation-duration:1.5s;animation-duration:1.5s}}.d-none{display:none!important}.d-flex{display:-ms-flexbox!important;display:flex!important}@media(min-width:768px){.d-md-block{display:block!important}}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.align-self-center{-ms-flex-item-align:center!important;align-self:center!important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}.h-100{height:100%!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mt-3{margin-top:1rem!important}.mb-3{margin-bottom:1rem!important}.p-1{padding:.25rem!important}.px-4{padding-right:1.5rem!important}.px-4{padding-left:1.5rem!important}@media(min-width:992px){.mb-lg-0{margin-bottom:0!important}.px-lg-5{padding-right:3rem!important}.px-lg-5{padding-left:3rem!important}}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:auto;content:"";background-color:rgba(0,0,0,0)}.text-center{text-align:center!important}.text-white{color:#fff!important}.text-secondary{color:#6c757d!important}.text-success{color:#28a745!important}.text-danger{color:#dc3545!important}.text-black-50{color:rgba(0,0,0,.5)!important}.text-decoration-none{text-decoration:none!important}@media print{*,::after,::before{text-shadow:none!important;box-shadow:none!important}a:not(.btn){text-decoration:underline}img{page-break-inside:avoid}p{orphans:3;widows:3}@page{size:a3}body{min-width:992px!important}.container{min-width:992px!important}.navbar{display:none}}html{height:100%}body{padding-bottom:50px;position:relative;min-height:100%;flex-direction:column;line-height:1.6}footer{width:100%;height:50px;line-height:50px;position:absolute;bottom:0;background-color:#b2842d}.row{display:flex;flex-wrap:wrap;margin-top:0;margin-right:-.75rem;margin-left:-.75rem}.row>*{flex-shrink:0;width:100%;padding-right:.75rem;padding-left:.75rem;margin-top:.5rem}#videos .row{margin-top:-.5rem;margin-right:-.25rem;margin-left:-.25rem}#videos .row>*{padding-right:.25rem;padding-left:.25rem}.card{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.card ul{padding-left:10px;padding-right:10px;overflow:hidden}.card ul li{list-style:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card ul li a{white-space:nowrap;text-decoration:none;color:#000;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif}.card ul li a:hover{text-decoration:underline}.card ul.col2{columns:2}.card h4{position:relative;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;color:#7c3806;text-align:center;padding:5px 0;background:linear-gradient(#f1d600,orange);font-size:1.1rem;line-height:1.8rem}.card h4 span{max-width:70%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;margin:0 auto}.card h4 a{font-size:.7rem;text-decoration:none;position:absolute;top:.3rem;right:.4rem;text-shadow:1px 1px 0 #fff;font-family:sans-serif,serif,fangsong,cursive}.card .btn{margin-left:10px;margin-bottom:5px}@media(min-width:992px){.card ul li{line-height:2}}@media(min-width:1200px){.card ul li{line-height:1.7}}@media(min-width:1400px){.card ul li{line-height:1.9}}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2;content:""}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:none;content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.ratio-3x2::before{padding-top:66.67%}.ratio-16x9::before{padding-top:56.25%}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.float-end{float:right!important}.link-secondary{color:#6c757d}.link-dark{color:#212529}nav{background-color:#b2842d}nav .dropdown:hover .dropdown-menu{display:block}nav .dropdown-menu{margin-top:0}.dropdown-item{text-overflow:ellipsis;overflow-x:hidden}.nopadding{padding:0;margin:0}.hidden{display:none}.alert{padding:.8rem}.close{font-size:1.5rem;font-family:system-ui,fantasy,cursive}#tuicont iframe{margin:0;border:0;width:98%;height:600px}#qrcode{position:absolute;z-index:99999;padding:5px;background-color:#fff;border:1px solid #ccc;display:none}img#c{display:none}#btn-install,#btn-reload{position:relative;bottom:5px;margin-left:10px}#btn-install{display:none}.modal-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7}#modal-player{display:none}#modal-player-container{padding:0;border-radius:.3rem}#modal-player-container>div{border-radius:.3rem}#modal-player-container .media-control-background{border-bottom-left-radius:.3rem;border-bottom-right-radius:.3rem}#modal-player .modal-header{position:absolute;top:0;left:0;right:0;z-index:999;border:0}#modal-player .modal-header .mask{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.5;background-color:#aaa;border-bottom:1px solid #999;z-index:-1}#modal-player .modal-menu{margin-right:.5rem}#modal-player .modal-title{color:#fff}.play-wrapper{opacity:.5;max-height:3rem}#modal-alert .modal-title{font-weight:700}#btn-tv::after{content:"";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid;display:inline-block;line-height:1.5;margin-left:.5em}#videos{border:0;padding:.5rem .5rem}.imgitem{position:relative}.imgitem .title{display:block;height:2em;line-height:1;overflow:hidden;text-overflow:ellipsis;font-size:small;text-decoration:none;text-align:center;margin-top:.2em}#schedule{background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 54 54' fill='%23f8c623'%3e%3cpath d=' M 23.24 0.00 L 29.73 0.00 C 43.57 1.45 54.84 14.93 53.36 28.85 C 52.90 35.95 49.12 42.26 44.27 47.26 C 44.02 48.91 43.64 50.54 42.70 51.94 C 42.11 51.45 40.92 50.46 40.33 49.96 C 32.02 54.75 21.52 54.69 13.15 50.07 C 11.81 50.60 10.48 51.43 8.97 51.10 C 8.86 49.67 8.80 48.23 8.80 46.79 C 4.24 42.43 1.00 36.78 0.00 30.51 L 0.00 23.32 C 1.51 11.51 11.44 1.55 23.24 0.00 M 3.71 20.78 C 1.22 29.22 4.46 38.52 10.77 44.43 C 12.69 35.12 13.33 25.51 12.70 16.03 C 12.63 13.86 12.62 11.03 14.91 9.95 C 18.09 8.44 21.78 8.94 25.20 8.57 C 25.12 7.41 25.04 6.24 25.05 5.07 C 27.61 3.49 28.79 6.77 29.68 8.52 C 33.12 8.75 36.58 8.79 40.00 9.25 C 41.37 10.02 42.40 11.50 40.69 12.59 C 35.87 13.23 30.90 11.17 26.19 12.61 C 29.11 15.64 33.51 14.38 37.03 16.05 C 37.08 17.72 37.08 19.39 37.21 21.05 C 42.33 27.68 39.98 36.66 42.53 44.24 C 49.53 38.17 52.19 27.84 49.06 19.13 C 45.88 9.56 36.11 2.62 26.01 2.92 C 15.75 3.18 6.14 10.76 3.71 20.78 M 16.78 12.97 C 16.18 24.28 16.92 35.85 13.91 46.89 C 21.56 51.59 31.75 51.66 39.38 46.87 C 37.12 40.04 37.59 32.77 36.05 25.84 C 34.28 28.14 31.69 29.39 28.90 29.98 C 28.26 31.12 28.57 33.31 26.76 33.35 C 25.21 32.95 25.23 31.21 24.70 30.00 C 22.31 29.55 18.12 31.28 17.45 27.99 C 18.71 25.04 22.53 26.67 25.01 26.18 C 25.01 25.61 25.00 24.48 25.00 23.91 C 22.64 23.93 20.29 23.95 17.93 23.94 C 17.65 23.41 17.09 22.34 16.80 21.81 C 19.35 20.51 22.20 20.30 25.00 20.22 C 25.00 19.65 25.00 18.50 25.00 17.93 C 22.62 17.99 19.76 19.35 18.07 16.94 C 18.99 14.20 22.31 15.19 24.52 14.63 C 25.14 13.68 25.78 12.74 26.42 11.80 C 23.20 12.11 19.97 12.39 16.78 12.97 M 28.29 17.86 C 28.28 18.46 28.25 19.67 28.24 20.28 C 30.36 20.30 32.47 20.34 34.59 20.24 C 33.37 17.74 30.65 17.94 28.29 17.86 M 28.25 23.66 C 28.25 24.27 28.24 25.49 28.24 26.09 C 29.00 26.09 30.54 26.08 31.30 26.07 C 31.85 25.35 32.38 24.62 32.85 23.86 C 31.32 23.74 29.78 23.71 28.25 23.66 Z' /%3e%3cpath d=' M 31.31 32.28 C 31.71 31.97 32.51 31.36 32.92 31.05 C 33.40 31.35 34.36 31.96 34.84 32.26 C 34.69 36.33 35.66 40.74 33.82 44.55 C 30.90 47.78 25.67 47.56 21.91 46.15 C 18.26 44.61 18.76 40.26 18.54 37.01 C 18.61 35.06 17.95 32.35 20.19 31.31 C 21.92 31.63 22.16 33.35 22.68 34.73 C 25.42 34.71 28.16 34.72 30.89 34.72 C 31.00 34.11 31.20 32.89 31.31 32.28 M 22.10 38.10 C 22.33 39.77 22.59 41.43 22.93 43.07 C 25.49 43.57 28.28 44.09 30.68 42.74 C 31.07 41.18 31.09 39.57 31.21 37.97 C 28.17 37.96 25.13 37.96 22.10 38.10 Z' /%3e%3c/svg%3e") no-repeat center center;background-size:30%;opacity:.5}#custom{display:none}#webname{margin-right:3rem}#current-node .caption{display:inline-block;white-space:nowrap}#current-node .link{display:block;min-height:16px;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}#current-node .link_qr{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAA3NCSVQICAjb4U/gAAAAD1BMVEX////b29tJSUkkJCQAAADlxkruAAAACXBIWXMAAArrAAAK6wGCiw1aAAAAFnRFWHRDcmVhdGlvbiBUaW1lADAzLzA0LzIzC2hZkgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAABbSURBVAiZTYzBDcAwCAMNLJBUHcCkC6Bkgu6/VAlSq36Qhe+MtVZYHgQQF2CI3sKkZzjbNLn/n5f5LFUFCQLMBMeupvo4ClY4tz4loT0YxNAadFKLGe2QsnpOPYMyDFo3XEyJAAAAAElFTkSuQmCC) no-repeat 0 center;background-size:10px;padding-left:14px;cursor:pointer}#current-node #loading{width:16px;height:16px;flex-shrink:0}#webqr img{display:block;margin:auto}@media(min-width:1400px){.container{max-width:1320px}}</style><script>!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t)}(this,function(t){var e=function(){function $(t){return null==t?String(t):S[C.call(t)]||"object"}function F(t){return"function"==$(t)}function k(t){return null!=t&&t==t.window}function M(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function R(t){return"object"==$(t)}function Z(t){return R(t)&&!k(t)&&Object.getPrototypeOf(t)==Object.prototype}function z(t){var e=!!t&&"length"in t&&t.length,n=r.type(t);return"function"!=n&&!k(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function q(t){return a.call(t,function(t){return null!=t})}function H(t){return t.length>0?r.fn.concat.apply([],t):t}function I(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function V(t){return t in l?l[t]:l[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function _(t,e){return"number"!=typeof e||h[I(t)]?e:e+"px"}function B(t){var e,n;return c[t]||(e=f.createElement(t),f.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),c[t]=n),c[t]}function U(t){return"children"in t?u.call(t.children):r.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function X(t,e){var n,r=t?t.length:0;for(n=0;r>n;n++)this[n]=t[n];this.length=r,this.selector=e||""}function J(t,r,i){for(n in r)i&&(Z(r[n])||L(r[n]))?(Z(r[n])&&!Z(t[n])&&(t[n]={}),L(r[n])&&!L(t[n])&&(t[n]=[]),J(t[n],r[n],i)):r[n]!==e&&(t[n]=r[n])}function W(t,e){return null==e?r(t):r(t).filter(e)}function Y(t,e,n,r){return F(e)?e.call(t,n,r):e}function G(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function K(t,n){var r=t.className||"",i=r&&r.baseVal!==e;return n===e?i?r.baseVal:r:void(i?r.baseVal=n:t.className=n)}function Q(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?r.parseJSON(t):t):t}catch(e){return t}}function tt(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)tt(t.childNodes[n],e)}var e,n,r,i,O,P,o=[],s=o.concat,a=o.filter,u=o.slice,f=t.document,c={},l={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,v=/([A-Z])/g,y=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],b=f.createElement("table"),E=f.createElement("tr"),j={tr:f.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:E,th:E,"*":f.createElement("div")},w=/complete|loaded|interactive/,T=/^[\w-]*$/,S={},C=S.toString,N={},A=f.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},L=Array.isArray||function(t){return t instanceof Array};return N.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=A).appendChild(t),r=~N.qsa(i,e).indexOf(t),o&&A.removeChild(t),r},O=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},P=function(t){return a.call(t,function(e,n){return t.indexOf(e)==n})},N.fragment=function(t,n,i){var o,s,a;return d.test(t)&&(o=r(f.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in j||(n="*"),a=j[n],a.innerHTML=""+t,o=r.each(u.call(a.childNodes),function(){a.removeChild(this)})),Z(i)&&(s=r(o),r.each(i,function(t,e){y.indexOf(t)>-1?s[t](e):s.attr(t,e)})),o},N.Z=function(t,e){return new X(t,e)},N.isZ=function(t){return t instanceof N.Z},N.init=function(t,n){var i;if(!t)return N.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=N.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(f,t)}else{if(F(t))return r(f).ready(t);if(N.isZ(t))return t;if(L(t))i=q(t);else if(R(t))i=[t],t=null;else if(p.test(t))i=N.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(f,t)}}return N.Z(i,t)},r=function(t,e){return N.init(t,e)},r.extend=function(t){var e,n=u.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){J(t,n,e)}),t},N.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],o=r||i?e.slice(1):e,s=T.test(o);return t.getElementById&&s&&r?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:u.call(s&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},r.contains=f.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},r.type=$,r.isFunction=F,r.isWindow=k,r.isArray=L,r.isPlainObject=Z,r.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},r.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},r.inArray=function(t,e,n){return o.indexOf.call(e,t,n)},r.camelCase=O,r.trim=function(t){return null==t?"":String.prototype.trim.call(t)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(t,e){var n,i,o,r=[];if(z(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&r.push(n);else for(o in t)n=e(t[o],o),null!=n&&r.push(n);return H(r)},r.each=function(t,e){var n,r;if(z(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},r.grep=function(t,e){return a.call(t,e)},t.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){S["[object "+e+"]"]=e.toLowerCase()}),r.fn={constructor:N.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=N.isZ(e)?e.toArray():e;return s.apply(N.isZ(this)?this.toArray():this,n)},map:function(t){return r(r.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return r(u.apply(this,arguments))},ready:function(t){return w.test(f.readyState)&&f.body?t(r):f.addEventListener("DOMContentLoaded",function(){t(r)},!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return o.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return F(t)?this.not(this.not(t)):r(a.call(this,function(e){return N.matches(e,t)}))},add:function(t,e){return r(P(this.concat(r(t,e))))},is:function(t){return this.length>0&&N.matches(this[0],t)},not:function(t){var n=[];if(F(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):z(t)&&F(t.item)?u.call(t):r(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return r(n)},has:function(t){return this.filter(function(){return R(t)?r.contains(this,t):r(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!R(t)?t:r(t)},last:function(){var t=this[this.length-1];return t&&!R(t)?t:r(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?r(t).filter(function(){var t=this;return o.some.call(n,function(e){return r.contains(e,t)})}):1==this.length?r(N.qsa(this[0],t)):this.map(function(){return N.qsa(this,t)}):r()},closest:function(t,e){var n=[],i="object"==typeof t&&r(t);return this.each(function(r,o){for(;o&&!(i?i.indexOf(o)>=0:N.matches(o,t));)o=o!==e&&!M(o)&&o.parentNode;o&&n.indexOf(o)<0&&n.push(o)}),r(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=r.map(n,function(t){return(t=t.parentNode)&&!M(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return W(e,t)},parent:function(t){return W(P(this.pluck("parentNode")),t)},children:function(t){return W(this.map(function(){return U(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(t){return W(this.map(function(t,e){return a.call(U(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return r.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=B(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=F(t);if(this[0]&&!e)var n=r(t).get(0),i=n.parentNode||this.length>1;return this.each(function(o){r(this).wrapAll(e?t.call(this,o):i?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){r(this[0]).before(t=r(t));for(var e;(e=t.children()).length;)t=e.first();r(t).append(this)}return this},wrapInner:function(t){var e=F(t);return this.each(function(n){var i=r(this),o=i.contents(),s=e?t.call(this,n):t;o.length?o.wrapAll(s):i.append(s)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return r(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return r(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;r(this).empty().append(Y(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=Y(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var i;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(R(t))for(n in t)G(this,n,t[n]);else G(this,t,Y(this,r,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:e},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){G(this,t)},this)})},prop:function(t,e){return t=D[t]||t,1 in arguments?this.each(function(n){this[t]=Y(this,e,n,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=D[t]||t,this.each(function(){delete this[t]})},data:function(t,n){var r="data-"+t.replace(v,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Q(i):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=Y(this,t,e,this.value)})):this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=r(this),i=Y(this,e,t,n.offset()),o=n.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(!this.length)return null;if(f.documentElement!==this[0]&&!r.contains(f.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[O(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(L(t)){if(!i)return;var o={},s=getComputedStyle(i,"");return r.each(t,function(t,e){o[e]=i.style[O(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==$(t))e||0===e?a=I(t)+":"+_(t,e):this.each(function(){this.style.removeProperty(I(t))});else for(n in t)t[n]||0===t[n]?a+=I(n)+":"+_(n,t[n])+";":this.each(function(){this.style.removeProperty(I(n))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(r(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?o.some.call(this,function(t){return this.test(K(t))},V(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){i=[];var n=K(this),o=Y(this,t,e,n);o.split(/\s+/g).forEach(function(t){r(this).hasClass(t)||i.push(t)},this),i.length&&K(this,n+(n?" ":"")+i.join(" "))}}):this},removeClass:function(t){return this.each(function(n){if("className"in this){if(t===e)return K(this,"");i=K(this),Y(this,t,n,i).split(/\s+/g).forEach(function(t){i=i.replace(V(t)," ")}),K(this,i.trim())}})},toggleClass:function(t,n){return t?this.each(function(i){var o=r(this),s=Y(this,t,i,K(this));s.split(/\s+/g).forEach(function(t){(n===e?!o.hasClass(t):n)?o.addClass(t):o.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=g.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(r(t).css("margin-top"))||0,n.left-=parseFloat(r(t).css("margin-left"))||0,i.top+=parseFloat(r(e[0]).css("border-top-width"))||0,i.left+=parseFloat(r(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||f.body;t&&!g.test(t.nodeName)&&"static"==r(t).css("position");)t=t.offsetParent;return t})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});r.fn[t]=function(i){var o,s=this[0];return i===e?k(s)?s["inner"+n]:M(s)?s.documentElement["scroll"+n]:(o=this.offset())&&o[t]:this.each(function(e){s=r(this),s.css(t,Y(this,i,e,s[t]()))})}}),x.forEach(function(n,i){var o=i%2;r.fn[n]=function(){var n,a,s=r.map(arguments,function(t){var i=[];return n=$(t),"array"==n?(t.forEach(function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(N.fragment(t)))}),i):"object"==n||null==t?t:N.fragment(t)}),u=this.length>1;return s.length<1?this:this.each(function(e,n){a=o?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var c=r.contains(f.documentElement,a);s.forEach(function(e){if(u)e=e.cloneNode(!0);else if(!a)return r(e).remove();a.insertBefore(e,n),c&&tt(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}})})})},r.fn[o?n+"To":"insert"+(i?"Before":"After")]=function(t){return r(t)[n](this),this}}),N.Z.prototype=X.prototype=r.fn,N.uniq=P,N.deserializeValue=Q,r.zepto=N,r}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function h(t){return t._zid||(t._zid=n++)}function p(t,e,n,r){if(e=d(e),e.ns)var i=m(e.ns);return(a[h(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||h(t.fn)===h(n))&&(!r||t.sel==r)})}function d(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function m(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function g(t,e){return t.del&&!f&&t.e in c||!!e}function v(t){return l[t]||f&&c[t]||t}function y(t,n,i,o,s,u,f){var c=h(t),p=a[c]||(a[c]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(i);var a=d(n);a.fn=i,a.sel=s,a.e in l&&(i=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=u;var c=u||i;a.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=o;var n=c.apply(t,e._args==r?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},a.i=p.length,p.push(a),"addEventListener"in t&&t.addEventListener(v(a.e),a.proxy,g(a,f))})}function x(t,e,n,r,i){var o=h(t);(e||"").split(/\s/).forEach(function(e){p(t,e,n,r).forEach(function(e){delete a[o][e.i],"removeEventListener"in t&&t.removeEventListener(v(e.e),e.proxy,g(e,i))})})}function T(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(w,function(e,r){var i=n[e];t[e]=function(){return this[r]=b,i&&i.apply(n,arguments)},t[r]=E}),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==r?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function S(t){var e,n={originalEvent:t};for(e in t)j.test(e)||t[e]===r||(n[e]=t[e]);return T(n,t)}var r,n=1,i=Array.prototype.slice,o=e.isFunction,s=function(t){return"string"==typeof t},a={},u={},f="onfocusin"in t,c={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:y,remove:x},e.proxy=function(t,n){var r=2 in arguments&&i.call(arguments,2);if(o(t)){var a=function(){return t.apply(n,r?r.concat(i.call(arguments)):arguments)};return a._zid=h(t),a}if(s(n))return r?(r.unshift(t[n],t),e.proxy.apply(null,r)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var b=function(){return!0},E=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,a,u,f){var c,l,h=this;return t&&!s(t)?(e.each(t,function(t,e){h.on(t,n,a,e,f)}),h):(s(n)||o(u)||u===!1||(u=a,a=n,n=r),(u===r||a===!1)&&(u=a,a=r),u===!1&&(u=E),h.each(function(r,o){f&&(c=function(t){return x(o,t.type,u),u.apply(this,arguments)}),n&&(l=function(t){var r,s=e(t.target).closest(n,o).get(0);return s&&s!==o?(r=e.extend(S(t),{currentTarget:s,liveFired:o}),(c||u).apply(s,[r].concat(i.call(arguments,1)))):void 0}),y(o,t,u,a,n,l||c)}))},e.fn.off=function(t,n,i){var a=this;return t&&!s(t)?(e.each(t,function(t,e){a.off(t,n,e)}),a):(s(n)||o(i)||i===!1||(i=n,n=r),i===!1&&(i=E),a.each(function(){x(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=n,this.each(function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,a){r=S(s(t)?e.Event(t):t),r._args=n,r.target=a,e.each(p(a,t.type||t),function(t,e){return i=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){s(t)||(e=t,t=e.type);var n=document.createEvent(u[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),T(n)}}(e),function(e){function p(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function d(t,e,n,i){return t.global?p(e||r,n,i):void 0}function m(t){t.global&&0===e.active++&&d(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&d(t,null,"ajaxStop")}function v(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||d(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void d(e,n,"ajaxSend",[t,e])}function y(t,e,n,r){var i=n.context,o="success";n.success.call(i,t,o,e),r&&r.resolveWith(i,[t,o,e]),d(n,i,"ajaxSuccess",[e,n,t]),b(o,e,n)}function x(t,e,n,r,i){var o=r.context;r.error.call(o,n,e,t),i&&i.rejectWith(o,[n,e,t]),d(r,o,"ajaxError",[n,r,t||e]),b(e,n,r)}function b(t,e,n){var r=n.context;n.complete.call(r,e,t),d(n,r,"ajaxComplete",[e,n]),g(n)}function E(t,e,n){if(n.dataFilter==j)return t;var r=n.context;return n.dataFilter.call(r,t,e)}function j(){}function w(t){return t&&(t=t.split(";",2)[0]),t&&(t==c?"html":t==f?"json":a.test(t)?"script":u.test(t)&&"xml")||"text"}function T(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function S(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function C(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}function O(t,n,r,i){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,function(n,u){o=e.type(u),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?t.add(u.name,u.value):"array"==o||!r&&"object"==o?O(t,u,r,n):t.add(n,u)})}var i,o,n=+new Date,r=t.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,f="application/json",c="text/html",l=/^\s*$/,h=r.createElement("a");h.href=t.location.href,e.active=0,e.ajaxJSONP=function(i,o){if(!("type"in i))return e.ajax(i);var c,p,s=i.jsonpCallback,a=(e.isFunction(s)?s():s)||"Zepto"+n++,u=r.createElement("script"),f=t[a],l=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:l};return o&&o.promise(h),e(u).on("load error",function(n,r){clearTimeout(p),e(u).off().remove(),"error"!=n.type&&c?y(c[0],h,i,o):x(null,r||"error",h,i,o),t[a]=f,c&&e.isFunction(f)&&f(c[0]),f=c=void 0}),v(h,i)===!1?(l("abort"),h):(t[a]=function(){c=arguments},u.src=i.url.replace(/\?(.+)=\?/,"?$1="+a),r.head.appendChild(u),i.timeout>0&&(p=setTimeout(function(){l("timeout")},i.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:f,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:j},e.ajax=function(n){var u,f,s=e.extend({},n||{}),a=e.Deferred&&e.Deferred();for(i in e.ajaxSettings)void 0===s[i]&&(s[i]=e.ajaxSettings[i]);m(s),s.crossDomain||(u=r.createElement("a"),u.href=s.url,u.href=u.href,s.crossDomain=h.protocol+"//"+h.host!=u.protocol+"//"+u.host),s.url||(s.url=t.location.toString()),(f=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,f)),S(s);var c=s.dataType,p=/\?.+=\?/.test(s.url);if(p&&(c="jsonp"),s.cache!==!1&&(n&&n.cache===!0||"script"!=c&&"jsonp"!=c)||(s.url=T(s.url,"_="+Date.now())),"jsonp"==c)return p||(s.url=T(s.url,s.jsonp?s.jsonp+"=?":s.jsonp===!1?"":"callback=?")),e.ajaxJSONP(s,a);var P,d=s.accepts[c],g={},b=function(t,e){g[t.toLowerCase()]=[t,e]},C=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:t.location.protocol,N=s.xhr(),O=N.setRequestHeader;if(a&&a.promise(N),s.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",d||"*/*"),(d=s.mimeType||d)&&(d.indexOf(",")>-1&&(d=d.split(",",2)[0]),N.overrideMimeType&&N.overrideMimeType(d)),(s.contentType||s.contentType!==!1&&s.data&&"GET"!=s.type.toUpperCase())&&b("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(o in s.headers)b(o,s.headers[o]);if(N.setRequestHeader=b,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=j,clearTimeout(P);var t,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==C){if(c=c||w(s.mimeType||N.getResponseHeader("content-type")),"arraybuffer"==N.responseType||"blob"==N.responseType)t=N.response;else{t=N.responseText;try{t=E(t,c,s),"script"==c?(1,eval)(t):"xml"==c?t=N.responseXML:"json"==c&&(t=l.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return x(n,"parsererror",N,s,a)}y(t,N,s,a)}else x(N.statusText||null,N.status?"error":"abort",N,s,a)}},v(N,s)===!1)return N.abort(),x(null,"abort",N,s,a),N;var A="async"in s?s.async:!0;if(N.open(s.type,s.url,A,s.username,s.password),s.xhrFields)for(o in s.xhrFields)N[o]=s.xhrFields[o];for(o in g)O.apply(N,g[o]);return s.timeout>0&&(P=setTimeout(function(){N.onreadystatechange=j,N.abort(),x(null,"timeout",N,s,a)},s.timeout)),N.send(s.data?s.data:null),N},e.get=function(){return e.ajax(C.apply(null,arguments))},e.post=function(){var t=C.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=C.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var a,i=this,o=t.split(/\s/),u=C(t,n,r),f=u.success;return o.length>1&&(u.url=o[0],a=o[1]),u.success=function(t){i.html(a?e("<div>").html(t.replace(s,"")).find(a):t),f&&f.apply(i,arguments)},e.ajax(u),this};var N=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(N(t)+"="+N(n))},O(r,t,n),r.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(r,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())}),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(t,e){try{return n(t,e)}catch(r){return null}}}}(),e});
        !function(i){!function(i,a){var o=this.os={},e=this.browser={},t=i.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!i.match(/\(Macintosh\; Intel /),a=/Win\d{2}|Windows/.test(a),s=i.match(/(iPad).*OS\s([\d_]+)/),c=i.match(/(iPod)(.*OS\s([\d_]+))?/),n=!s&&i.match(/(iPhone\sOS)\s([\d_]+)/),h=!s&&!n&&i.match(/(Macintosh;.*Mac\sOS\sX)\s([\d_]+)/),d=i.match(/Chrome\/([\d.]+)/)||i.match(/CriOS\/([\d.]+)/),m=i.match(/Firefox\/([\d.]+)/),v=i.match(/MSIE\s([\d.]+)/)||i.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),S=!d&&i.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),f=S||i.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);t&&(o.android=!0,o.version=t[2]);n&&!c&&(o.ios=o.iphone=!0,o.version=n[2].replace(/_/g,"."));s&&(o.ios=o.ipad=!0,o.version=s[2].replace(/_/g,"."));h&&(o.ios=o.mac=!0,o.version=h[2].replace(/_/g,"."));d&&(e.chrome=!0,e.version=d[1]);m&&(e.firefox=!0,e.version=m[1]);v&&(e.ie=!0,e.version=v[1]);if(f&&(r||o.ios||a)){e.safari=!0;o.ios||(e.version=f[1])}S&&(e.webview=!0);o.phone=!(o.tablet||o.ipod||!(t||n||d&&i.match(/Android/)||d&&i.match(/CriOS\/([\d.]+)/)||m&&i.match(/Mobile/)||v&&i.match(/Touch/)))}.call(i,navigator.userAgent,navigator.platform)}(Zepto);
    var QRCode;!function(){function a(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=[],d=0,e=this.data.length;e>d;d++){var f=this.data.charCodeAt(d);f>65536?(b[0]=240|(1835008&f)>>>18,b[1]=128|(258048&f)>>>12,b[2]=128|(4032&f)>>>6,b[3]=128|63&f):f>2048?(b[0]=224|(61440&f)>>>12,b[1]=128|(4032&f)>>>6,b[2]=128|63&f):f>128?(b[0]=192|(1984&f)>>>6,b[1]=128|63&f):b[0]=f,this.parsedData=this.parsedData.concat(b)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function j(a,b){this.totalCount=a,this.dataCount=b}function k(){this.buffer=[],this.length=0}function m(){return"undefined"!=typeof CanvasRenderingContext2D}function n(){var a=!1,b=navigator.userAgent;return/android/i.test(b)&&(a=!0,aMat=b.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(a=parseFloat(aMat[1]))),a}function r(a,b){for(var c=1,e=s(a),f=0,g=l.length;g>=f;f++){var h=0;switch(b){case d.L:h=l[f][0];break;case d.M:h=l[f][1];break;case d.Q:h=l[f][2];break;case d.H:h=l[f][3]}if(h>=e)break;c++}if(c>l.length)throw new Error("Too long data");return c}function s(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;c>b;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=f.getBCHTypeInfo(c),e=0;15>e;e++){var g=!a&&1==(1&d>>e);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(var e=0;15>e;e++){var g=!a&&1==(1&d>>e);8>e?this.modules[8][this.moduleCount-e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var j=!1;g<a.length&&(j=1==(1&a[g]>>>e));var k=f.getMask(b,d,h-i);k&&(j=!j),this.modules[d][h-i]=j,e--,-1==e&&(g++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,d){for(var e=j.getRSBlocks(a,c),g=new k,h=0;h<d.length;h++){var i=d[h];g.put(i.mode,4),g.put(i.getLength(),f.getLengthInBits(i.mode,a)),i.write(g)}for(var l=0,h=0;h<e.length;h++)l+=e[h].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);0!=g.getLengthInBits()%8;)g.putBit(!1);for(;;){if(g.getLengthInBits()>=8*l)break;if(g.put(b.PAD0,8),g.getLengthInBits()>=8*l)break;g.put(b.PAD1,8)}return b.createBytes(g,e)},b.createBytes=function(a,b){for(var c=0,d=0,e=0,g=new Array(b.length),h=new Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),g[j]=new Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];c+=k;var n=f.getErrorCorrectPolynomial(l),o=new i(g[j],n.getLength()-1),p=o.mod(n);h[j]=new Array(n.getLength()-1);for(var m=0;m<h[j].length;m++){var q=m+p.getLength()-h[j].length;h[j][m]=q>=0?p.get(q):0}}for(var r=0,m=0;m<b.length;m++)r+=b[m].totalCount;for(var s=new Array(r),t=0,m=0;d>m;m++)for(var j=0;j<b.length;j++)m<g[j].length&&(s[t++]=g[j][m]);for(var m=0;e>m;m++)for(var j=0;j<b.length;j++)m<h[j].length&&(s[t++]=h[j][m]);return s};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;f.getBCHDigit(b)-f.getBCHDigit(f.G15)>=0;)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;f.getBCHDigit(b)-f.getBCHDigit(f.G18)>=0;)b^=f.G18<<f.getBCHDigit(b)-f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case e.PATTERN000:return 0==(b+c)%2;case e.PATTERN001:return 0==b%2;case e.PATTERN010:return 0==c%3;case e.PATTERN011:return 0==(b+c)%3;case e.PATTERN100:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case e.PATTERN101:return 0==b*c%2+b*c%3;case e.PATTERN110:return 0==(b*c%2+b*c%3)%2;case e.PATTERN111:return 0==(b*c%3+(b+c)%2)%2;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new i([1],0),c=0;a>c;c++)b=b.multiply(new i([1,g.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},g={glog:function(a){if(1>a)throw new Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;8>h;h++)g.EXP_TABLE[h]=1<<h;for(var h=8;256>h;h++)g.EXP_TABLE[h]=g.EXP_TABLE[h-4]^g.EXP_TABLE[h-5]^g.EXP_TABLE[h-6]^g.EXP_TABLE[h-8];for(var h=0;255>h;h++)g.LOG_TABLE[g.EXP_TABLE[h]]=h;i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new i(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return new i(c,0).mod(a)}},j.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j.getRSBlocks=function(a,b){var c=j.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],k=0;g>k;k++)e.push(new j(h,i));return e},j.getRsBlockTable=function(a,b){switch(b){case d.L:return j.RS_BLOCK_TABLE[4*(a-1)+0];case d.M:return j.RS_BLOCK_TABLE[4*(a-1)+1];case d.Q:return j.RS_BLOCK_TABLE[4*(a-1)+2];case d.H:return j.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}},k.prototype={get:function(a){var b=Math.floor(a/8);return 1==(1&this.buffer[b]>>>7-a%8)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(1&a>>>b-c-1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],o=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function g(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var b=this._htOption,c=this._el,d=a.getModuleCount();Math.floor(b.width/d),Math.floor(b.height/d),this.clear();var h=g("svg",{viewBox:"0 0 "+String(d)+" "+String(d),width:"100%",height:"100%",fill:b.colorLight});h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),c.appendChild(h),h.appendChild(g("rect",{fill:b.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;d>i;i++)for(var j=0;d>j;j++)if(a.isDark(i,j)){var k=g("use",{x:String(i),y:String(j)});k.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),h.appendChild(k)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),p="svg"===document.documentElement.tagName.toLowerCase(),q=p?o:m()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function d(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&_fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}c._bSupportDataURI===!0&&c._fSuccess?c._fSuccess.call(c):c._bSupportDataURI===!1&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var b=1/window.devicePixelRatio,c=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,d,e,f,g,h,i,j){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*b;else"undefined"==typeof j&&(arguments[1]*=b,arguments[2]*=b,arguments[3]*=b,arguments[4]*=b);c.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=n(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;e>j;j++)for(var k=0;e>k;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&d.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;d>h;h++){g.push("<tr>");for(var i=0;d>i;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();QRCode=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._android=n(),this._el=a,this._oQRCode=null,this._oDrawing=new q(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(a){this._oQRCode=new b(r(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=d}();
var Clappr=function(){"use strict";function F(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function M(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach(function(e){t=n,e=r[i=e],(i=function(){var e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(i);return"symbol"==typeof e?e:String(e)}())in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e;var t,i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function U(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach(function(e){t=n,i=r[e=e],e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;var t,i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,i){return t&&V(e.prototype,t),i&&V(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=K(i),t=(e=n?(e=K(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return H(t)}}function Y(){return(Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],s=!0,o=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==i.return||i.return()}finally{if(o)throw r}}return a}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return q(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function X(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=z(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw r}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var a=t[r];if(e.call(n,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,n=new Array(i);i--;)n[i]=[t[i],e[t[i]]];return n}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var a=t[r];if(e.call(n,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var Z,l,s,u,Q,J,ee,r,te,ie,ne,c,re,ae,se,oe,le,ue,ce,de,he,fe,pe,ge,ve,me,d,ye,Ae,Ee,Te,be,ke,Se,_e,Ce,Le,De,h,Re,Ie,Oe,we,Pe,xe,Ne,Fe,Me,Be,Ue,Ge,Ve,f,Ke,p,je,He,Ye,We,$e,ze,qe,Xe,Ze,Qe,Je,et,tt={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},e=(te=(r=[]).concat,ie=r.filter,ne=r.slice,c=window.document,re={},ae={},se={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},oe=/^\s*<(\w+|!)[^>]*>/,le=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ce=/^(?:body|html)$/i,de=/([A-Z])/g,he=["val","css","html","text","data","width","height","offset"],e=c.createElement("table"),a=c.createElement("tr"),fe={tr:c.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:a,th:a,"*":c.createElement("div")},pe=/complete|loaded|interactive/,ge=/^[\w-]*$/,me=(ve={}).toString,d={},ye=c.createElement("div"),Ae={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Ee=Array.isArray||function(e){return e instanceof Array},d.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var i=e.parentNode,n=!i;return n&&(i=ye).appendChild(e),i=~d.qsa(i,t).indexOf(e),n&&ye.removeChild(e),i},J=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},ee=function(i){return ie.call(i,function(e,t){return i.indexOf(e)==t})},d.fragment=function(e,t,i){var n,r,a;return(n=le.test(e)?u(c.createElement(RegExp.$1)):n)||(e.replace&&(e=e.replace(ue,"<$1></$2>")),(t=t===l?oe.test(e)&&RegExp.$1:t)in fe||(t="*"),(a=fe[t]).innerHTML=""+e,n=u.each(ne.call(a.childNodes),function(){a.removeChild(this)})),ot(i)&&(r=u(n),u.each(i,function(e,t){-1<he.indexOf(e)?r[e](t):r.attr(e,t)})),n},d.Z=function(e,t){return new ft(e,t)},d.isZ=function(e){return e instanceof d.Z},d.init=function(e,t){var i,n;if(!e)return d.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&oe.test(e))i=d.fragment(e,RegExp.$1,t),e=null;else{if(t!==l)return u(t).find(e);i=d.qsa(c,e)}else{if(nt(e))return u(c).ready(e);if(d.isZ(e))return e;if(Ee(e))n=e,i=ie.call(n,function(e){return null!=e});else if(st(e))i=[e],e=null;else if(oe.test(e))i=d.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==l)return u(t).find(e);i=d.qsa(c,e)}}return d.Z(i,e)},(u=function(e,t){return d.init(e,t)}).extend=function(t){var i,e=ne.call(arguments,1);return"boolean"==typeof t&&(i=t,t=e.shift()),e.forEach(function(e){!function e(t,i,n){for(s in i)n&&(ot(i[s])||Ee(i[s]))?(ot(i[s])&&!ot(t[s])&&(t[s]={}),Ee(i[s])&&!Ee(t[s])&&(t[s]=[]),e(t[s],i[s],n)):i[s]!==l&&(t[s]=i[s])}(t,e,i)}),t},d.qsa=function(e,t){var i,n="#"==t[0],r=!n&&"."==t[0],a=n||r?t.slice(1):t,s=ge.test(a);return e.getElementById&&s&&n?(i=e.getElementById(a))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:ne.call(s&&!n&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},u.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},u.type=it,u.isFunction=nt,u.isWindow=rt,u.isArray=Ee,u.isPlainObject=ot,u.isEmptyObject=function(e){for(var t in e)return!1;return!0},u.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},u.inArray=function(e,t,i){return r.indexOf.call(t,e,i)},u.camelCase=J,u.trim=function(e){return null==e?"":String.prototype.trim.call(e)},u.uuid=0,u.support={},u.expr={},u.noop=function(){},u.map=function(e,t){var i,n,r,a,s=[];if(lt(e))for(n=0;n<e.length;n++)null!=(i=t(e[n],n))&&s.push(i);else for(r in e)null!=(i=t(e[r],r))&&s.push(i);return 0<(a=s).length?u.fn.concat.apply([],a):a},u.each=function(e,t){var i,n;if(lt(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},u.grep=function(e,t){return ie.call(e,t)},window.JSON&&(u.parseJSON=JSON.parse),u.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ve["[object "+t+"]"]=t.toLowerCase()}),u.fn={constructor:d.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=d.isZ(e=arguments[i])?e.toArray():e;return te.apply(d.isZ(this)?this.toArray():this,t)},map:function(i){return u(u.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return u(ne.apply(this,arguments))},ready:function(e){return pe.test(c.readyState)&&c.body?e(u):c.addEventListener("DOMContentLoaded",function(){e(u)},!1),this},get:function(e){return e===l?ne.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return r.every.call(this,function(e,t){return!1!==i.call(e,t,e)}),this},filter:function(t){return nt(t)?this.not(this.not(t)):u(ie.call(this,function(e){return d.matches(e,t)}))},add:function(e,t){return u(ee(this.concat(u(e,t))))},is:function(e){return 0<this.length&&d.matches(this[0],e)},not:function(t){var i=[];if(nt(t)&&t.call!==l)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):lt(t)&&nt(t.item)?ne.call(t):u(t);this.forEach(function(e){n.indexOf(e)<0&&i.push(e)})}return u(i)},has:function(e){return this.filter(function(){return st(e)?u.contains(this,e):u(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!st(e)?e:u(e)},last:function(){var e=this[this.length-1];return e&&!st(e)?e:u(e)},find:function(e){var i=this;return e?"object"==typeof e?u(e).filter(function(){var t=this;return r.some.call(i,function(e){return u.contains(e,t)})}):1==this.length?u(d.qsa(this[0],e)):this.map(function(){return d.qsa(this,e)}):u()},closest:function(i,n){var r=[],a="object"==typeof i&&u(i);return this.each(function(e,t){for(;t&&!(a?0<=a.indexOf(t):d.matches(t,i));)t=t!==n&&!at(t)&&t.parentNode;t&&r.indexOf(t)<0&&r.push(t)}),u(r)},parents:function(e){for(var t=[],i=this;0<i.length;)i=u.map(i,function(e){if((e=e.parentNode)&&!at(e)&&t.indexOf(e)<0)return t.push(e),e});return pt(t,e)},parent:function(e){return pt(ee(this.pluck("parentNode")),e)},children:function(e){return pt(this.map(function(){return ht(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||ne.call(this.childNodes)})},siblings:function(e){return pt(this.map(function(e,t){return ie.call(ht(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return u.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,re[e]||(t=c.createElement(e),c.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),re[e]=i="none"==i?"block":i),re[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var i,n,r=nt(t);this[0]&&!r&&(i=u(t).get(0),n=i.parentNode||1<this.length);return this.each(function(e){u(this).wrapAll(r?t.call(this,e):n?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){var t;for(u(this[0]).before(e=u(e));(t=e.children()).length;)e=t.first();u(e).append(this)}return this},wrapInner:function(n){var r=nt(n);return this.each(function(e){var t=u(this),i=t.contents(),e=r?n.call(this,e):n;i.length?i.wrapAll(e):t.append(e)})},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(u(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=u(this);(t===l?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return u(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return u(this.pluck("nextElementSibling")).filter(e||"*")},html:function(i){return 0 in arguments?this.each(function(e){var t=this.innerHTML;u(this).empty().append(gt(this,i,e,t))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){e=gt(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,i){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(st(t))for(s in t)vt(this,s,t[s]);else vt(this,t,gt(this,i,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:l},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){vt(this,e)},this)})},prop:function(t,i){return t=Ae[t]||t,1 in arguments?this.each(function(e){this[t]=gt(this,i,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=Ae[e]||e,this.each(function(){delete this[e]})},data:function(e,t){e="data-"+e.replace(de,"-$1").toLowerCase(),t=1 in arguments?this.attr(e,t):this.attr(e);return null!==t?yt(t):l},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=gt(this,t,e,this.value)})):this[0]&&(this[0].multiple?u(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(n){if(n)return this.each(function(e){var t=u(this),e=gt(this,n,e,t.offset()),i=t.offsetParent().offset(),e={top:e.top-i.top,left:e.left-i.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)});if(!this.length)return null;if(c.documentElement!==this[0]&&!u.contains(c.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var i=this[0];if("string"==typeof e)return i?i.style[J(e)]||getComputedStyle(i,"").getPropertyValue(e):void 0;if(Ee(e)){if(!i)return;var n={},r=getComputedStyle(i,"");return u.each(e,function(e,t){n[t]=i.style[J(t)]||r.getPropertyValue(t)}),n}}var a="";if("string"==it(e))t||0===t?a=ut(e)+":"+dt(e,t):this.each(function(){this.style.removeProperty(ut(e))});else for(s in e)e[s]||0===e[s]?a+=ut(s)+":"+dt(s,e[s])+";":this.each(function(){this.style.removeProperty(ut(s))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf(u(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&r.some.call(this,function(e){return this.test(mt(e))},ct(e))},addClass:function(i){return i?this.each(function(e){if("className"in this){Q=[];var t=mt(this);gt(this,i,e,t).split(/\s+/g).forEach(function(e){u(this).hasClass(e)||Q.push(e)},this),Q.length&&mt(this,t+(t?" ":"")+Q.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===l)return mt(this,"");Q=mt(this),gt(this,t,e,Q).split(/\s+/g).forEach(function(e){Q=Q.replace(ct(e)," ")}),mt(this,Q.trim())}})},toggleClass:function(i,n){return i?this.each(function(e){var t=u(this);gt(this,i,e,mt(this)).split(/\s+/g).forEach(function(e){(n===l?!t.hasClass(e):n)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){var t;if(this.length)return t="scrollTop"in this[0],e===l?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})},scrollLeft:function(e){var t;if(this.length)return t="scrollLeft"in this[0],e===l?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})},position:function(){var e,t,i,n;if(this.length)return e=this[0],t=this.offsetParent(),i=this.offset(),n=ce.test(t[0].nodeName)?{top:0,left:0}:t.offset(),i.top-=parseFloat(u(e).css("margin-top"))||0,i.left-=parseFloat(u(e).css("margin-left"))||0,n.top+=parseFloat(u(t[0]).css("border-top-width"))||0,n.left+=parseFloat(u(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||c.body;e&&!ce.test(e.nodeName)&&"static"==u(e).css("position");)e=e.offsetParent;return e})}},u.fn.detach=u.fn.remove,["width","height"].forEach(function(n){var r=n.replace(/./,function(e){return e[0].toUpperCase()});u.fn[n]=function(t){var e,i=this[0];return t===l?rt(i)?i["inner"+r]:at(i)?i.documentElement["scroll"+r]:(e=this.offset())&&e[n]:this.each(function(e){(i=u(this)).css(n,gt(this,t,e,i[n]()))})}}),["after","prepend","before","append"].forEach(function(t,s){var o=s%2;u.fn[t]=function(){var i,n,r=u.map(arguments,function(e){var t=[];return"array"==(i=it(e))?(e.forEach(function(e){return e.nodeType!==l?t.push(e):u.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(d.fragment(e)))}),t):"object"==i||null==e?e:d.fragment(e)}),a=1<this.length;return r.length<1?this:this.each(function(e,t){n=o?t:t.parentNode,t=0==s?t.nextSibling:1==s?t.firstChild:2==s?t:null;var i=u.contains(c.documentElement,n);r.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!n)return u(e).remove();n.insertBefore(e,t),i&&function e(t,i){i(t);for(var n=0,r=t.childNodes.length;n<r;n++)e(t.childNodes[n],i)}(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}})})})},u.fn[o?t+"To":"insert"+(s?"Before":"After")]=function(e){return u(e)[t](this),this}}),d.Z.prototype=ft.prototype=u.fn,d.uniq=ee,d.deserializeValue=yt,u.zepto=d,u);function it(e){return null==e?String(e):ve[me.call(e)]||"object"}function nt(e){return"function"==it(e)}function rt(e){return null!=e&&e==e.window}function at(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function st(e){return"object"==it(e)}function ot(e){return st(e)&&!rt(e)&&Object.getPrototypeOf(e)==Object.prototype}function lt(e){var t=!!e&&"length"in e&&e.length,i=u.type(e);return"function"!=i&&!rt(e)&&("array"==i||0===t||"number"==typeof t&&0<t&&t-1 in e)}function ut(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function ct(e){return e in ae?ae[e]:ae[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function dt(e,t){return"number"!=typeof t||se[ut(e)]?t:t+"px"}function ht(e){return"children"in e?ne.call(e.children):u.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function ft(e,t){for(var i=e?e.length:0,n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function pt(e,t){return null==t?u(e):u(e).filter(t)}function gt(e,t,i,n){return nt(t)?t.call(e,i,n):t}function vt(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function mt(e,t){var i=e.className||"",n=i&&i.baseVal!==l;if(t===l)return n?i.baseVal:i;n?i.baseVal=t:e.className=t}function yt(t){try{return t&&("true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?u.parseJSON(t):t))}catch(e){return t}}window.Zepto=e,void 0===window.$&&(window.$=e),p=e,Ye=+new Date,We=window.document,$e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ze=/^(?:text|application)\/javascript/i,qe=/^(?:text|application)\/xml/i,Xe="application/json",Ze="text/html",Qe=/^\s*$/,Je=We.createElement("a"),et=(Je.href=window.location.href,p.active=0,p.ajaxJSONP=function(i,n){if(!("type"in i))return p.ajax(i);function e(e){p(o).triggerHandler("error",e||"abort")}var r,a,t=i.jsonpCallback,s=(p.isFunction(t)?t():t)||"Zepto"+Ye++,o=We.createElement("script"),l=window[s],u={abort:e};return n&&n.promise(u),p(o).on("load error",function(e,t){clearTimeout(a),p(o).off().remove(),"error"!=e.type&&r?Nt(r[0],u,i,n):Ft(null,t||"error",u,i,n),window[s]=l,r&&p.isFunction(l)&&l(r[0]),l=r=void 0}),!1===xt(u,i)?e("abort"):(window[s]=function(){r=arguments},o.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),We.head.appendChild(o),0<i.timeout&&(a=setTimeout(function(){e("timeout")},i.timeout))),u},p.ajaxSettings={type:"GET",beforeSend:Bt,success:Bt,error:Bt,complete:Bt,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:Xe,xml:"application/xml, text/xml",html:Ze,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:Bt},p.ajax=function(e){var n=p.extend({},e||{}),r=p.Deferred&&p.Deferred();for(je in p.ajaxSettings)void 0===n[je]&&(n[je]=p.ajaxSettings[je]);(t=n).global&&0==p.active++&&Pt(t,null,"ajaxStart"),n.crossDomain||((t=We.createElement("a")).href=n.url,t.href=t.href,n.crossDomain=Je.protocol+"//"+Je.host!=t.protocol+"//"+t.host),n.url||(n.url=window.location.toString()),-1<(t=n.url.indexOf("#"))&&(n.url=n.url.slice(0,t)),(t=n).processData&&t.data&&"string"!=p.type(t.data)&&(t.data=p.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=Ut(t.url,t.data),t.data=void 0);var a=n.dataType,t=/\?.+=\?/.test(n.url);if(t&&(a="jsonp"),!1!==n.cache&&(e&&!0===e.cache||"script"!=a&&"jsonp"!=a)||(n.url=Ut(n.url,"_="+Date.now())),"jsonp"==a)return t||(n.url=Ut(n.url,n.jsonp?n.jsonp+"=?":!1===n.jsonp?"":"callback=?")),p.ajaxJSONP(n,r);function i(e,t){o[e.toLowerCase()]=[e,t]}var s,e=n.accepts[a],o={},l=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,u=n.xhr(),c=u.setRequestHeader;if(r&&r.promise(u),n.crossDomain||i("X-Requested-With","XMLHttpRequest"),i("Accept",e||"*/*"),(e=n.mimeType||e)&&(-1<e.indexOf(",")&&(e=e.split(",",2)[0]),u.overrideMimeType&&u.overrideMimeType(e)),(n.contentType||!1!==n.contentType&&n.data&&"GET"!=n.type.toUpperCase())&&i("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(He in n.headers)i(He,n.headers[He]);if(u.setRequestHeader=i,!(u.onreadystatechange=function(){if(4==u.readyState){u.onreadystatechange=Bt,clearTimeout(s);var e,t=!1;if(200<=u.status&&u.status<300||304==u.status||0==u.status&&"file:"==l){if(a=a||((i=(i=n.mimeType||u.getResponseHeader("content-type"))&&i.split(";",2)[0])&&(i==Ze?"html":i==Xe?"json":ze.test(i)?"script":qe.test(i)&&"xml")||"text"),"arraybuffer"==u.responseType||"blob"==u.responseType)e=u.response;else{e=u.responseText;try{e=function(e,t,i){if(i.dataFilter==Bt)return e;var n=i.context;return i.dataFilter.call(n,e,t)}(e,a,n),"script"==a?(0,eval)(e):"xml"==a?e=u.responseXML:"json"==a&&(e=Qe.test(e)?null:p.parseJSON(e))}catch(e){t=e}if(t)return Ft(t,"parsererror",u,n,r)}Nt(e,u,n,r)}else Ft(u.statusText||null,u.status?"error":"abort",u,n,r)}var i})===xt(u,n))return u.abort(),Ft(null,"abort",u,n,r),u;t=!("async"in n)||n.async;if(u.open(n.type,n.url,t,n.username,n.password),n.xhrFields)for(He in n.xhrFields)u[He]=n.xhrFields[He];for(He in o)c.apply(u,o[He]);return 0<n.timeout&&(s=setTimeout(function(){u.onreadystatechange=Bt,u.abort(),Ft(null,"timeout",u,n,r)},n.timeout)),u.send(n.data||null),u},p.get=function(){return p.ajax(Gt.apply(null,arguments))},p.post=function(){var e=Gt.apply(null,arguments);return e.type="POST",p.ajax(e)},p.getJSON=function(){var e=Gt.apply(null,arguments);return e.dataType="json",p.ajax(e)},p.fn.load=function(e,t,i){if(!this.length)return this;var n,r=this,a=e.split(/\s/),e=Gt(e,t,i),s=e.success;return 1<a.length&&(e.url=a[0],n=a[1]),e.success=function(e){r.html(n?p("<div>").html(e.replace($e,"")).find(n):e),s&&s.apply(r,arguments)},p.ajax(e),this},encodeURIComponent),p.param=function(e,t){var i=[];return i.add=function(e,t){null==(t=p.isFunction(t)?t():t)&&(t=""),this.push(et(e)+"="+et(t))},function i(n,e,r,a){var s,o=p.isArray(e),l=p.isPlainObject(e);p.each(e,function(e,t){s=p.type(t),a&&(e=r?a:a+"["+(l||"object"==s||"array"==s?e:"")+"]"),!a&&o?n.add(t.name,t.value):"array"==s||!r&&"object"==s?i(n,t,r,e):n.add(e,t)})}(i,e,t),i.join("&").replace(/%20/g,"+")},(Z=e).Callbacks=function(n){n=Z.extend({},n);function r(e){for(t=n.memory&&e,i=!0,l=s||0,s=0,o=u.length,a=!0;u&&l<o;++l)if(!1===u[l].apply(e[0],e[1])&&n.stopOnFalse){t=!1;break}a=!1,u&&(c?c.length&&r(c.shift()):t?u.length=0:d.disable())}var t,i,a,s,o,l,u=[],c=!n.once&&[],d={add:function(){if(u){var e=u.length,i=function(e){Z.each(e,function(e,t){"function"==typeof t?n.unique&&d.has(t)||u.push(t):t&&t.length&&"string"!=typeof t&&i(t)})};i(arguments),a?o=u.length:t&&(s=e,r(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var i;-1<(i=Z.inArray(t,u,i));)u.splice(i,1),a&&(i<=o&&--o,i<=l&&--l)}),this},has:function(e){return!(!u||!(e?-1<Z.inArray(e,u):u.length))},empty:function(){return o=u.length=0,this},disable:function(){return u=c=t=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||i&&!c||(t=[e,(t=t||[]).slice?t.slice():t],a?c.push(t):r(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d},f=e,Ke=Array.prototype.slice,f.when=function(e){function t(t,i,n){return function(e){i[t]=this,n[t]=1<arguments.length?Ke.call(arguments):e,n===r?u.notifyWith(i,n):--l||u.resolveWith(i,n)}}var r,i,n,a=Ke.call(arguments),s=a.length,o=0,l=1!==s||e&&f.isFunction(e.promise)?s:0,u=1===l?e:wt();if(1<s)for(r=new Array(s),i=new Array(s),n=new Array(s);o<s;++o)a[o]&&f.isFunction(a[o].promise)?a[o].promise().done(t(o,n,a)).fail(u.reject).progress(t(o,i,r)):--l;return l||u.resolveWith(n,a),u.promise()},f.Deferred=wt,h=e,Ie=1,Oe=Array.prototype.slice,we=h.isFunction,Pe={},xe={},Ne="onfocusin"in window,Fe={focus:"focusin",blur:"focusout"},Me={mouseenter:"mouseover",mouseleave:"mouseout"},Be=(xe.click=xe.mousedown=xe.mouseup=xe.mousemove="MouseEvents",h.event={add:Dt,remove:Rt},h.proxy=function(e,t){var i,n=2 in arguments&&Oe.call(arguments,2);if(we(e))return(i=function(){return e.apply(t,n?n.concat(Oe.call(arguments)):arguments)})._zid=kt(e),i;if(bt(t))return n?(n.unshift(e[t],e),h.proxy.apply(null,n)):h.proxy(e[t],e);throw new TypeError("expected function")},h.fn.bind=function(e,t,i){return this.on(e,t,i)},h.fn.unbind=function(e,t){return this.off(e,t)},h.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)},function(){return!0}),Ue=function(){return!1},Ge=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,Ve={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},h.fn.delegate=function(e,t,i){return this.on(t,e,i)},h.fn.undelegate=function(e,t,i){return this.off(t,e,i)},h.fn.live=function(e,t){return h(document.body).delegate(this.selector,e,t),this},h.fn.die=function(e,t){return h(document.body).undelegate(this.selector,e,t),this},h.fn.on=function(t,n,r,a,s){var o,l,i=this;return t&&!bt(t)?(h.each(t,function(e,t){i.on(e,n,r,t,s)}),i):(bt(n)||we(a)||!1===a||(a=r,r=n,n=Re),a!==Re&&!1!==r||(a=r,r=Re),!1===a&&(a=Ue),i.each(function(e,i){s&&(o=function(e){return Rt(i,e.type,a),a.apply(this,arguments)}),Dt(i,t,a,r,n,(l=n?function(e){var t=h(e.target).closest(n,i).get(0);if(t&&t!==i)return e=h.extend(Ot(e),{currentTarget:t,liveFired:i}),(o||a).apply(t,[e].concat(Oe.call(arguments,1)))}:l)||o)}))},h.fn.off=function(e,i,t){var n=this;return e&&!bt(e)?(h.each(e,function(e,t){n.off(e,i,t)}),n):(bt(i)||we(t)||!1===t||(t=i,i=Re),!1===t&&(t=Ue),n.each(function(){Rt(this,e,t,i)}))},h.fn.trigger=function(e,t){return(e=bt(e)||h.isPlainObject(e)?h.Event(e):It(e))._args=t,this.each(function(){e.type in Fe&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):h(this).triggerHandler(e,t)})},h.fn.triggerHandler=function(i,n){var r,a;return this.each(function(e,t){(r=Ot(bt(i)?h.Event(i):i))._args=n,r.target=t,h.each(St(t,i.type||i),function(e,t){if(a=t.proxy(r),r.isImmediatePropagationStopped())return!1})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){h.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),h.Event=function(e,t){bt(e)||(e=(t=e).type);var i=document.createEvent(xe[e]||"Events"),n=!0;if(t)for(var r in t)"bubbles"==r?n=!!t[r]:i[r]=t[r];return i.initEvent(e,n,!0),It(i)};try{getComputedStyle(void 0)}catch(e){var At=getComputedStyle;window.getComputedStyle=function(e,t){try{return At(e,t)}catch(e){return null}}}be=(Te=e).zepto,ke=be.qsa,Se=be.matches,_e=Te.expr[":"]={visible:function(){if(Et(this))return this},hidden:function(){if(!Et(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,i){if(e===i)return this},contains:function(e,t,i){if(-1<Te(this).text().indexOf(i))return this},has:function(e,t,i){if(be.qsa(this,i).length)return this}},Ce=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),Le=/^\s*>/,De="Zepto"+ +new Date,be.qsa=function(a,e){return Tt(e,function(e,i,n){try{!e&&i?e="*":Le.test(e)&&(t=Te(a).addClass(De),e="."+De+" "+e);var t,r=ke(a,e)}catch(e){throw e}finally{t&&t.removeClass(De)}return i?be.uniq(Te.map(r,function(e,t){return i.call(e,t,r,n)})):r})},be.matches=function(n,e){return Tt(e,function(e,t,i){return(!e||Se(n,e))&&(!t||t.call(n,null,i)===n)})};function Et(e){return((e=Te(e)).width()||e.height())&&"none"!==e.css("display")}function Tt(e,t){e=e.replace(/=#\]/g,'="#"]');var i,n,r=Ce.exec(e);r&&r[2]in _e&&(i=_e[r[2]],n=r[3],e=r[1],n)&&(r=Number(n),n=isNaN(r)?n.replace(/^["']|["']$/g,""):r);return t(e,i,n)}function bt(e){return"string"==typeof e}function kt(e){return e._zid||(e._zid=Ie++)}function St(e,t,i,n){var r,a;(t=_t(t)).ns&&(r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")));return(Pe[kt(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!i||kt(e.fn)===kt(i))&&(!n||e.sel==n)})}function _t(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function Ct(e,t){return e.del&&!Ne&&e.e in Fe||!!t}function Lt(e){return Me[e]||Ne&&Fe[e]||e}function Dt(n,e,r,a,s,o,l){var t=kt(n),u=Pe[t]||(Pe[t]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return h(document).ready(r);var t=_t(e),i=(t.fn=r,t.sel=s,t.e in Me&&(r=function(e){e=e.relatedTarget;if(!e||e!==this&&!h.contains(this,e))return t.fn.apply(this,arguments)}),(t.del=o)||r);t.proxy=function(e){if(!(e=It(e)).isImmediatePropagationStopped()){e.data=a;var t=i.apply(n,e._args==Re?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},t.i=u.length,u.push(t),"addEventListener"in n&&n.addEventListener(Lt(t.e),t.proxy,Ct(t,l))})}function Rt(t,e,i,n,r){var a=kt(t);(e||"").split(/\s/).forEach(function(e){St(t,e,i,n).forEach(function(e){delete Pe[a][e.i],"removeEventListener"in t&&t.removeEventListener(Lt(e.e),e.proxy,Ct(e,r))})})}function It(n,r){return!r&&n.isDefaultPrevented||(r=r||n,h.each(Ve,function(e,t){var i=r[e];n[e]=function(){return this[t]=Be,i&&i.apply(r,arguments)},n[t]=Ue}),n.timeStamp||(n.timeStamp=Date.now()),(r.defaultPrevented!==Re?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=Be)),n}function Ot(e){var t,i={originalEvent:e};for(t in e)Ge.test(t)||e[t]===Re||(i[t]=e[t]);return It(i,e)}function wt(e){var a=[["resolve","done",f.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",f.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",f.Callbacks({memory:1})]],r="pending",s={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return wt(function(r){f.each(a,function(e,i){var n=f.isFunction(t[e])&&t[e];o[i[1]](function(){var e=n&&n.apply(this,arguments);if(e&&f.isFunction(e.promise))e.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var t=this===s?r.promise():this,e=n?[e]:arguments;r[i[0]+"With"](t,e)}})}),t=null}).promise()},promise:function(e){return null!=e?f.extend(e,s):s}},o={};return f.each(a,function(e,t){var i=t[2],n=t[3];s[t[1]]=i.add,n&&i.add(function(){r=n},a[1^e][2].disable,a[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=i.fireWith}),s.promise(o),e&&e.call(o,o),o}function Pt(e,t,i,n){if(e.global)return e=t||We,t=n,n=p.Event(i),p(e).trigger(n,t),!n.isDefaultPrevented()}function xt(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===Pt(t,i,"ajaxBeforeSend",[e,t]))return!1;Pt(t,i,"ajaxSend",[e,t])}function Nt(e,t,i,n){var r=i.context,a="success";i.success.call(r,e,a,t),n&&n.resolveWith(r,[e,a,t]),Pt(i,r,"ajaxSuccess",[t,i,e]),Mt(a,t,i)}function Ft(e,t,i,n,r){var a=n.context;n.error.call(a,i,t,e),r&&r.rejectWith(a,[i,t,e]),Pt(n,a,"ajaxError",[i,n,e||t]),Mt(t,i,n)}function Mt(e,t,i){var n=i.context;i.complete.call(n,t,e),Pt(i,n,"ajaxComplete",[t,i]),(e=i).global&&!--p.active&&Pt(e,null,"ajaxStop")}function Bt(){}function Ut(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Gt(e,t,i,n){return p.isFunction(t)&&(n=i,i=t,t=void 0),p.isFunction(i)||(n=i,i=void 0),{url:e,data:t,success:i,dataType:n}}function Vt(e,t){var i=e.split(".",2);t.fullVersion=e,i[0]&&(t.majorVersion=parseInt(i[0])),i[1]&&(t.minorVersion=parseInt(i[1]))}function Kt(e,t,i){var n="["==t.substr(0,1)?new RegExp(t,"g"):t,n=e.split(n,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),i.fullVersion=e,n&&n[0]&&(i.majorVersion=parseInt(n[0])),n&&n[1]&&(i.minorVersion=parseInt(n[1]))}var g=e,jt=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],Ht=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],v={},a=function(e){var t,i=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===i[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(i.splice(1,1,"Android WebView"),i.splice(2,1,t[1]));return{name:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(i[1])}}(navigator.userAgent);v.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),v.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!v.isEdge,v.isSafari=/Safari/i.test(navigator.userAgent)&&!v.isChrome&&!v.isEdge,v.isFirefox=/Firefox/i.test(navigator.userAgent),v.isLegacyIE=!!window.ActiveXObject,v.isIE=v.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),v.isIE11=/trident.*rv:11/i.test(navigator.userAgent),v.isChromecast=v.isChrome&&/CrKey/i.test(navigator.userAgent),v.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),v.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),v.isAndroid=/Android/i.test(navigator.userAgent),v.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),v.isWin8App=/MSAppHost/i.test(navigator.userAgent),v.isWiiU=/WiiU/i.test(navigator.userAgent),v.isPS4=/PlayStation 4/i.test(navigator.userAgent),v.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),v.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),v.name=a.name,v.version=a.version,v.userAgent=navigator.userAgent,v.data=function(){var e,t={},i=v.userAgent.toLowerCase(),n=X(jt);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(i);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var s=new RegExp(r.versionIdentifier.toLowerCase()).exec(i);null!=s&&s[1]&&Vt(s[1],t)}else Vt(a[1],t);break}}}catch(e){n.e(e)}finally{n.f()}return t}(),v.os=function(){var e,t={},i=v.userAgent.toLowerCase(),n=X(Ht);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(i);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)Kt(r.version,r.versionSeparator||".",t);else if(a[1])Kt(a[1],r.versionSeparator||".",t);else if(r.versionIdentifier){var s=new RegExp(r.versionIdentifier.toLowerCase()).exec(i);null!=s&&s[1]&&Kt(s[1],r.versionSeparator||".",t)}break}}}catch(e){n.e(e)}finally{n.f()}return t}(),v.isWindows=/^Windows$/i.test(v.os.group),v.isMacOS=/^Mac OS$/i.test(v.os.group),v.isLinux=/^Linux$/i.test(v.os.group),v.viewport=((e={}).width=g(window).width(),e.height=g(window).height(),e),v.device=(a=v.userAgent,(e=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(a))&&(e[1]||e[2])||"");if(void 0!==window.orientation)switch(window.orientation){case-90:case 90:v.viewport.orientation="landscape";break;default:v.viewport.orientation="portrait"}var Yt={},Wt=[],$t=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),zt=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function qt(e,t){if(t)for(var i in t){var n=Object.getOwnPropertyDescriptor(t,i);n?Object.defineProperty(e,i,n):e[i]=t[i]}return e}function Xt(e,r){a=(i(s,e),n(s));var a,e=t(s);function s(){var e;o(this,s);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e=a.call.apply(a,[this].concat(i)),r.initialize&&r.initialize.apply(H(e),i),e}return qt(e.prototype,r),e}var Zt={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},a=(t(ei,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return v.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(v.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),ei),Qt=(t(Jt,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,i=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(i," "))},a={};t=n.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}]),Jt);function Jt(){o(this,Jt)}function ei(){o(this,ei)}function ti(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"t",i=0,e=Qt.params[e]||Qt.hashParams[e]||"",t=e.match(/[0-9]+[hms]+/g)||[];if(0<t.length){var n={h:3600,m:60,s:1};t.forEach(function(e){if(e){var t=e[e.length-1],e=parseInt(e.slice(0,e.length-1),10);i+=e*n[t]}})}else e&&(i=parseInt(e,10));return i}function ii(e){return Yt[e]||(Yt[e]=0),e+ ++Yt[e]}function ni(e){return 0<=e-parseFloat(e)+1}function ri(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function ai(){return window.navigator&&window.navigator.language}function si(i,e){var t=(e=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:tt.mp4,element:null},e)).element?e.element:document.createElement(e.type),t=(t.muted=e.muted,!0===e.muted&&t.setAttribute("muted","muted"),!0===e.inline&&t.setAttribute("playsinline","playsinline"),t.src=e.source,t.play()),n=setTimeout(function(){r(!1,new Error("Timeout ".concat(e.timeout," ms has been reached")))},e.timeout),r=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(n),i(e,t)};void 0!==t?t.then(function(){return r(!0)}).catch(function(e){return r(!1,e)}):r(!0)}t(li,null,[{key:"configure",value:function(e){this.options=g.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&0<Wt.length?Wt.shift():document.createElement(e)}},{key:"garbage",value:function(t){this.options.recycleVideo&&"VIDEO"===t.tagName.toUpperCase()&&(g(t).children().remove(),Object.values(t.attributes).forEach(function(e){return t.removeAttribute(e.name)}),Wt.push(t))}}]);var oi=li;function li(){o(this,li)}oi.options={recycleVideo:!1};t(gi,[{key:"handle",value:function(e,t){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=(new Date).getTime(),r=n-this.lastTime;r<this.delay&&0<r&&(t(),i&&e.preventDefault()),this.lastTime=n}}]);var ui=gi,e={Config:a,Fullscreen:Zt,QueryString:Qt,DomRecycler:oi,assign:qt,extend:Xt,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var i=(e=parseInt(e/1e3))%60,n=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,e=parseInt(e/24),a="";return e&&0<e&&(a+=e+":",r<1&&(a+="00:")),(r&&0<r||t)&&(a+=("0"+r).slice(-2)+":"),(a=(a+=("0"+n).slice(-2)+":")+("0"+i).slice(-2)).trim()},seekStringToSeconds:ti,uniqueId:ii,currentScriptUrl:ri,isNumber:ni,requestAnimationFrame:$t,cancelAnimationFrame:zt,getBrowserLanguage:ai,now:function(){return(window.performance&&window.performance.now?performance:Date).now()},removeArrayItem:function(e,t){t=e.indexOf(t);0<=t&&e.splice(t,1)},listContainsIgnoreCase:function(t,e){return void 0!==t&&void 0!==e&&void 0!==e.find(function(e){return t.toLowerCase()===e.toLowerCase()})},canAutoPlayMedia:si,Media:tt,DoubleEventHandler:ui},a="font-weight: bold; font-size: 13px;",ci="color: #ff8000;"+a,di="color: #ff0000;"+a,hi=["color: #0000ff;"+a,"color: #006600;"+a,ci,di,di],fi=["debug","info","warn","error","disabled"],m=(t(pi,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+fi[this.level],ci)}},{key:"log",value:function(e,t,i){if(!(0<=this.EXCLUDE_LIST.indexOf(i[0])||t<this.level)){i||(i=e,e=null);var n=hi[t],e=e?"["+e+"]":"";window.console&&window.console.log&&window.console.log.apply(console,["%c["+fi[t]+"]"+e,n].concat(i))}}}]),pi);function pi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;o(this,pi),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=e,this.previousLevel=this.level,this.offLevel=t}function gi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;o(this,gi),this.delay=e,this.lastTime=0}m.LEVEL_DEBUG=0,m.LEVEL_INFO=1,m.LEVEL_WARN=2,m.LEVEL_ERROR=3,m.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},m.setLevel=function(e){this.getInstance().level=e},m.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},m.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},m.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},m.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};function vi(e,t,i,n){if(!i)return 1;if("object"===G(i))for(var r in i)e[t].apply(e,[r,i[r]].concat(n));else{if(!Ai.test(i))return 1;for(var a=i.split(Ai),s=0,o=a.length;s<o;s++)e[t].apply(e,[a[s]].concat(n))}}function mi(e,i,n,r){var a,s=-1,o=e.length,l=i[0],u=i[1],c=i[2];!function t(){try{switch(i.length){case 0:for(;++s<o;)(a=e[s]).callback.call(a.ctx);return;case 1:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l);return;case 2:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l,u);return;case 3:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l,u,c);return;default:for(;++s<o;)(a=e[s]).callback.apply(a.ctx,i);return}}catch(e){m.error.apply(m,[n,"error on event",r,"trigger","-",e]),t()}}()}var yi=Array.prototype.slice,Ai=/\s+/,y=(t(A,[{key:"on",value:function(e,t,i){return vi(this,"on",e,[t,i])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this})),this}},{key:"once",value:function(e,t,i){var n=this;if(!vi(this,"once",e,[t,i])||!t)return this;var r=function(){n.off(e,r),t.apply(this,arguments)};return this.on(e,r,i)}},{key:"off",value:function(e,t,i){var n,r,a,s,o,l,u,c;if(!this._events||!vi(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(o=0,l=(s=e?[e]:Object.keys(this._events)).length;o<l;o++)if(e=s[o],a=this._events[e]){if(this._events[e]=n=[],t||i)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(m.debug.apply(m,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var i=yi.call(arguments,1);if(!vi(this,"trigger",e,i))return this;var n=this._events[e],r=this._events.all;return n&&mi(n,i,t,e),r&&mi(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,i){var n=this._listeningTo;if(!n)return this;var r,a=!t&&!i;for(r in i||"object"!==G(t)||(i=this),e&&((n={})[e._listenId]=e),n)(e=n[r]).off(t,i,this),!a&&0!==Object.keys(e._events).length||delete this._listeningTo[r];return this}}],[{key:"register",value:function(e){A.Custom||(A.Custom={});var t="string"==typeof e&&e.toUpperCase().trim();t&&!A.Custom[t]?A.Custom[t]=t.toLowerCase().split("_").map(function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)}).join(""):m.error("Events","Error when register event: "+e)}},{key:"listAvailableCustomEvents",value:function(){return A.Custom||(A.Custom={}),Object.keys(A.Custom).filter(function(e){return"string"==typeof A.Custom[e]})}}]),A),Ei={listenTo:"on",listenToOnce:"once"};function A(){o(this,A)}Object.keys(Ei).forEach(function(n){y.prototype[n]=function(e,t,i){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=ii("l"))]=e,i||"object"!==G(t)||(i=this),e[Ei[n]](t,i,this),this}}),y.PLAYER_READY="ready",y.PLAYER_RESIZE="resize",y.PLAYER_FULLSCREEN="fullscreen",y.PLAYER_PLAY="play",y.PLAYER_PAUSE="pause",y.PLAYER_STOP="stop",y.PLAYER_ENDED="ended",y.PLAYER_SEEK="seek",y.PLAYER_ERROR="playererror",y.ERROR="error",y.PLAYER_TIMEUPDATE="timeupdate",y.PLAYER_VOLUMEUPDATE="volumeupdate",y.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",y.PLAYBACK_PROGRESS="playback:progress",y.PLAYBACK_TIMEUPDATE="playback:timeupdate",y.PLAYBACK_READY="playback:ready",y.PLAYBACK_BUFFERING="playback:buffering",y.PLAYBACK_BUFFERFULL="playback:bufferfull",y.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",y.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",y.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",y.PLAYBACK_BITRATE="playback:bitrate",y.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",y.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",y.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",y.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",y.PLAYBACK_DVR="playback:dvr",y.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",y.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",y.PLAYBACK_ENDED="playback:ended",y.PLAYBACK_PLAY_INTENT="playback:play:intent",y.PLAYBACK_PLAY="playback:play",y.PLAYBACK_PAUSE="playback:pause",y.PLAYBACK_SEEK="playback:seek",y.PLAYBACK_SEEKED="playback:seeked",y.PLAYBACK_STOP="playback:stop",y.PLAYBACK_ERROR="playback:error",y.PLAYBACK_STATS_ADD="playback:stats:add",y.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",y.PLAYBACK_LEVEL_SWITCH="playback:level:switch",y.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",y.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",y.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",y.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",y.CORE_CONTAINERS_CREATED="core:containers:created",y.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",y.CORE_OPTIONS_CHANGE="core:options:change",y.CORE_READY="core:ready",y.CORE_FULLSCREEN="core:fullscreen",y.CORE_RESIZE="core:resize",y.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",y.CORE_MOUSE_MOVE="core:mousemove",y.CORE_MOUSE_LEAVE="core:mouseleave",y.CONTAINER_PLAYBACKSTATE="container:playbackstate",y.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",y.CONTAINER_BITRATE="container:bitrate",y.CONTAINER_STATS_REPORT="container:stats:report",y.CONTAINER_DESTROYED="container:destroyed",y.CONTAINER_READY="container:ready",y.CONTAINER_RESIZE="container:resize",y.CONTAINER_ERROR="container:error",y.CONTAINER_LOADEDMETADATA="container:loadedmetadata",y.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",y.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",y.CONTAINER_AUDIO_AVAILABLE="container:audio:available",y.CONTAINER_AUDIO_CHANGED="container:audio:changed",y.CONTAINER_TIMEUPDATE="container:timeupdate",y.CONTAINER_PROGRESS="container:progress",y.CONTAINER_PLAY="container:play",y.CONTAINER_STOP="container:stop",y.CONTAINER_PAUSE="container:pause",y.CONTAINER_ENDED="container:ended",y.CONTAINER_CLICK="container:click",y.CONTAINER_DBLCLICK="container:dblclick",y.CONTAINER_CONTEXTMENU="container:contextmenu",y.CONTAINER_MOUSE_ENTER="container:mouseenter",y.CONTAINER_MOUSE_LEAVE="container:mouseleave",y.CONTAINER_MOUSE_UP="container:mouseup",y.CONTAINER_MOUSE_DOWN="container:mousedown",y.CONTAINER_SEEK="container:seek",y.CONTAINER_SEEKED="container:seeked",y.CONTAINER_VOLUME="container:volume",y.CONTAINER_FULLSCREEN="container:fullscreen",y.CONTAINER_STATE_BUFFERING="container:state:buffering",y.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",y.CONTAINER_SETTINGSUPDATE="container:settingsupdate",y.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",y.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",y.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",y.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",y.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",y.CONTAINER_STATS_ADD="container:stats:add",y.CONTAINER_OPTIONS_CHANGE="container:options:change",y.MEDIACONTROL_RENDERED="mediacontrol:rendered",y.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",y.MEDIACONTROL_SHOW="mediacontrol:show",y.MEDIACONTROL_HIDE="mediacontrol:hide",y.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",y.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",y.MEDIACONTROL_PLAYING="mediacontrol:playing",y.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",y.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",y.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";function Ti(e){return null===e?"":(""+e).replace(Di,function(e){return Li[e]})}function E(a,e){var t,i=new RegExp([(ki.escape||Si).source,(ki.interpolate||Si).source,(ki.evaluate||Si).source].join("|")+"|$","g"),s=0,o="__p+='";a.replace(i,function(e,t,i,n,r){return o+=a.slice(s,r).replace(Ci,function(e){return"\\"+_i[e]}),t&&(o+="'+\n((__t=("+t+"))==null?'':escapeExpr(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),n&&(o+="';\n"+n+"\n__p+='"),s=r+e.length,e}),o+="';\n",o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(o=ki.variable?o:"with(obj||{}){\n"+o+"}\n")+"return __p;\n//# sourceURL=/microtemplates/source["+Ri+++"]";try{t=new Function(ki.variable||"obj","escapeExpr",o)}catch(a){throw a.source=o,a}return e?t(e,Ti):(n.source="function("+(ki.variable||"obj")+"){\n"+o+"}",n);function n(e){return t.call(this,e,Ti)}}bi=(i(Ii,y),n(Ii)),t(Ii,[{key:"options",get:function(){return this._options}}]);var bi,a=Ii,ki={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Si=/(.)^/,_i={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ci=/\\|'|\r|\n|\t|\u2028|\u2029/g,Li={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Di=new RegExp("[&<>\"']","g"),Ri=0;function Ii(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return o(this,Ii),(e=bi.call(this,t))._options=t,e.uniqueId=ii("o"),e}E.settings=ki;var Oi,wi,Pi,T={getStyleFor:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return g('<style class="clappr-style"></style>').html(E(e.toString())(t))}},xi=/^(\S+)\s*(.*)$/,di=(Pi=(i(Mi,a),n(Mi)),t(Mi,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=g.zepto.isZ(e)?e:g(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e=e||this.events,this.undelegateEvents(),e){var i=e[t];if(i=i&&i.constructor!==Function?this[e[t]]:i){var t=t.match(xi),n=t[1],t=t[2];n+=".delegateEvents"+this.cid,""===t?this.$el.on(n,i.bind(this)):this.$el.on(n,t,i.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=g.extend(!0,{},this.attributes),e=(this.id&&(e.id=this.id),this.className&&(e.class=this.className),g(oi.create(this.tagName)).attr(e));this.setElement(e,!1)}}}]),Mi),b=(wi=(i(Fi,a),n(Fi)),t(Fi,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(y.ERROR,e):m.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),Fi),k={createError:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},i=this.constructor&&this.constructor.type||"",n=this.name||i,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(n,":").concat(e&&e.code||"unknown"),i={description:"",level:b.Levels.FATAL,origin:n,scope:i,raw:{}},i=Object.assign({},i,e,{code:t.useCodePrefix?a:e.code});if(r&&i.level==b.Levels.FATAL&&!i.UI){t={title:r.t("default_error_title"),message:r.t("default_error_message")};i.UI=t}return this.playerError?this.playerError.createError(i):m.warn(n,"PlayerError is not defined. Error: ",i),i}},S=(Oi=(i(Ni,di),n(Ni)),t(Ni,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),Ni);function Ni(e){var t;return o(this,Ni),(t=Oi.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t.render(),t}function Fi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return o(this,Fi),(e=wi.call(this,e)).core=t,e}function Mi(e){return o(this,Mi),(e=Pi.call(this,e)).cid=ii("c"),e._ensureElement(),e.delegateEvents(),e}Object.assign(S.prototype,k),S.extend=function(e){return Xt(S,e)},S.type="core";Bi=(i(Gi,di),n(Gi)),t(Gi,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"bindEvents",value:function(){this.listenTo(this.playback,y.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,y.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,y.PLAYBACK_READY,this.ready),this.listenTo(this.playback,y.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,y.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,y.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,y.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,y.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,y.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,y.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,y.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,y.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,y.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,y.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,y.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,y.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,y.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,y.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,y.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,y.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,y.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,y.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,y.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,y.PLAYBACK_AUDIO_CHANGED,this.audioChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(y.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(y.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(y.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(y.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(y.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(y.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(y.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(y.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(y.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach(function(e){return e.destroy()}),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(y.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(y.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(y.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(y.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trigger.apply(this,[y.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(y.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(y.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(y.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(y.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout(function(){e.clickTimer&&e.trigger(y.CONTAINER_CLICK,e,e.name)},this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(y.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,function(){t.cancelClicked(),t.trigger(y.CONTAINER_DBLCLICK,t,t.name)})}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(y.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(y.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();0<=e&&e<=100&&this.seek(t*(e/100))}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(y.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(y.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(y.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(y.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(t){return this.plugins.filter(function(e){return e.name===t})[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.CONTAINER_MOUSE_DOWN)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(y.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(y.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(y.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(y.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval(function(){return e.checkResize()},500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},i=t.width;t.height===e.height&&i===e.width||(this.currentSize=e,this.trigger(y.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=g.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(y.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=T.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]);var Bi,Ui=Gi;function Gi(e,t,i){var n;return o(this,Gi),(n=Bi.call(this,e))._i18n=t,n.currentTime=0,n.volume=100,n.playback=e.playback,n.playerError=i,n.settings=g.extend(!0,{},n.playback.settings),n.isReady=!1,n.mediaControlDisabled=!1,n.plugins=[n.playback],n.dblTapHandler=new ui(500),n.clickTimer=null,n.clickDelay=200,n.actionsMetadata={},n.bindEvents(),n}Object.assign(Ui.prototype,k);Vi=(i(Ki,di),n(Ki)),t(Ki,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return 0<this.closedCaptionsTracks.length}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return Ki.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=g.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var i=this;this.canAutoPlay(function(e,t){e&&i.play()})}},{key:"canAutoPlay",value:function(e){e(!0,null)}}]);var Vi,_=Ki;function Ki(e,t,i){return o(this,Ki),(e=Vi.call(this,e)).settings={},e._i18n=t,e.playerError=i,e._consented=!1,e}Object.assign(_.prototype,k),_.extend=function(e){return Xt(_,e)},_.canPlay=function(e,t){return!1},_.VOD="vod",_.AOD="aod",_.LIVE="live",_.NO_OP="no_op",_.type="playback";Hi=(i(zi,a),n(zi)),t(zi,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var t=this;return g.Deferred(function(e){e.resolve(t.options.sources.map(function(e){return t.createContainer(e)}))})}},{key:"findPlaybackPlugin",value:function(t,i){return this.loader.playbackPlugins.filter(function(e){return e.canPlay(t,i)})[0]}},{key:"createContainer",value:function(e){var t=null,i=this.options.mimeType,e=("object"===G(e)?(t=e.source.toString(),e.mimeType&&(i=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t),U(U({},this.options),{},{src:t,mimeType:i})),t=this.findPlaybackPlugin(t,i),i=t?new t(e,this._i18n,this.playerError):new _,e=U(U({},e),{},{playback:i}),n=new Ui(e,this._i18n,this.playerError),r=g.Deferred();return r.promise(n),this.addContainerPlugins(n),this.listenToOnce(n,y.CONTAINER_READY,function(){return r.resolve(n)}),n}},{key:"addContainerPlugins",value:function(t){this.loader.containerPlugins.forEach(function(e){t.addPlugin(new e(t))})}}]);var ji,Hi,Yi=zi,Wi=(ji=(i($i,di),n($i)),t($i,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new S(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(y.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.find("video")[0]:this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;oi.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=g.Deferred(),this.defer.promise(this),this.containerFactory=new Yi(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var t=this;this.containerFactory.createContainers().then(function(e){return t.setupContainers(e)}).then(function(e){return t.resolveOnContainersReady(e)})}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){v.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:g(window).width(),height:g(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:g(window).width(),height:g(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){ni(e.height)||ni(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval(function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})},500)}},{key:"triggerResize",value:function(e){!this.firstResize&&this.oldHeight===e.height&&this.oldWidth===e.width||(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(y.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;g.when.apply(g,e).done(function(){t.defer.resolve(t),t.ready=!0,t.trigger(y.CORE_READY)})}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(t){return this.plugins.filter(function(e){return e.name===t})[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach(function(e){return e.destroy()}),this.containerFactory.options=g.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach(function(e){return e.destroy()}),this.plugins.forEach(function(e){return e.destroy()}),this.$el.remove(),g(document).unbind("fullscreenchange",this._boundFullscreenHandler),g(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),g(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(y.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(y.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(t){this.stopListening(t),this.containers=this.containers.filter(function(e){return e!==t})}},{key:"setupContainer",value:function(e){this.listenTo(e,y.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(y.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var t=this;this.containers.forEach(function(e){return t.el.appendChild(e.render().el)})}},{key:"createContainer",value:function(e,t){e=this.containerFactory.createContainer(e,t);return this.setupContainer(e),this.el.appendChild(e.render().el),e}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=Zt.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var t=this;if(this.isFullscreen()){var e=v.isiOS?this.activePlaybackEl:document;Zt.cancelFullscreen(e),v.isiOS||this.$el.removeClass("fullscreen nocursor")}else{e=v.isiOS?this.activePlaybackEl:this.el;e&&(v.isSafari||v.isiOS?Zt.requestFullscreen(e):Zt.requestFullscreen(e).then(function(e){return e},function(e){return setTimeout(function(){if(!t.isFullscreen())throw new ReferenceError(e)},600)}),v.isiOS||this.$el.addClass("fullscreen"))}}},{key:"onMouseMove",value:function(e){this.trigger(y.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(y.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this,i=(this._options=g.extend(!0,this._options,e),this.configureDomRecycler(),e.source||e.sources);i&&this.load(i,e.mimeType||this.options.mimeType),this.trigger(y.CORE_OPTIONS_CHANGE,e),this.containers.forEach(function(e){return e.configure(t.options)})}},{key:"appendToParent",value:function(){var e=T.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl}),t=T.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),this.$el.parent()&&this.$el.parent().length||this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),$i);function $i(e){var t;return o(this,$i),(t=ji.call(this,e)).playerError=new b(e,H(t)),t.configureDomRecycler(),t.firstResize=!0,t.plugins=[],t.containers=[],t._boundFullscreenHandler=function(){return t.handleFullscreenChange()},g(document).bind("fullscreenchange",t._boundFullscreenHandler),g(document).bind("MSFullscreenChange",t._boundFullscreenHandler),g(document).bind("mozfullscreenchange",t._boundFullscreenHandler),v.isMobile&&g(window).bind("resize",function(e){t.handleWindowResize(e)}),t}function zi(e,t,i,n){return o(this,zi),(e=Hi.call(this,e))._i18n=i,e.loader=t,e.playerError=n,e}Object.assign(Wi.prototype,k);function qi(e,t){return e&&t?Object.entries(e).filter(function(e){return W(e,2)[1].type===t}).reduce(function(e,t){var t=W(t,2),i=t[0],t=t[1];return e[i]=t,e},{}):{}}Zi=(i(ln,a),n(ln)),t(ln,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new Wi(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var t=this;return this.loader.corePlugins.forEach(function(e){e=new e(t.core);t.core.addPlugin(e),t.setupExternalInterface(e)}),this.core}},{key:"setupExternalInterface",value:function(e){var t,i=e.getExternalInterface();for(t in i)this.player[t]=i[t].bind(e)}}]);var C,Xi,Zi,Qi=ln,Ji=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,en=(t(on,[{key:"compare",value:function(e){var t=this.major-e.major;return(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return 0<=this.compare(e)&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var e=W((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").match(Ji)||[],4),t=e[1],i=e[2],e=e[3];return void 0===t?null:new on(t,i,e)}}]),on),tn=(C={plugins:{},playbacks:[]},t(sn,[{key:"groupPluginsByType",value:function(e){return e=Array.isArray(e)?e.reduce(function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e},{}):e}},{key:"removeDups",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.reduceRight(function(e,t){return e[t.prototype.name]&&i||(e[t.prototype.name]&&delete e[t.prototype.name],e[t.prototype.name]=t),e},Object.create(null)),r=[];for(t in n)r.unshift(n[t]);return r}},{key:"addExternalPlugins",value:function(e){var t="boolean"!=typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,i="boolean"!=typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if((e=this.groupPluginsByType(e)).playback){var n=e.playback.filter(function(e){return sn.checkVersionSupport(e),!0});this.playbackPlugins=i?this.removeDups(n.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(n),!0)}if(e.container){i=e.container.filter(function(e){return sn.checkVersionSupport(e),!0});this.containerPlugins=t?this.removeDups(i.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(i),!0)}if(e.core){n=e.core.filter(function(e){return sn.checkVersionSupport(e),!0});this.corePlugins=t?this.removeDups(n.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(n),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach(function(i){(e[i]||[]).forEach(function(e){var t="external "+e.type+" plugin on "+i+" array";if(e.type!==i)throw new ReferenceError(t)})})}}],[{key:"registeredPlaybacks",get:function(){return $(C.playbacks)}},{key:"registeredPlugins",get:function(){var e=C.plugins;return{core:qi(e,"core"),container:qi(e,"container")}}},{key:"checkVersionSupport",value:function(e){var e=e.prototype,t=e.supportedVersion,e=e.name;if(!t||!t.min)return m.warn("Loader","missing version information for ".concat(e)),!1;var i=t.max?en.parse(t.max):en.parse(t.min).inc("minor"),t=en.parse(t.min);return!!en.parse("0.4.27").satisfies(t,i)||(m.warn("Loader","unsupported plugin ".concat(e,": Clappr version ").concat("0.4.27"," does not match required range [").concat(t,",").concat(i,")")),!1)}},{key:"registerPlugin",value:function(e){if(!e||!e.prototype.name)return m.warn("Loader","missing information to register plugin: ".concat(e)),!1;sn.checkVersionSupport(e);var t=C.plugins;if(!t)return!1;var i=t[e.prototype.name];return i&&m.warn("Loader","overriding plugin entry: ".concat(e.prototype.name," - ").concat(i)),t[e.prototype.name]=e,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;sn.checkVersionSupport(t);var e=C.playbacks,i=e.findIndex(function(e){return e.prototype.name===t.prototype.name});if(0<=i){var n=e[i];e.splice(i,1),m.warn("Loader","overriding playback entry: ".concat(n.name," - ").concat(n))}return C.playbacks=[t].concat($(e)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=C.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(t){if(!t)return!1;var e=C.playbacks,i=e.findIndex(function(e){return e.prototype.name===t});return!(i<0||(e.splice(i,1),C.playbacks=e,0))}},{key:"clearPlugins",value:function(){C.plugins={}}},{key:"clearPlaybacks",value:function(){C.playbacks=[]}}]),sn),nn=ri().replace(/\/[^/]+$/,""),rn=(Xi=(i(an,a),n(an)),t(an,[{key:"loader",get:function(){return this._loader||(this._loader=new tn(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:y.PLAYER_READY,onResize:y.PLAYER_RESIZE,onPlay:y.PLAYER_PLAY,onPause:y.PLAYER_PAUSE,onStop:y.PLAYER_STOP,onEnded:y.PLAYER_ENDED,onSeek:y.PLAYER_SEEK,onError:y.PLAYER_ERROR,onTimeUpdate:y.PLAYER_TIMEUPDATE,onVolumeUpdate:y.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:y.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(e){var t=e.parentId,e=e.parent;return t?document.querySelector(t):e}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,y.CORE_READY,this._onReady),this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,y.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,y.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,y.CONTAINER_PLAY,this._onPlay),this.listenTo(e,y.CONTAINER_PAUSE,this._onPause),this.listenTo(e,y.CONTAINER_STOP,this._onStop),this.listenTo(e,y.CONTAINER_ENDED,this._onEnded),this.listenTo(e,y.CONTAINER_SEEK,this._onSeek),this.listenTo(e,y.CONTAINER_ERROR,this._onError),this.listenTo(e,y.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,y.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,y.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return 0<Object.keys(n).length&&Object.keys(r).forEach(function(e){var t=i.eventsMapping[e];t&&i.off(t,r[e])}),Object.keys(n).forEach(function(e){var t=i.eventsMapping[e];if(t){e=n[e];(e="function"==typeof e&&e)&&i.on(t,e)}}),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(y.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(y.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(y.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(y.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(y.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(e){this.trigger(y.PLAYER_PLAY,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"_onPause",value:function(e){this.trigger(y.PLAYER_PAUSE,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"_onStop",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.trigger(y.PLAYER_STOP,this.getCurrentTime(),e)}},{key:"_onEnded",value:function(){this.trigger(y.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(y.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(y.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(y.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){e=e.sources||(void 0!==e.source?[e.source]:[]);return 0===e.length?[{source:"",mimeType:""}]:e}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,i){return void 0!==i&&this.configure({autoPlay:!!i}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(t){return this.core.plugins.concat(this.core.activeContainer.plugins).filter(function(e){return e.name===t})[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),an);function an(e){o(this,an),t=Xi.call(this,e);var t,i={playerId:ii(""),persistConfig:!0,width:640,height:360,baseUrl:nn,allowUserInteraction:v.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}},i=(t._options=g.extend(!0,i,e),t.options.sources=t._normalizeSources(e),t.options.chromeless||(t.options.allowUserInteraction=!0),t.options.allowUserInteraction||(t.options.disableKeyboardShortcuts=!0),t._registerOptionEventListeners(t.options.events),t._coreFactory=new Qi(H(t)),t._getParentElement(t.options));return i&&t.attachTo(i),t}function sn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=(o(this,sn),this.playerId=t,this.playbackPlugins=$(C.playbacks),sn.registeredPlugins),i=t.core,t=t.container;this.containerPlugins=Object.values(t),this.corePlugins=Object.values(i),Array.isArray(e)||this.validateExternalPluginsType(e),this.addExternalPlugins(e)}function on(e,t,i){o(this,on),this.major=parseInt(e||0,10),this.minor=parseInt(t||0,10),this.patch=parseInt(i||0,10)}function ln(e){var t;return o(this,ln),(t=Zi.call(this,e.options)).player=e,t}Object.assign(rn.prototype,k);un=(i(dn,a),n(dn)),t(dn,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]);var un,cn=dn;function dn(e){var t;return o(this,dn),(t=un.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}Object.assign(cn.prototype,k),cn.extend=function(e){return Xt(cn,e)},cn.type="container";hn=(i(pn,a),n(pn)),t(pn,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]);var hn,fn=pn;function pn(e){var t;return o(this,pn),(t=hn.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t}Object.assign(fn.prototype,k),fn.extend=function(e){return Xt(fn,e)},fn.type="core";gn=(i(mn,di),n(mn)),t(mn,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]);var gn,vn=mn;function mn(e){var t;return o(this,mn),(t=gn.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}Object.assign(vn.prototype,k),vn.extend=function(e){return Xt(vn,e)},vn.type="container";var yn,An={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]},En=(An.ogv=An.ogg,An["3gp"]=An["3gpp"],{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]}),Tn=Object.keys(En).reduce(function(e,t){return[].concat($(e),$(En[t]))},[]),bn={code:"unknown",message:"unknown"},L=(yn=(i(D,_),n(D)),t(D,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,e=D._mimeTypesForUrl(e,En,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||0<=Tn.indexOf(e[0])}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===_.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"configure",value:function(e){Y(K(D.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var i=this;this.canAutoPlay(function(e,t){t&&m.warn(i.name,"autoplay error.",{result:e,error:t}),e&&setTimeout(function(){return!i._destroyed&&i.play()},0)})}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};v.isMobile&&oi.options.recycleVideo&&(t.element=this.el),si(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map(function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}})}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(y.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();e=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==_.LIVE&&e&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===_.VOD||this.getPlaybackType()===_.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(y.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?_.AOD:_.VOD;return 0<=[0,void 0,1/0].indexOf(this.el.duration)?_.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(t){var i=this;if(this.isPlaying()||this.el._consented)Y(K(D.prototype),"consent",this).call(this,t);else{var e=function e(){i.el.removeEventListener("loadedmetadata",e,!1),i.el.removeEventListener("error",e,!1),i.el._consented=!0,Y(K(D.prototype),"consent",i).call(i,t)};this.el.addEventListener("loadedmetadata",e,!1),this.el.addEventListener("error",e,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(y.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch(function(){})}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(y.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(y.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(y.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,e=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==e&&((this._isBuffering=e)?this.trigger(y.PLAYBACK_BUFFERING,this.name):this.trigger(y.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||bn,t=e.code,e=e.message,i=t===bn.code,t=this.createError({code:t,description:e,raw:this.el.error,level:i?b.Levels.WARN:b.Levels.FATAL});i?m.warn(this.name,"HTML5 unknown error: ",t):this.trigger(y.PLAYBACK_ERROR,t)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),Y(K(D.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,oi.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(y.PLAYBACK_DVR,e),this.trigger(y.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(m.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){e=this.el.duration*(e/100);this.seek(e)}},{key:"_checkInitialSeek",value:function(){var e=ti();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(0<this.el.seekable.length)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout(function(){e._updateSettings(),e._updateSettingsCheckInFlight=null},1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(y.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,i=0;i<this.el.buffered.length;i++)e=[].concat($(e),[{start:this.el.buffered.start(i),end:this.el.buffered.end(i)}]),this.el.currentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);var n={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(y.PLAYBACK_PROGRESS,n,e)}}},{key:"_typeFor",value:function(e){var t=D._mimeTypesForUrl(e,An,this.options.mimeType);return((t=0===t.length?D._mimeTypesForUrl(e,En,this.options.mimeType):t)[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(y.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(y.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find(function(e){return"showing"===e.track.mode})||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(y.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===D.prototype.name}},{key:"closedCaptionsTracks",get:function(){var t=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter(function(e){return"subtitles"===e.kind||"captions"===e.kind}).map(function(e){return{id:t++,name:e.label,track:e}})}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(t){if(ni(t)){var e,i=this.closedCaptionsTracks;if(-1!==t){if(!(e=i.find(function(e){return e.id===t})))return;if("showing"===e.track.mode)return}i.filter(function(e){return"hidden"!==e.track.mode}).forEach(function(e){return e.track.mode="hidden"}),e&&(e.track.mode="showing"),this._ccTrackId=t,this.trigger(y.PLAYBACK_SUBTITLE_CHANGED,{id:t})}}},{key:"template",get:function(){return E('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",function(){return!1}),this._externalTracks&&0<this._externalTracks.length&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=T.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}]),D);function D(){var e;o(this,D);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=yn.call.apply(yn,[this].concat(i)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var r,a=e.options.playback,s=a.preload||(v.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?r=e.options.poster:"string"==typeof e.options.poster.url&&(r=e.options.poster.url)),g.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:r,preload:s||"metadata",crossOrigin:a.crossOrigin,"x-webkit-playsinline":a.playInline}),(a.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),a.playInline&&e.$el.attr({playsinline:"playsinline"}),a.crossOrigin&&e.$el.attr({crossorigin:a.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],a.externalTracks&&e._setupExternalTracks(a.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}L._mimeTypesForUrl=function(e,t,i){e=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=i||e&&t[e.toLowerCase()]||[];return i.constructor===Array?i:[i]},L._canPlay=function(e,t,i,n){var i=L._mimeTypesForUrl(i,t,n),r=document.createElement(e);return!!i.filter(function(e){return!!r.canPlayType(e).replace(/no/,"")})[0]},L.canPlay=function(e,t){return L._canPlay("audio",En,e,t)||L._canPlay("video",An,e,t)};kn=(i(Sn,L),n(Sn)),t(Sn,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(y.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return _.AOD}}]);var kn,k=Sn;function Sn(){return o(this,Sn),kn.apply(this,arguments)}k.canPlay=function(e,t){return L._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};_n=(i(Ln,_),n(Ln)),t(Ln,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return _.NO_OP}},{key:"render",value:function(){var e=T.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(y.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(y.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){e="error"===e.type?"load error":"loading aborted";this.trigger(y.PLAYBACK_ERROR,{message:e},this.name)}}]);var _n,Cn=Ln;function Ln(e){var t;return o(this,Ln),(t=_n.call(this,e)).el.src=e.src,t}Cn.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};Dn=(i(In,_),n(In)),t(In,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=T.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl}),t=(this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(y.PLAYBACK_READY,this.name),!(!this.options.poster||!this.options.poster.showForNoOp));return!this.options.autoPlay&&t||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{t=new Uint32Array(e.data.buffer)}catch(r){for(var t=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4),i=e.data,n=0;n<i.length;n++)t[n]=i[n]}for(var r=t.length,a=6*Math.random()+4,s=0,o=0,l=0;l<r;){s<0&&(s=a*Math.random(),o=255*Math.pow(Math.random(),.4)<<24);--s,t[l++]=o}this.context.putImageData(e,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=$t(function(){return e._loop()}))}},{key:"destroy",value:function(){this._animationHandle&&(zt(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]);var Dn,Rn=In;function In(){var e;o(this,In);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=Dn.call.apply(Dn,[this].concat(i)))._noiseFrameNum=-1,e}Rn.canPlay=function(e){return!0};wn=(i(Nn,fn),n(Nn)),t(Nn,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"t",value:function(e){var t=this._language(),i=this._messages.en;return(t&&this._messages[t]||i)[e]||i[e]||e}},{key:"_language",value:function(){return this.core.options.language||ai()}},{key:"_initializeMessages",value:function(){this._messages=g.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zur\xfcck zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterst\xfctzt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador n\xe3o supporta a reprodu\xe7\xe3o deste video. Por favor, tente usar um navegador diferente.",default_error_title:"N\xe3o foi poss\xedvel reproduzir o v\xeddeo.",default_error_message:"Ocorreu um problema ao tentar carregar o v\xeddeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducci\xf3n de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este v\xeddeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el v\xeddeo.",default_error_message:"Se ha producido un problema al cargar el v\xeddeo."},ru:{live:"\u043f\u0440\u044f\u043c\u043e\u0439 \u044d\u0444\u0438\u0440",back_to_live:"\u043a \u043f\u0440\u044f\u043c\u043e\u043c\u0443 \u044d\u0444\u0438\u0440\u0443",disabled:"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e",playback_not_supported:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u044d\u0442\u043e\u0433\u043e \u0432\u0438\u0434\u0435\u043e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440."},bg:{live:"\u043d\u0430 \u0436\u0438\u0432\u043e",back_to_live:"\u0412\u044a\u0440\u043d\u0438 \u043d\u0430 \u0436\u0438\u0432\u043e",disabled:"\u0418\u0437\u043a\u043b\u044e\u0447\u0435\u043d\u043e",playback_not_supported:"\u0412\u0430\u0448\u0438\u044f\u0442 \u0431\u0440\u0430\u0443\u0437\u044a\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u044a\u0440\u0436\u0430 \u0432\u044a\u0437\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0436\u0434\u0430\u043d\u0435\u0442\u043e \u043d\u0430 \u0442\u043e\u0432\u0430 \u0432\u0438\u0434\u0435\u043e. \u041c\u043e\u043b\u044f, \u043f\u0440\u043e\u0431\u0432\u0430\u0439\u0442\u0435 \u0441 \u0434\u0440\u0443\u0433 \u0431\u0440\u0430\u0443\u0437\u044a\u0440.",default_error_title:"\u0412\u0438\u0434\u0435\u043e\u0442\u043e \u043d\u0435 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0441\u0435 \u0432\u044a\u0437\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435.",default_error_message:"\u0412\u044a\u0437\u043d\u0438\u043a\u043d\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435\u0442\u043e \u043d\u0430 \u0432\u0438\u0434\u0435\u043e\u0442\u043e."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"D\xe9sactiv\xe9",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vid\xe9o. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vid\xe9o.",default_error_message:"Un probl\xe8me est survenu lors du chargement de la vid\xe9o."},tr:{live:"canl\u0131",back_to_live:"canl\u0131 yay\u0131na d\xf6n",disabled:"Engelli",playback_not_supported:"Taray\u0131c\u0131n\u0131z bu videoyu oynatma deste\u011fine sahip de\u011fil. L\xfctfen farkl\u0131 bir taray\u0131c\u0131 ile deneyin."},et:{live:"Otse\xfclekanne",back_to_live:"Tagasi otse\xfclekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"\u0645\u0628\u0627\u0634\u0631",back_to_live:"\u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 \u0627\u0644\u0645\u0628\u0627\u0634\u0631",disabled:"\u0645\u0639\u0637\u0651\u0644",playback_not_supported:"\u0627\u0644\u0645\u062a\u0635\u0641\u062d \u0627\u0644\u0630\u064a \u062a\u0633\u062a\u062e\u062f\u0645\u0647 \u0644\u0627 \u064a\u062f\u0639\u0645 \u062a\u0634\u063a\u064a\u0644 \u0647\u0630\u0627 \u0627\u0644\u0641\u064a\u062f\u064a\u0648. \u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0633\u062a\u062e\u062f\u0627\u0645 \u0645\u062a\u0635\u0641\u062d \u0622\u062e\u0631.",default_error_title:"\u063a\u064a\u0631 \u0642\u0627\u062f\u0631 \u0627\u0644\u0649 \u0627\u0644\u062a\u0634\u063a\u064a\u0644.",default_error_message:"\u062d\u062f\u062b\u062a \u0645\u0634\u0643\u0644\u0629 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0641\u064a\u062f\u064a\u0648."},zh:{live:"\u76f4\u64ad",back_to_live:"\u8fd4\u56de\u76f4\u64ad",disabled:"\u5df2\u7981\u7528",playback_not_supported:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u89c6\u9891\u7684\u64ad\u653e\u3002\u8bf7\u5c1d\u8bd5\u4f7f\u7528\u53e6\u4e00\u4e2a\u6d4f\u89c8\u5668\u3002",default_error_title:"\u65e0\u6cd5\u64ad\u653e\u89c6\u9891\u3002",default_error_message:"\u5728\u5c1d\u8bd5\u52a0\u8f7d\u89c6\u9891\u65f6\u51fa\u73b0\u4e86\u95ee\u9898\u3002"}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}]);var On,wn,Pn=Nn,R=(On=(i(xn,fn),n(xn)),t(xn,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,y.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var t=this.core.containers.filter(function(e){return"no_op"!==e.playback.name})[0]||this.core.containers[0];t&&this.core.containers.forEach(function(e){e!==t&&e.destroy()})}}]),xn);function xn(){return o(this,xn),On.apply(this,arguments)}function Nn(e){return o(this,Nn),(e=wn.call(this,e))._initializeMessages(),e}tn.registerPlugin(Pn),tn.registerPlugin(R),tn.registerPlayback(Rn),tn.registerPlayback(Cn),tn.registerPlayback(k),tn.registerPlayback(L);Pn={Player:rn,Events:y,Browser:v,ContainerPlugin:cn,UIContainerPlugin:vn,CorePlugin:fn,UICorePlugin:S,Playback:_,Container:Ui,Core:Wi,PlayerError:b,Loader:tn,BaseObject:a,UIObject:di,Utils:e,HTML5Audio:k,HTML5Video:L,HTMLImg:Cn,Log:m,Styler:T,version:"0.4.27",template:E,$:g};function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fn(e,t){for(var i,n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r.key))?i:String(i),r)}}function O(e,t,i){t&&Fn(e.prototype,t),i&&Fn(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bn(e,t)}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Un(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Mn(i);return Un(this,n?(e=Mn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Gn(){return(Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mn(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function x(e){this.element=e||window.document,this.initialize()}$n=(w(rr,cn),P(rr)),O(rr,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,y.CONTAINER_CLICK,this.click),this.listenTo(this.container,y.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var e=this.config.onClickPayload;this.container.getPlaybackType()===_.LIVE&&!this.container.isDvrEnabled()||(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==_.LIVE||this.container.isDvrEnabled();e!==this.pointerEnabled&&(this.container.$el[e?"addClass":"removeClass"]("pointer-enabled"),this.pointerEnabled=e)}}]);var Vn,Kn,jn,Hn,Yn,Wn,$n,zn,R=rr,Rn=(Wn=(w(nr,S),P(nr)),O(nr,[{key:"name",get:function(){return"closed_captions"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E('<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n <% if (title) { %>\n  <li data-title><%= title %></li>\n <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n <% }; %>\n</ul>\n')}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,y.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,y.MEDIACONTROL_HIDE,this.hideContextMenu),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,y.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,y.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,y.CONTAINER_STOP,this.onContainerStop))}},{key:"onContainerStop",value:function(){this.ccAvailable(!1)}},{key:"containerChanged",value:function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()}},{key:"onSubtitleAvailable",value:function(){this.renderCcButton(),this.ccAvailable(!0)}},{key:"onSubtitleChanged",value:function(e){this.setCurrentContextMenuElement(e.id)}},{key:"onTrackSelect",value:function(e){var t=parseInt(e.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=t,this.hideContextMenu(),e.stopPropagation(),!1}},{key:"ccAvailable",value:function(e){this.$el[e?"addClass":"removeClass"]("available")}},{key:"toggleContextMenu",value:function(){this.$el.find("ul").toggle()}},{key:"hideContextMenu",value:function(){this.$el.find("ul").hide()}},{key:"contextMenuElement",value:function(e){return this.$el.find("ul a"+(isNaN(e)?"":'[data-cc-select="'+e+'"]')).parent()}},{key:"setCurrentContextMenuElement",value:function(e){if(this._trackId!==e){this.contextMenuElement().removeClass("current"),this.contextMenuElement(e).addClass("current");this.$ccButton[-1<e?"addClass":"removeClass"]("enabled"),this._trackId=e}}},{key:"renderCcButton",value:function(){for(var e=this.container?this.container.closedCaptionsTracks:[],t=0;t<e.length;t++)e[t].label=this._labelCb(e[t]);var i=T.getStyleFor(".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n",{baseUrl:this.options.baseUrl});this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:e})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve">\n<path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1\n\tc1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9\n\tC10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"/>\n</svg>'),this.$el.append(i[0])}},{key:"render",value:function(){this.renderCcButton();var e=this.core.mediaControl.$el.find("button[data-fullscreen]");return e[0]?this.$el.insertAfter(e):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this}}]),nr),rn=(Yn=(w(ir,S),P(ir)),O(ir,[{key:"template",get:function(){return E('<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n')}},{key:"name",get:function(){return"dvr_controls"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}},{key:"bindEvents",value:function(){this.bindCoreEvents(),this.bindContainerEvents()}},{key:"bindCoreEvents",value:function(){var e=this;this.core.mediaControl.settings?(this.listenTo(this.core.mediaControl,y.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,y.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,y.CORE_OPTIONS_CHANGE,this.render)):setTimeout(function(){return e.bindCoreEvents()},100)}},{key:"bindContainerEvents",value:function(){this.core.activeContainer&&(this.listenToOnce(this.core.activeContainer,y.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.activeContainer,y.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"dvrChanged",value:function(e){this.core.getPlaybackType()===_.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),e?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))}},{key:"click",value:function(){var e=this.core.mediaControl,t=e.container;t.isPlaying()||t.play(),e.$el.hasClass("dvr")&&t.seek(t.getDuration())}},{key:"settingsUpdate",value:function(){var e=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click(function(){return e.click()})),this.bindEvents()}},{key:"shouldRender",value:function(){return(void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls)&&this.core.getPlaybackType()===_.LIVE}},{key:"render",value:function(){var e=T.getStyleFor('.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n',{baseUrl:this.options.baseUrl});return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.$el.append(e[0]),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this}}]),ir),a=(Hn=(w(tr,fn),P(tr)),O(tr,[{key:"name",get:function(){return"end_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var e=this.core.activeContainer;e&&(this.listenTo(e,y.CONTAINER_ENDED,this.ended),this.listenTo(e,y.CONTAINER_STOP,this.ended))}},{key:"containerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"ended",value:function(){(void 0===this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd)&&this.core.isFullscreen()&&this.core.toggleFullscreen()}}]),tr),di=(jn=(w(er,S),P(er)),O(er,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E('<div class="player-error-screen__content" data-error-screen>\n <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,y.ERROR,this.onError),this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindReload",value:function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))}},{key:"reload",value:function(){var e=this;this.listenToOnce(this.core,y.CORE_READY,function(){return e.container.play()}),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()}},{key:"unbindReload",value:function(){this.reloadButton&&this.reloadButton.off("click")}},{key:"onContainerChanged",value:function(){this.err=null,this.unbindReload(),this.hide()}},{key:"onError",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.level===b.Levels.FATAL&&(this.err=e,this.container.disableMediaControl(),this.container.stop(),this.show())}},{key:"show",value:function(){this.render(),this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){var e;if(this.err)return e=T.getStyleFor("[data-player] .player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  [data-player] .player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  [data-player] .player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  [data-player] .player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  [data-player] .player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  [data-player] .player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0 !important; }\n",{baseUrl:this.options.baseUrl}),this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:'<svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'})),this.$el.append(e[0]),this.core.$el.append(this.el),this.bindReload(),this}}]),er),qn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"/>\n</svg>',Xn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"/>\n</svg>',Zn=g('link[rel="shortcut icon"]'),k=(Kn=(w(Jn,fn),P(Jn)),O(Jn,[{key:"name",get:function(){return"favicon"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"oldIcon",get:function(){return Zn}},{key:"configure",value:function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,y.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,y.CORE_OPTIONS_CHANGE,this.configure))}},{key:"bindEvents",value:function(){this.listenTo(this.core,y.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}},{key:"containerChanged",value:function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,y.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,y.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,y.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,y.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,y.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}},{key:"disable",value:function(){Gn(Mn(Jn.prototype),"disable",this).call(this),this.resetIcon()}},{key:"destroy",value:function(){Gn(Mn(Jn.prototype),"destroy",this).call(this),this.resetIcon()}},{key:"createIcon",value:function(e){var t=g("<canvas/>"),i=(t[0].width=16,t[0].height=16,t[0].getContext("2d")),e=(i.fillStyle="#000",g(e).find("path").attr("d")),e=new Path2D(e),i=(i.fill(e),g('<link rel="shortcut icon" type="image/png"/>'));return i.attr("href",t[0].toDataURL("image/png")),i}},{key:"setPlayIcon",value:function(){this.playIcon||(this.playIcon=this.createIcon(qn)),this.changeIcon(this.playIcon)}},{key:"setPauseIcon",value:function(){this.pauseIcon||(this.pauseIcon=this.createIcon(Xn)),this.changeIcon(this.pauseIcon)}},{key:"resetIcon",value:function(){g('link[rel="shortcut icon"]').remove(),g("head").append(this.oldIcon)}},{key:"changeIcon",value:function(e){e&&(g('link[rel="shortcut icon"]').remove(),g("head").append(e))}}]),Jn),Cn=(Vn=(w(Qn,cn),P(Qn)),O(Qn,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"embedScript",value:function(){var e=this;if(window._gat)this.addEventListeners();else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","//www.google-analytics.com/ga.js"),t.onload=function(){return e.addEventListeners()},document.body.appendChild(t)}}},{key:"addEventListeners",value:function(){var t=this;this.container&&(this.listenTo(this.container,y.CONTAINER_READY,this.onReady),this.listenTo(this.container,y.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,y.CONTAINER_STOP,this.onStop),this.listenTo(this.container,y.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,y.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,y.CONTAINER_ERROR,this.onError),this.listenTo(this.container,y.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,y.CONTAINER_VOLUME,function(e){return t.onVolumeChanged(e)}),this.listenTo(this.container,y.CONTAINER_SEEK,function(e){return t.onSeek(e)}),this.listenTo(this.container,y.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,y.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,y.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])}},{key:"onReady",value:function(){this.push(["Video","Playback",this.container.playback.name])}},{key:"onPlay",value:function(){this.push(["Video","Play",this.container.playback.src])}},{key:"onStop",value:function(){this.push(["Video","Stop",this.container.playback.src])}},{key:"onEnded",value:function(){this.push(["Video","Ended",this.container.playback.src])}},{key:"onBuffering",value:function(){this.push(["Video","Buffering",this.container.playback.src])}},{key:"onBufferFull",value:function(){this.push(["Video","Bufferfull",this.container.playback.src])}},{key:"onError",value:function(){this.push(["Video","Error",this.container.playback.src])}},{key:"onHD",value:function(e){e=e?"ON":"OFF";e!==this.currentHDState&&(this.currentHDState=e,this.push(["Video","HD - "+e,this.container.playback.src]))}},{key:"onPlaybackChanged",value:function(e){null!==e.type&&this.push(["Video","Playback Type - "+e.type,this.container.playback.src])}},{key:"onDVR",value:function(e){this.push(["Interaction","DVR - "+(e?"ON":"OFF"),this.container.playback.src])}},{key:"onPause",value:function(){this.push(["Video","Pause",this.container.playback.src])}},{key:"onSeek",value:function(){this.push(["Video","Seek",this.container.playback.src])}},{key:"onVolumeChanged",value:function(){this.push(["Interaction","Volume",this.container.playback.src])}},{key:"onFullscreen",value:function(){this.push(["Interaction","Fullscreen",this.container.playback.src])}},{key:"push",value:function(e){e=[this.trackerName+"_trackEvent"].concat(e);_gaq.push(e)}}]),Qn);function Qn(e){return I(this,Qn),(e=Vn.call(this,e)).container.options.gaAccount&&(e.account=e.container.options.gaAccount,e.trackerName=e.container.options.gaTrackerName?e.container.options.gaTrackerName+".":"Clappr.",e.domainName=e.container.options.gaDomainName,e.currentHDState=void 0,e.embedScript()),e}function Jn(e){return I(this,Jn),(e=Kn.call(this,e))._container=null,e.configure(),e}function er(e){return I(this,er),(e=jn.call(this,e)).options.disableErrorScreen?Un(e,e.disable()):e}function tr(){return I(this,tr),Hn.apply(this,arguments)}function ir(e){return I(this,ir),(e=Yn.call(this,e)).settingsUpdate(),e}function nr(e){I(this,nr),t=Wn.call(this,e);var t,e=e.options.closedCaptionsConfig;return t._title=e&&e.title?e.title:null,t._ariaLabel=e&&e.ariaLabel?e.ariaLabel:"cc-button",t._labelCb=e&&e.labelCallback&&"function"==typeof e.labelCallback?e.labelCallback:function(e){return e.name},t}function rr(e){return I(this,rr),$n.call(this,e)}x.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},x.KEY_CODES_BY_NAME={};for(zn in x.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(x.KEY_NAMES_BY_CODE,zn)&&(x.KEY_CODES_BY_NAME[x.KEY_NAMES_BY_CODE[zn]]=+zn);x.MODIFIERS=["shift","ctrl","alt"],x.registerEvent=document.addEventListener?function(e,t,i){e.addEventListener(t,i,!1)}:document.attachEvent?function(e,t,i){e.attachEvent("on"+t,i)}:void 0,x.unregisterEvent=document.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1)}:document.detachEvent?function(e,t,i){e.detachEvent("on"+t,i)}:void 0,x.stringContains=function(e,t){return-1!==e.indexOf(t)},x.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},x.capitalize=function(e){return e.toLowerCase().replace(/^./,function(e){return e.toUpperCase()})},x.isString=function(e){return x.stringContains(Object.prototype.toString.call(e),"String")},x.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},x.extractModifiers=function(e){for(var t=[],i=0;i<x.MODIFIERS.length;i++)x.stringContains(e,x.MODIFIERS[i])&&t.push(x.MODIFIERS[i]);return t},x.extractKey=function(e){for(var t=x.neatString(e).split(" "),i=0;i<t.length;i++)if(!x.arrayIncludes(x.MODIFIERS,t[i]))return t[i]},x.modifiersAndKey=function(e){var t;return x.stringContains(e,"any")?x.neatString(e).split(" ").slice(0,2).join(" "):(t=x.extractModifiers(e),(e=x.extractKey(e))&&!x.arrayIncludes(x.MODIFIERS,e)&&t.push(e),t.join(" "))},x.keyName=function(e){return x.KEY_NAMES_BY_CODE[e+""]},x.keyCode=function(e){return+x.KEY_CODES_BY_NAME[e]},x.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<x.MODIFIERS.length;e++)this.lastModifiers[x.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),x.registerEvent(this.element,"keydown",this.downHandler),x.registerEvent(this.element,"keyup",this.upHandler),x.registerEvent(window,"unload",function e(){x.unregisterEvent(t.element,"keydown",t.downHandler),x.unregisterEvent(t.element,"keyup",t.upHandler),x.unregisterEvent(window,"unload",e)})},x.prototype.handler=function(r){var a=this;return function(e){var t,i,n;for(e=e||window.event,a.lastKeyCode=e.keyCode,t=0;t<x.MODIFIERS.length;t++)a.lastModifiers[x.MODIFIERS[t]]=e[x.MODIFIERS[t]+"Key"];for(x.arrayIncludes(x.MODIFIERS,x.keyName(a.lastKeyCode))&&(a.lastModifiers[x.keyName(a.lastKeyCode)]=!0),i=a["keys"+x.capitalize(r)],t=0;t<i.any.length;t++)!1===i.any[t](e)&&e.preventDefault&&e.preventDefault();if(i[n=a.lastModifiersAndKey()])for(t=0;t<i[n].length;t++)!1===i[n][t](e)&&e.preventDefault&&e.preventDefault()}},x.prototype.registerKeys=function(e,t,i){var n,r,a=this["keys"+x.capitalize(e)];for(x.isString(t)&&(t=[t]),n=0;n<t.length;n++)r=t[n],a[r=x.modifiersAndKey(r+"")]?a[r].push(i):a[r]=[i];return this},x.prototype.unregisterKeys=function(e,t,i){var n,r,a,s=this["keys"+x.capitalize(e)];for(x.isString(t)&&(t=[t]),n=0;n<t.length;n++)if(a=t[n],a=x.modifiersAndKey(a+""),null===i)delete s[a];else if(s[a])for(r=0;r<s[a].length;r++)if(String(s[a][r])===String(i)){s[a].splice(r,1);break}return this},x.prototype.off=function(e){return this.unregisterKeys("down",e,null)},x.prototype.delegate=function(e,t,i){return null!==i||void 0!==i?this.registerKeys(e,t,i):this.unregisterKeys(e,t,i)},x.prototype.down=function(e,t){return this.delegate("down",e,t)},x.prototype.up=function(e,t){return this.delegate("up",e,t)},x.prototype.lastKey=function(e){return e?this.lastModifiers[e]:x.keyName(this.lastKeyCode)},x.prototype.lastModifiersAndKey=function(){for(var e=[],t=0;t<x.MODIFIERS.length;t++)this.lastKey(x.MODIFIERS[t])&&e.push(x.MODIFIERS[t]);return x.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var ar,sr={Kibo:x},or='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"/>\n</svg>',lr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"/>\n</svg>',ur='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"/>\n</svg>',cr=e.Config,dr=e.Fullscreen,hr=e.formatTime,fr=e.extend,pr=e.removeArrayItem,gr=(ar=(w(vr,S),P(vr)),O(vr,[{key:"name",get:function(){return"media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"disabled",get:function(){var e=this.container&&this.container.getPlaybackType()===_.NO_OP;return this.userDisabled||e}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return E('<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n <%  }; %>\n <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n <% } %>\n    </div>\n <% }; %>\n <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n <% renderContent(name); %>\n      </div>\n <% }; %>\n <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n <% }; %>\n <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n <% }; %>\n <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n <% render(settings.default); %>\n  </div>\n <% } %>\n <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n <% render(settings.left); %>\n  </div>\n <% } %>\n <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n <% render(settings.right); %>\n  </div>\n <% } %>\n</div>\n')}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}},{key:"getExternalInterface",value:function(){var e=this;return{setVolume:this.setVolume,getVolume:function(){return e.volume}}}},{key:"bindEvents",value:function(){var e=this;this.stopListening(),this.listenTo(this.core,y.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,y.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,y.CORE_MOUSE_LEAVE,function(){return e.hide(e.options.hideMediaControlDelay)}),this.listenTo(this.core,y.CORE_FULLSCREEN,this.show),this.listenTo(this.core,y.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,y.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&(this.listenTo(this.container,y.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,y.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,y.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,y.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,y.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,y.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,y.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,y.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,y.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,y.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,y.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,y.CONTAINER_ENDED,this.ended),this.listenTo(this.container,y.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,y.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,y.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}},{key:"disable",value:function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}},{key:"enable",value:function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}},{key:"play",value:function(){this.container&&this.container.play()}},{key:"pause",value:function(){this.container&&this.container.pause()}},{key:"stop",value:function(){this.container&&this.container.stop()}},{key:"setInitialVolume",value:function(){var e=this.persistConfig?cr.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)}},{key:"onVolumeChanged",value:function(){this.updateVolumeUI()}},{key:"onLoadedMetadataOnVideoTag",value:function(){var e=this.playback&&this.playback.el;!dr.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}},{key:"updateVolumeUI",value:function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var e=this.$volumeBarContainer.width(),t=this.$volumeBarBackground.width(),e=t*this.volume/100+(e-t)/2,t=(this.$volumeBarFill.css({width:"".concat(this.volume,"%")}),this.$volumeBarScrubber.css({left:e}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill"),Math.ceil(this.volume/10));this.$volumeBarContainer.find(".segmented-bar-element").slice(0,t).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"/>\n</svg>'),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(lr),this.applyButtonStyle(this.$volumeIcon)}}},{key:"changeTogglePlay",value:function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(Xn),this.$playStopToggle.append(or),this.trigger(y.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(qn),this.$playStopToggle.append(qn),this.trigger(y.MEDIACONTROL_NOTPLAYING),v.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}},{key:"mousemoveOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=e.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.trigger(y.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"mouseleaveOnSeekBar",value:function(e){this.trigger(y.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"mousemoveOnVolumeBar",value:function(e){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"playerResize",value:function(e){this.$fullscreenToggle.html("");var t=this.core.isFullscreen()?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"/>\n</svg>':ur;this.$fullscreenToggle.append(t),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(e.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}},{key:"togglePlayPause",value:function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}},{key:"togglePlayStop",value:function(){this.container.isPlaying()?this.container.stop():this.container.play()}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100,t=Math.min(100,Math.max(t,0));this.setSeekPercentage(t)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"getVolumeFromUIEvent",value:function(e){return(e.pageX-this.$volumeBarContainer.offset().left)/this.$volumeBarContainer.width()*100}},{key:"toggleMute",value:function(){this.setVolume(this.muted?100:0)}},{key:"setVolume",value:function(e){function t(){i.container&&i.container.isReady?i.container.setVolume(e):i.listenToOnce(i.container,y.CONTAINER_READY,function(){i.container.setVolume(e)})}var i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!n&&cr.persist("volume",e);this.container?t():this.listenToOnce(this,y.MEDIACONTROL_CONTAINERCHANGED,t)}},{key:"toggleFullscreen",value:function(){this.trigger(y.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}},{key:"onActiveContainerChanged",value:function(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(y.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(y.MEDIACONTROL_CONTAINERCHANGED)}},{key:"showVolumeBar",value:function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}},{key:"hideVolumeBar",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return e.hideVolumeBar()},t):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return e.$volumeBarContainer.addClass("volume-bar-hide")},t)))}},{key:"ended",value:function(){this.changeTogglePlay()}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,e=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(e-t,"%")})}},{key:"onTimeUpdate",value:function(e){if(!this.draggingSeekBar){var t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.renderSeekBar()}}},{key:"renderSeekBar",value:function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==_.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var e=hr(this.currentPositionValue),t=hr(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}}},{key:"seek",value:function(e){if(this.settings.seekEnabled)return e=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100,e=Math.min(100,Math.max(e,0)),this.container&&this.container.seekPercentage(e),this.setSeekPercentage(e),!1}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible=!0}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible=!1}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!this.disabled){var i=e&&e.clientX!==this.lastMouseX&&e.clientY!==this.lastMouseY;e&&!i&&!navigator.userAgent.match(/firefox/i)||(clearTimeout(this.hideId),this.$el.show(),this.trigger(y.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(y.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return t.hide()},2e3),e&&(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY));this.updateCursorStyle(!0)}}},{key:"hide",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(this.isVisible()){var i=t||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var n=this.userKeepVisible||this.keepVisible,r=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(t||n||r))this.hideId=setTimeout(function(){return e.hide()},i);else{this.trigger(y.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(y.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);this.updateCursorStyle(!1)}}}}},{key:"updateCursorStyle",value:function(e){e?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}},{key:"settingsUpdate",value:function(){var e=this.getSettings();!e||this.fullScreenOnVideoTagSupported||dr.fullscreenEnabled()||(e.default&&pr(e.default,"fullscreen"),e.left&&pr(e.left,"fullscreen"),e.right&&pr(e.right,"fullscreen")),JSON.stringify(this.settings)!==JSON.stringify(e)&&(this.settings=e,this.render())}},{key:"getSettings",value:function(){return g.extend(!0,{},this.container&&this.container.settings)}},{key:"highDefinitionUpdate",value:function(e){this.isHD=e;this.$hdIndicator[e?"addClass":"removeClass"]("enabled")}},{key:"createCachedElements",value:function(){var e=this.$el.find(".media-control-layer");this.$duration=e.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=e.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=e.find("button.media-control-button[data-playpause]"),this.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}},{key:"resetIndicators",value:function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}},{key:"initializeIcons",value:function(){var e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(qn),e.find("button.media-control-button[data-pause]").append(Xn),e.find("button.media-control-button[data-stop]").append(or),this.$playPauseToggle.append(qn),this.$playStopToggle.append(qn),this.$volumeIcon.append(lr),this.$fullscreenToggle.append(ur),this.$hdIndicator.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"/>\n</svg>')}},{key:"setSeekPercentage",value:function(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarPercentage!==e&&(this.displayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:"".concat(e,"%")}),this.$seekBarScrubber.css({left:"".concat(e,"%")}))}},{key:"seekRelative",value:function(e){if(this.settings.seekEnabled){var t=this.container.getCurrentTime(),i=this.container.getDuration(),t=Math.min(Math.max(t+e,0),i),t=Math.min(100*t/i,100);this.container.seekPercentage(t)}}},{key:"bindKeyAndShow",value:function(e,t){var i=this;this.kibo.down(e,function(){return i.show(),t()})}},{key:"bindKeyEvents",value:function(){var t=this;if(!v.isMobile&&!this.options.disableKeyboardShortcuts){this.unbindKeyEvents(),this.kibo=new x(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",function(){return t.togglePlayPause()}),this.bindKeyAndShow("left",function(){return t.seekRelative(-5)}),this.bindKeyAndShow("right",function(){return t.seekRelative(5)}),this.bindKeyAndShow("shift left",function(){return t.seekRelative(-10)}),this.bindKeyAndShow("shift right",function(){return t.seekRelative(10)}),this.bindKeyAndShow("shift ctrl left",function(){return t.seekRelative(-15)}),this.bindKeyAndShow("shift ctrl right",function(){return t.seekRelative(15)});["1","2","3","4","5","6","7","8","9","0"].forEach(function(e){t.bindKeyAndShow(e,function(){t.settings.seekEnabled&&t.container&&t.container.seekPercentage(10*e)})})}}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}},{key:"parseColors",value:function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&g(e).find("svg path").css("fill",this.buttonsColor)}},{key:"destroy",value:function(){g(document).unbind("mouseup",this.stopDragHandler),g(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),Gn(Mn(vr.prototype),"destroy",this).call(this)}},{key:"configure",value:function(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(y.MEDIACONTROL_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=this,t=this.options.hideMediaControlDelay||2e3,i=(this.settings&&this.$el.html(this.template({settings:this.settings})),T.getStyleFor('.media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: grabbing !important;\n    cursor: url("closed-hand.cur"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: grabbing !important;\n      cursor: url("closed-hand.cur"), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    will-change: transform, opacity;\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    transform: translateY(50px); }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    transform: translateY(-7px);\n    bottom: 0;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n',{baseUrl:this.options.baseUrl})),i=(this.$el.append(i[0]),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout(function(){return e.hide()},t),this.disabled&&this.hide()),v.isSafari&&v.isMobile&&(v.version<10?this.$volumeContainer:this.$volumeBarContainer).css("display","none"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),0);return this.displayedSeekBarPercentage&&(i=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(i),setTimeout(function(){e.settings.seekEnabled||e.$seekBarContainer.addClass("seek-disabled"),v.isMobile||e.options.disableKeyboardShortcuts||e.bindKeyEvents(),e.playerResize({width:e.options.width,height:e.options.height}),e.hideVolumeBar(0)},0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(y.MEDIACONTROL_RENDERED),this}}]),vr);function vr(e){var t;return I(this,vr),(t=ar.call(this,e)).persistConfig=t.options.persistConfig,t.currentPositionValue=null,t.currentDurationValue=null,t.keepVisible=!1,t.fullScreenOnVideoTagSupported=null,t.setInitialVolume(),t.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},t.kibo=new x(t.options.focusElement),t.bindKeyEvents(),t.container?g.isEmptyObject(t.container.settings)||(t.settings=g.extend({},t.container.settings)):t.settings={},t.userDisabled=!1,(t.container&&t.container.mediaControlDisabled||t.options.chromeless)&&t.disable(),t.stopDragHandler=function(e){return t.stopDrag(e)},t.updateDragHandler=function(e){return t.updateDrag(e)},g(document).bind("mouseup",t.stopDragHandler),g(document).bind("mousemove",t.updateDragHandler),t}gr.extend=function(e){return fr(gr,e)};kr=(w(Or,vn),P(Or)),O(Or,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E('<div class="play-wrapper" data-poster></div>\n')}},{key:"shouldRender",get:function(){var e=!(!this.options.poster||!this.options.poster.showForNoOp);return"html_img"!==this.container.playback.name&&(this.container.playback.getPlaybackType()!==_.NO_OP||e)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||void 0===this.options.poster.showOnVideoEnd}},{key:"bindEvents",value:function(){this.listenTo(this.container,y.CONTAINER_STOP,this.onStop),this.listenTo(this.container,y.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,y.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,y.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,y.CONTAINER_ENDED,this.onStop)}},{key:"onError",value:function(e){this.hasFatalError=e.level===b.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())}},{key:"onPlay",value:function(){this.hasStartedPlaying=!0,this.update()}},{key:"onStop",value:function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()}},{key:"updatePlayButton",value:function(e){!e||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()}},{key:"showPlayButton",value:function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.$el.removeClass("clickable")}},{key:"clicked",value:function(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.playback&&(this.container.playback._consented=!0),this.container.play()),!1}},{key:"shouldHideOnPlay",value:function(){return!this.container.playback.isAudioOnly}},{key:"update",value:function(){if(this.shouldRender){var e=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(e),this.updatePoster()}}},{key:"updatePoster",value:function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}},{key:"showPoster",value:function(){this.container.disableMediaControl(),this.$el.show()}},{key:"hidePoster",value:function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()}},{key:"render",value:function(){if(this.shouldRender){var e=T.getStyleFor(".player-poster[data-poster] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: transparent;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n",{baseUrl:this.options.baseUrl});if(this.$el.html(this.template()),this.$el.append(e[0]),this.options.poster&&void 0===this.options.poster.custom){e=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+e+")"}),this.removeVideoElementPoster()}else this.options.poster&&(this.$el.css({background:this.options.poster.custom}),this.removeVideoElementPoster());this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(qn),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");e=this.options.mediacontrol&&this.options.mediacontrol.buttons;return e&&this.$el.find("svg path").css("fill",e),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(e=this.options.mediacontrol.buttons,this.$playButton.css("color",e)),this.update(),this}}},{key:"removeVideoElementPoster",value:function(){this.container.playback&&this.container.playback.$el&&this.container.playback.$el[0]&&this.container.playback.$el[0].removeAttribute&&this.container.playback.$el[0].removeAttribute("poster")}}]);var mr=Or,yr=e.formatTime;br=(w(Ir,S),P(Ir)),O(Ir,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===_.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,y.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,y.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,y.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,y.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,y.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,y.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){e=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(e/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t;return this.useActualLiveTime?(e=(t=this.firstFragDateTime?(t=new Date(this.firstFragDateTime),(e=new Date(this.firstFragDateTime)).setHours(0,0,0,0),(t.getTime()-e.getTime())/1e3+this.duration):(e=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),((t=new Date(e))-e.setHours(0,0,0,0))/1e3))-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=yr(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();t=yr(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);t!==this.displayedDuration&&(this.$durationEl.text(t),this.displayedDuration=t)}else this.$durationEl.hide();this.$el.show();var e=this.mediaControl.$seekBarContainer.width(),t=this.$el.width(),i=this.hoverPosition*e;i-=t/2,i=Math.max(0,Math.min(i,e-t)),this.$el.css("left",i)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){var e=T.getStyleFor('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]);for(var Ar,Er,Tr,br,kr,R={ClickToPause:R,ClosedCaptions:Rn,DVRControls:rn,EndVideo:a,ErrorScreen:di,Favicon:k,GoogleAnalytics:Cn,MediaControl:gr,Poster:mr,SeekTime:Ir,SpinnerThreeBounce:(Tr=(w(Rr,vn),P(Rr)),O(Rr,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}},{key:"onBuffering",value:function(){this.show()}},{key:"onBufferFull",value:function(){this.hide()}},{key:"onStop",value:function(){this.hide()}},{key:"show",value:function(){var e=this;null===this.showTimeout&&(this.showTimeout=setTimeout(function(){return e.$el.show()},300))}},{key:"hide",value:function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()}},{key:"render",value:function(){var e=T.getStyleFor(".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    animation-delay: -0.16s; }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n",{baseUrl:this.options.baseUrl});return this.$el.html(this.template()),this.$el.append(e[0]),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this}}]),Rr),Stats:(Er=(w(Dr,cn),P(Dr)),O(Dr,[{key:"name",get:function(){return"stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,y.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,y.CONTAINER_STOP,this.onStop),this.listenTo(this.container,y.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,y.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,y.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,y.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,y.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,y.PLAYBACK_STATS_ADD,this.onStatsAdd)}},{key:"setInitialAttrs",value:function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}}},{key:"onPlay",value:function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))}},{key:"onStop",value:function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"}},{key:"onBuffering",value:function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++}},{key:"onBufferFull",value:function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"}},{key:"getRebufferingTime",value:function(){return Date.now()-this.rebufferingTimeInit}},{key:"getWatchingTime",value:function(){return Date.now()-this.watchingTimeInit-this.rebufferingTime}},{key:"isRebuffering",value:function(){return!!this.rebufferingTimeInit}},{key:"onStatsAdd",value:function(e){g.extend(this.externalMetrics,e)}},{key:"getStats",value:function(){var e={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return g.extend(e,this.externalMetrics),e}},{key:"report",value:function(){this.container.statsReport(this.getStats())}}]),Dr),WaterMark:(Ar=(w(Lr,vn),P(Lr)),O(Lr,[{key:"name",get:function(){return"watermark"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return E('<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target="_blank" href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n')}},{key:"bindEvents",value:function(){this.listenTo(this.container,y.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,y.CONTAINER_STOP,this.onStop),this.listenTo(this.container,y.CONTAINER_OPTIONS_CHANGE,this.configure)}},{key:"configure",value:function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()}},{key:"onPlay",value:function(){this.hidden||this.$el.show()}},{key:"onStop",value:function(){this.$el.hide()}},{key:"render",value:function(){this.$el.hide();var e=T.getStyleFor(".clappr-watermark[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n.clappr-watermark[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n.clappr-watermark[data-watermark] img {\n  max-width: 100%; }\n\n.clappr-watermark[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n.clappr-watermark[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n",{baseUrl:this.options.baseUrl}),t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(t)),this.$el.append(e[0]),this.container.$el.append(this.$el),this}}]),Lr)},Sr=0,_r=Object.values(R);Sr<_r.length;Sr++){var Cr=_r[Sr];tn.registerPlugin(Cr)}function Lr(e){return I(this,Lr),(e=Ar.call(this,e)).configure(),e}function Dr(e){return I(this,Dr),(e=Er.call(this,e)).setInitialAttrs(),e.reportInterval=e.options.reportInterval||5e3,e.state="IDLE",e}function Rr(e){return I(this,Rr),(e=Tr.call(this,e)).template=E("<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"),e.showTimeout=null,e.listenTo(e.container,y.CONTAINER_STATE_BUFFERING,e.onBuffering),e.listenTo(e.container,y.CONTAINER_STATE_BUFFERFULL,e.onBufferFull),e.listenTo(e.container,y.CONTAINER_STOP,e.onStop),e.listenTo(e.container,y.CONTAINER_ENDED,e.onStop),e.listenTo(e.container,y.CONTAINER_ERROR,e.onStop),e.render(),e}function Ir(e){return I(this,Ir),(e=br.call(this,e)).hoveringOverSeekBar=!1,e.hoverPosition=null,e.duration=null,e.firstFragDateTime=null,e.actualLiveTime=!!e.mediaControl.options.actualLiveTime,e.actualLiveTime&&(e.mediaControl.options.actualLiveServerTime?e.actualLiveServerTimeDiff=(new Date).getTime()-new Date(e.mediaControl.options.actualLiveServerTime).getTime():e.actualLiveServerTimeDiff=0),e}function Or(e){var t;return I(this,Or),(t=kr.call(this,e)).hasStartedPlaying=!1,t.playRequested=!1,t.render(),setTimeout(function(){return t.update()},0),t}var Rn=R.ClickToPause,rn=R.ClosedCaptions,a=R.DVRControls,di=R.EndVideo,k=R.ErrorScreen,Cn=R.Favicon,mr=R.GoogleAnalytics,wr=R.MediaControl,Pr=R.Poster,xr=R.SeekTime,Nr=R.SpinnerThreeBounce,Fr=R.Stats,Mr=R.WaterMark,Pn=M(M({},Pn),{},{ClickToPause:Rn,ClosedCaptions:rn,DVRControls:a,EndVideo:di,ErrorScreen:k,Favicon:Cn,GoogleAnalytics:mr,MediaControl:wr,Poster:Pr,SeekTime:xr,SpinnerThreeBounce:Nr,Stats:Fr,WaterMark:Mr,Vendor:sr,Plugins:R,version:"0.5.0"});function Br(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ur(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(r),!0).forEach(function(e){t=n,i=r[e=e],(e=Wr(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;var t,i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function Gr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wr(n.key),n)}}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e,t){return(Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jr(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Vr(i),t=(e=n?(e=Vr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}}function Hr(){return(Hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vr(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Wr(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}var Rn={exports:{}},N=("undefined"!=typeof window&&(Rn.exports=(()=>{var i={"./src/config.ts":(e,t,i)=>{i.r(t),i.d(t,{enableStreamingMode:()=>function(e){var t=e.loader;t!==p.default&&t!==f.default?(m.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):(0,p.fetchSupported)()&&(e.loader=p.default,e.progressive=!0,e.enableSoftwareAES=!0,m.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))},hlsDefaultConfig:()=>T,mergeConfig:()=>function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return y({},e,t)}});var t=i("./src/controller/abr-controller.ts"),n=i("./src/controller/audio-stream-controller.ts"),r=i("./src/controller/audio-track-controller.ts"),a=i("./src/controller/subtitle-stream-controller.ts"),s=i("./src/controller/subtitle-track-controller.ts"),o=i("./src/controller/buffer-controller.ts"),l=i("./src/controller/timeline-controller.ts"),u=i("./src/controller/cap-level-controller.ts"),c=i("./src/controller/fps-controller.ts"),d=i("./src/controller/eme-controller.ts"),h=i("./src/controller/cmcd-controller.ts"),f=i("./src/utils/xhr-loader.ts"),p=i("./src/utils/fetch-loader.ts"),g=i("./src/utils/cues.ts"),v=i("./src/utils/mediakeys-helper.ts"),m=i("./src/utils/logger.ts");function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function E(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach(function(e){t=n,i=r[e=e],e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;var t,i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}var T=E(E({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:t.default,bufferController:o.default,capLevelController:u.default,fpsController:c.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:g.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:a.SubtitleStreamController,subtitleTrackController:s.default,timelineController:l.TimelineController,audioStreamController:n.default,audioTrackController:r.default,emeController:d.default,cmcdController:h.default})},"./src/controller/abr-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var E=i("./src/polyfills/number.ts"),n=i("./src/utils/ewma-bandwidth-estimator.ts"),y=i("./src/events.ts"),r=i("./src/errors.ts"),o=i("./src/types/loader.ts"),T=i("./src/utils/logger.ts");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t=s.prototype).registerListeners=function(){var e=this.hls;e.on(y.Events.FRAG_LOADING,this.onFragLoading,this),e.on(y.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(y.Events.FRAG_LOADING,this.onFragLoading,this),e.off(y.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.Events.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function(e,t){var i=t.frag;i.type!==o.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=i,this.partCurrent=null!=(i=t.part)?i:null,this.timer=self.setInterval(this.onCheck,100))},t.onLevelLoaded=function(e,t){var i=this.hls.config;t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.autoLevelEnabled,r=(i.config,i.media);if(e&&r){var a=(t||e).stats,s=(t||e).duration;if(a.aborted||a.loaded&&a.loaded===a.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(n&&!r.paused&&r.playbackRate&&r.readyState){n=i.mainForwardBufferInfo;if(null!==n){var o=performance.now()-a.loading.start,r=Math.abs(r.playbackRate);if(!(o<=500*s/r)){var l=a.loaded&&a.loading.first,u=this.bwEstimator.getEstimate(),c=i.levels,d=i.minAutoLevel,h=c[e.level],h=a.total||Math.max(a.loaded,Math.round(s*h.maxBitrate/8)),f=l?1e3*a.loaded/o:0,h=f?(h-a.loaded)/f:8*h/u,p=n.len/r;if(!(h<=p)){for(var g=Number.POSITIVE_INFINITY,v=e.level-1;d<v;v--){var m=c[v].maxBitrate;if((g=f?s*m/(6.4*f):s*m/u)<p)break}h<=g||(T.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+v+"\n      Current BW estimate: "+((0,E.isFiniteNumber)(u)?(u/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+h.toFixed(3)+" s\n      Estimated load time for the next fragment: "+g.toFixed(3)+" s\n      Time to underbuffer: "+p.toFixed(3)+" s"),i.nextLoadLevel=v,l&&this.bwEstimator.sample(o,a.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),i.trigger(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a}))}}}}}},t.onFragLoaded=function(e,t){var i=t.frag,t=t.part;if(i.type===o.PlaylistLevelType.MAIN&&(0,E.isFiniteNumber)(i.sn)){var n=(t||i).stats,r=(t||i).duration;if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var a=this.hls.levels[i.level],s=(a.loaded?a.loaded.bytes:0)+n.loaded,r=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:s,duration:r},a.realBitrate=Math.round(8*s/r)}if(i.bitrateTest){a={stats:n,frag:i,part:t,id:i.type};this.onFragBuffered(y.Events.FRAG_BUFFERED,a)}}},t.onFragBuffered=function(e,t){var i=t.frag,t=t.part,t=(t||i).stats;if(!t.aborted&&i.type===o.PlaylistLevelType.MAIN&&"initSegment"!==i.sn){var n=t.parsing.end-t.loading.start;this.bwEstimator.sample(n,t.loaded),t.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},t.onError=function(e,t){switch(t.details){case r.ErrorDetails.FRAG_LOAD_ERROR:case r.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.maxAutoLevel,r=i.config,a=i.minAutoLevel,s=i.media,t=t?t.duration:e?e.duration:0,e=(s&&s.currentTime,s&&0!==s.playbackRate?Math.abs(s.playbackRate):1),s=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,i=i.mainForwardBufferInfo,i=(i?i.len:0)/e,e=this.findBestLevel(s,a,n,i,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(0<=e)return e;T.logger.trace((i?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var o=t?Math.min(t,r.maxStarvationDelay):r.maxStarvationDelay,l=r.abrBandWidthFactor,u=r.abrBandWidthUpFactor;if(!i){var c=this.bitrateTestDelay;c&&(o=(t?Math.min(t,r.maxLoadingDelay):r.maxLoadingDelay)-c,T.logger.trace("bitrate test took "+Math.round(1e3*c)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*o)+" ms"),l=u=1)}return e=this.findBestLevel(s,a,n,i+o,l,u),Math.max(e,0)},t.findBestLevel=function(e,t,i,n,r,a){for(var s,o=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,c=this.hls.levels,d=c[u],h=!(null==d||null==(s=d.details)||!s.live),f=null==d?void 0:d.codecSet,p=l?l.duration:o?o.duration:0,g=i;t<=g;g--){var v=c[g];if(v&&(!f||v.codecSet===f)){var m,v=v.details,v=(l?null==v?void 0:v.partTarget:null==v?void 0:v.averagetargetduration)||p,y=c[g].maxBitrate,A=y*v/(m=g<=u?r*e:a*e);if(T.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(m)+"/"+y+"/"+v+"/"+n+"/"+A),y<m&&(0==A||!(0,E.isFiniteNumber)(A)||h&&!this.bitrateTestDelay||A<n))return g}}return-1},a((t=s).prototype,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;t=this.getNextABRAutoLevel();return-1!==e&&this.hls.levels[t].loadError?e:t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}}]),Object.defineProperty(t,"prototype",{writable:!1});function s(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0;e=(this.hls=e).config;this.bwEstimator=new n.default(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}const l=s},"./src/controller/audio-stream-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var r,a=i("./src/polyfills/number.ts"),f=i("./src/controller/base-stream-controller.ts"),p=i("./src/events.ts"),s=i("./src/utils/buffer-helper.ts"),o=i("./src/controller/fragment-tracker.ts"),n=i("./src/types/level.ts"),c=i("./src/types/loader.ts"),g=i("./src/loader/fragment.ts"),d=i("./src/demux/chunk-cache.ts"),h=i("./src/demux/transmuxer-interface.ts"),v=i("./src/types/transmuxer.ts"),l=i("./src/controller/fragment-finders.ts"),u=i("./src/utils/discontinuities.ts"),m=i("./src/errors.ts");function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r=f.default,t=r,(i=E).prototype=Object.create(t.prototype),A(i.prototype.constructor=i,t),(i=E.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(p.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(p.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(p.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(p.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(p.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(p.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(p.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(p.Events.ERROR,this.onError,this),e.on(p.Events.BUFFER_RESET,this.onBufferReset,this),e.on(p.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(p.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(p.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(p.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(p.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(p.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(p.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(p.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(p.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(p.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(p.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(p.Events.ERROR,this.onError,this),e.off(p.Events.BUFFER_RESET,this.onBufferReset,this),e.off(p.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(p.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(p.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(p.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.onInitPtsFound=function(e,t){var i=t.frag,n=t.id,t=t.initPTS;if("main"===n){n=i.cc;this.initPTS[i.cc]=t,this.log("InitPTS for cc: "+n+" found from main: "+t),this.videoTrackCC=n,this.state===f.State.WAITING_INIT_PTS&&this.tick()}},i.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=f.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=f.State.IDLE):(this.loadedmetadata=!1,this.state=f.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},i.doTick=function(){switch(this.state){case f.State.IDLE:this.doTickIdle();break;case f.State.WAITING_TRACK:var e=this.levels,t=this.trackId,t=null==e||null==(e=e[t])?void 0:e.details;if(t){if(this.waitForCdnTuneIn(t))break;this.state=f.State.WAITING_INIT_PTS}break;case f.State.FRAG_LOADING_WAITING_RETRY:e=performance.now(),t=this.retryDate;(!t||t<=e||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=f.State.IDLE);break;case f.State.WAITING_INIT_PTS:e=this.waitingData;if(e){var t=e.frag,i=e.part,n=e.cache,e=e.complete;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=f.State.FRAG_LOADING;i={frag:t,part:i,payload:n.flush(),networkDetails:null};this._handleFragmentLoadProgress(i),e&&r.prototype._handleFragmentLoadComplete.call(this,i)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+t.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{n=this.getLoadPosition(),e=s.BufferHelper.bufferInfo(this.mediaBuffer,n,this.config.maxBufferHole);(0,l.fragmentWithinToleranceTest)(e.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc ("+t.cc+") @ "+t.start+" cancelled because another fragment at "+e.end+" is needed"),this.clearWaitingFragment())}}else this.state=f.State.IDLE}this.onTickEnd()},i.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=f.State.IDLE)},i.resetLoadingState=function(){this.clearWaitingFragment(),r.prototype.resetLoadingState.call(this)},i.onTickEnd=function(){var e=this.media;e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},i.doTickIdle=function(){var e=this.hls,t=this.levels,i=this.media,n=this.trackId,r=e.config;if(t&&t[n]&&(i||!this.startFragRequested&&r.startFragPrefetch)){r=t[n].details;if(!r||r.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(r))this.state=f.State.WAITING_TRACK;else{t=this.mediaBuffer||this.media,n=(this.bufferFlushed&&t&&(this.bufferFlushed=!1,this.afterBufferFlushed(t,g.ElementaryStreamTypes.AUDIO,c.PlaylistLevelType.AUDIO)),this.getFwdBufferInfo(t,c.PlaylistLevelType.AUDIO));if(null!==n){var t=this.getFwdBufferInfo(this.videoBuffer||this.media,c.PlaylistLevelType.MAIN),a=n.len,s=this.getMaxBufferLength(null==t?void 0:t.len),o=this.audioSwitch;if(!(s<=a)||o){if(!o&&this._streamEnded(n,r))return e.trigger(p.Events.BUFFER_EOS,{type:"audio"}),void(this.state=f.State.ENDED);s=r.fragments[0].start,a=n.end;if(o&&i){var e=this.getLoadPosition(),a=e;r.PTSKnown&&e<s&&(n.end>s||n.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=s+.05)}if(!(t&&a>t.end+r.targetduration)&&(t&&t.len||!n.len)){o=this.getNextFragment(a,r);o?"identity"!==(null==(e=o.decryptdata)?void 0:e.keyFormat)||null!=(i=o.decryptdata)&&i.key?this.loadFragment(o,r,a):this.loadKey(o,r):this.bufferFlushed=!0}}}}}},i.getMaxBufferLength=function(e){var t=r.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},i.onMediaDetaching=function(){this.videoBuffer=null,r.prototype.onMediaDetaching.call(this)},i.onAudioTracksUpdated=function(e,t){t=t.audioTracks;this.resetTransmuxer(),this.levels=t.map(function(e){return new n.Level(e)})},i.onAudioTrackSwitching=function(e,t){var i=!!t.url,t=(this.trackId=t.id,this.fragCurrent);null!=t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.audioSwitch=!0,this.state=f.State.IDLE):this.state=f.State.STOPPED,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},i.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(p.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},i.onAudioTrackLoaded=function(e,t){if(null!=this.mainDetails){var i=this.levels,n=t.details,r=t.id;if(i){this.log("Track "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var i=i[r],a=0;if(n.live||null!=(s=i.details)&&s.live){var s=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!s)return;a=!i.details&&n.hasProgramDateTime&&s.hasProgramDateTime?((0,u.alignMediaPlaylistByPDT)(n,s),n.fragments[0].start):this.alignPlaylists(n,i.details)}i.details=n,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(i.details,a),this.state!==f.State.WAITING_TRACK||this.waitForCdnTuneIn(n)||(this.state=f.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)}else this.cachedTrackLoadedData=t},i._handleFragmentLoadProgress=function(e){var t=e.frag,i=e.part,e=e.payload,n=this.config,r=this.trackId,a=this.levels;if(a){var a=a[r],s=a.details,n=n.defaultAudioCodec||a.audioCodec||"mp4a.40.2",a=(a=this.transmuxer)||(this.transmuxer=new h.default(this.hls,c.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),o=this.initPTS[t.cc],l=null==(l=t.initSegment)?void 0:l.data;if(void 0!==o){var u=i?i.index:-1,u=new v.ChunkMetadata(t.level,t.sn,t.stats.chunkCount,e.byteLength,u,-1!==u);a.push(e,l,n,"",t,i,s.totalduration,!1,u,o)}else this.log("Unknown video PTS for cc "+t.cc+", waiting for video PTS before demuxing audio frag "+t.sn+" of ["+s.startSN+" ,"+s.endSN+"],track "+r),(this.waitingData=this.waitingData||{frag:t,part:i,cache:new d.default,complete:!1}).cache.push(new Uint8Array(e)),this.waitingVideoCC=this.videoTrackCC,this.state=f.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+t.sn+" of level "+t.level+" will not be buffered")},i._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:r.prototype._handleFragmentLoadComplete.call(this,e)},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(e,t){var i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},i.onFragBuffered=function(e,t){var i=t.frag,t=t.part;i.type===c.PlaylistLevelType.AUDIO?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(p.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,t)):this.loadedmetadata||i.type!==c.PlaylistLevelType.MAIN||null!=(t=this.videoBuffer||this.media)&&t.buffered.length&&(this.loadedmetadata=!0)},i.onError=function(e,t){switch(t.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(c.PlaylistLevelType.AUDIO,t);break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==f.State.ERROR&&this.state!==f.State.STOPPED&&(this.state=t.fatal?f.State.ERROR:f.State.IDLE,this.warn(t.details+" while loading frag, switching to "+this.state+" state"));break;case m.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===f.State.PARSING||this.state===f.State.PARSED)){var i=!0,n=this.getFwdBufferInfo(this.mediaBuffer,c.PlaylistLevelType.AUDIO);(i=n&&.5<n.len?!this.reduceMaxBufferLength(n.len):i)&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,r.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},i.onBufferFlushed=function(e,t){t.type===g.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},i._handleTransmuxComplete=function(e){var t="audio",i=this.hls,n=e.remuxResult,e=e.chunkMeta,r=this.getCurrentContext(e);if(!r)return this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(e.level);var a=r.frag,s=r.part,r=r.level.details,o=n.audio,l=n.text,u=n.id3,n=n.initSegment;if(!this.fragContextChanged(a)&&r){if(this.state=f.State.PARSING,this.audioSwitch&&o&&this.completeAudioSwitch(),null!=n&&n.tracks&&(this._bufferInitSegment(n.tracks,a,e),i.trigger(p.Events.FRAG_PARSING_INIT_SEGMENT,{frag:a,id:t,tracks:n.tracks})),o){var n=o.startPTS,c=o.endPTS,d=o.startDTS,h=o.endDTS;s&&(s.elementaryStreams[g.ElementaryStreamTypes.AUDIO]={startPTS:n,endPTS:c,startDTS:d,endDTS:h}),a.setElementaryStreamInfo(g.ElementaryStreamTypes.AUDIO,n,c,d,h),this.bufferFragmentData(o,a,s,e)}if(null!=u&&null!=(n=u.samples)&&n.length){c=y({id:t,frag:a,details:r},u);i.trigger(p.Events.FRAG_PARSING_METADATA,c)}if(l){d=y({id:t,frag:a,details:r},l);i.trigger(p.Events.FRAG_PARSING_USERDATA,d)}}},i._bufferInitSegment=function(e,t,i){if(this.state===f.State.PARSING){e.video&&delete e.video;var n=e.audio;if(n){n.levelCodec=n.codec,n.id="audio",this.log("Init audio buffer, container:"+n.container+", codecs[parsed]=["+n.codec+"]"),this.hls.trigger(p.Events.BUFFER_CODECS,e);e=n.initSegment;if(null!=e&&e.byteLength){n={type:"audio",frag:t,part:null,chunkMeta:i,parent:t.type,data:e};this.hls.trigger(p.Events.BUFFER_APPENDING,n)}this.tick()}}},i.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,!this.audioSwitch&&n!==o.FragmentState.NOT_LOADED&&n!==o.FragmentState.PARTIAL||("initSegment"===e.sn?this._loadInitSegment(e):t.live&&!(0,a.isFiniteNumber)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=f.State.WAITING_INIT_PTS):(this.startFragRequested=!0,r.prototype.loadFragment.call(this,e,t,i)))},i.completeAudioSwitch=function(){var e=this.hls,t=this.media,i=this.trackId;t&&(this.log("Switching audio track : flushing all audio"),r.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(p.Events.AUDIO_TRACK_SWITCHED,{id:i})};function E(e,t){return(e=r.call(this,e,t,"[audio-stream-controller]")||this).videoBuffer=null,e.videoTrackCC=-1,e.waitingVideoCC=-1,e.audioSwitch=!1,e.trackId=-1,e.waitingData=null,e.mainDetails=null,e.bufferFlushed=!1,e.cachedTrackLoadedData=null,e._registerListeners(),e}const T=E},"./src/controller/audio-track-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var n,l=i("./src/events.ts"),r=i("./src/errors.ts"),t=i("./src/controller/base-playlist-controller.ts"),a=i("./src/types/loader.ts");function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=t.default,i=n,(t=u).prototype=Object.create(i.prototype),o(t.prototype.constructor=t,i),(t=u.prototype).registerListeners=function(){var e=this.hls;e.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(l.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(l.Events.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,n.prototype.destroy.call(this)},t.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},t.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},t.onAudioTrackLoaded=function(e,t){var i=t.id,n=t.details,r=this.tracksInGroup[i];if(r){var a=r.details;r.details=t.details,this.log("audioTrack "+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,t,a))}else this.warn("Invalid audio track id "+i)},t.onLevelLoading=function(e,t){this.switchLevel(t.level)},t.onLevelSwitching=function(e,t){this.switchLevel(t.level)},t.switchLevel=function(e){e=this.hls.levels[e];if(null!=e&&e.audioGroupIds){var t=e.audioGroupIds[e.urlId];if(this.groupId!==t){this.groupId=t;var e=this.tracks.filter(function(e){return!t||e.groupId===t}),i=(this.selectDefaultTrack&&!e.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),{audioTracks:this.tracksInGroup=e});this.log("Updating audio tracks, "+e.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(l.Events.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()}}},t.onError=function(e,t){n.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===a.PlaylistContextType.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},t.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var i=t[this.trackId],t=(this.log("Now switching to audio-track index "+e),t[e]),n=t.id,r=t.groupId,r=void 0===r?"":r,a=t.name,s=t.type,o=t.url;if(this.trackId=e,this.trackName=a,this.selectDefaultTrack=!1,this.hls.trigger(l.Events.AUDIO_TRACK_SWITCHING,{id:n,groupId:r,name:a,type:s,url:o}),!t.details||t.details.live){e=this.switchParams(t.url,null==i?void 0:i.details);this.loadPlaylist(e)}}},t.selectInitialTrack=function(){this.tracksInGroup;var e=this.trackName,e=this.findTrackId(e)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(l.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},t.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var n=t[i];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1},t.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var i=t.id,n=t.groupId,t=t.url;if(e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+i),this.clearTimer(),this.hls.trigger(l.Events.AUDIO_TRACK_LOADING,{url:t,id:i,groupId:n,deliveryDirectives:e||null})}},s((i=u).prototype,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),Object.defineProperty(i,"prototype",{writable:!1});function u(e){return(e=n.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.trackName="",e.selectDefaultTrack=!0,e.registerListeners(),e}const c=u},"./src/controller/base-playlist-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var o=i("./src/polyfills/number.ts"),l=i("./src/types/level.ts"),p=i("./src/controller/level-helper.ts"),n=i("./src/utils/logger.ts"),r=i("./src/errors.ts"),a=((t=s.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===r.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var i=null==t?void 0:t.renditionReports;if(i)for(var n=0;n<i.length;n++){var r=i[n],a=""+r.URI;if(a===e.slice(-a.length)){a=parseInt(r["LAST-MSN"]),r=parseInt(r["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var s=Math.min(t.age-t.partTarget,t.targetduration);void 0!==r&&s>t.partTarget&&(r+=1)}if((0,o.isFiniteNumber)(a))return new l.HlsUrlParameters(a,(0,o.isFiniteNumber)(r)?r:void 0,l.HlsSkip.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,i){var n=this,r=t.details,a=t.stats,s=a.loading.end?Math.max(0,self.performance.now()-a.loading.end):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),i&&0<r.fragments.length&&(0,p.mergeDetails)(i,r),this.canLoad&&r.live){var o,s=void 0,l=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var u=this.hls.config.lowLatencyMode,c=r.lastPartSn,d=r.endSN,h=r.lastPartIndex,f=c===d,c=(-1!==h?(s=f?d+1:c,l=f?u?0:h:h+1):s=d+1,r.age),h=c+r.ageHeader,d=Math.min(h-r.partTarget,1.5*r.targetduration);if(0<d){if(i&&d>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+d+" with playlist age: "+r.age),d=0;else{h=Math.floor(d/r.targetduration);s+=h,void 0!==l&&(l+=Math.round(d%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+c.toFixed(2)+"s goal: "+d+" skip sn "+h+" to part "+l)}r.tuneInGoal=d}if(o=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l),u||!f)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(r,t.deliveryDirectives,s,l);i=(0,p.computeReloadInterval)(r,a);void 0!==s&&r.canBlockReload&&(i-=r.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(i)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(o)},i)}}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,i,n){var r=(0,l.getSkipValue)(e,i);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=l.HlsSkip.No),new l.HlsUrlParameters(i,n,r)},t.retryLoadingOrFail=function(e){var t=this,i=this.hls.config,n=this.retryCount<i.levelLoadingMaxRetry;if(n)if(this.retryCount++,-1<e.details.indexOf("LoadTimeOut")&&null!=(r=e.context)&&r.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var r=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return t.loadPlaylist()},r),this.warn("retry playlist loading #"+this.retryCount+" in "+r+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return n},s);function s(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=n.logger.log.bind(n.logger,t+":"),this.warn=n.logger.warn.bind(n.logger,t+":"),this.hls=e}},"./src/controller/base-stream-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{State:()=>b,default:()=>k});var l=i("./src/polyfills/number.ts"),t=i("./src/task-loop.ts"),u=i("./src/controller/fragment-tracker.ts"),s=i("./src/utils/buffer-helper.ts"),r=i("./src/utils/logger.ts"),d=i("./src/events.ts"),n=i("./src/errors.ts"),a=i("./src/types/transmuxer.ts"),o=i("./src/utils/mp4-tools.ts"),c=i("./src/utils/discontinuities.ts"),h=i("./src/controller/fragment-finders.ts"),f=i("./src/controller/level-helper.ts"),p=i("./src/loader/fragment-loader.ts"),g=i("./src/crypt/decrypter.ts"),v=i("./src/utils/time-ranges.ts"),m=i("./src/types/loader.ts");function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T,b={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},k=(T=t.default,i=T,(t=S).prototype=Object.create(i.prototype),E(t.prototype.constructor=t,i),(t=S.prototype).doTick=function(){this.onTickEnd()},t.onTickEnd=function(){},t.startLoad=function(e){},t.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=b.STOPPED},t._streamEnded=function(e,t){var i=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&i&&this.media&&i.sn>=t.endSN&&!e.nextStart){e=t.partList;if(null!=e&&e.length)return t=e[e.length-1],s.BufferHelper.isBuffered(this.media,t.start+t.duration/2);e=n.getState(i);return e===u.FragmentState.PARTIAL||e===u.FragmentState.OK}return!1},t.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media,t=(this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),this.config);this.levels&&t.autoStartLoad&&this.state===b.STOPPED&&this.startLoad(t.startPosition)},t.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},t.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,n=this.mediaBuffer,r=this.state,a=i?i.currentTime:0,n=s.BufferHelper.bufferInfo(n||i,a,e.maxBufferHole);if(this.log("media seeking to "+((0,l.isFiniteNumber)(a)?a.toFixed(3):a)+", state: "+r),r===b.ENDED)this.resetLoadingState();else if(t){r=e.maxFragLookUpTolerance,e=t.start-r,r=t.start+t.duration+r;if(!n.len||r<n.start||e>n.end){r=r<a;(a<e||r)&&(r&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}}i&&(this.lastCurrentTime=a),this.loadedmetadata||n.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},t.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.onKeyLoaded=function(e,t){if(this.state===b.KEY_LOADING&&t.frag===this.fragCurrent&&this.levels){this.state=b.IDLE;var i=this.levels[t.frag.level].details;i&&this.loadFragment(t.frag,i,t.frag.start)}},t.onLevelSwitching=function(e,t){this.fragLoadError=0},t.onHandlerDestroying=function(){this.stopLoad(),T.prototype.onHandlerDestroying.call(this)},t.onHandlerDestroyed=function(){this.state=b.STOPPED,this.hls.off(d.Events.KEY_LOADED,this.onKeyLoaded,this),this.hls.off(d.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,T.prototype.onHandlerDestroyed.call(this)},t.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=b.KEY_LOADING,this.fragCurrent=e,this.hls.trigger(d.Events.KEY_LOADING,{frag:e})},t.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},t._loadFragForPlayback=function(i,e,t){var n=this;this._doFragLoad(i,e,t,function(e){if(n.fragContextChanged(i))return n.warn("Fragment "+i.sn+(e.part?" p: "+e.part.index:"")+" of level "+i.level+" was dropped during download."),void n.fragmentTracker.removeFragment(i);i.stats.chunkCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){n.fragLoadError=0;var t=n.state;n.fragContextChanged(i)?t!==b.FRAG_LOADING&&(n.fragCurrent||t!==b.PARSING)||(n.fragmentTracker.removeFragment(i),n.state=b.IDLE):("payload"in e&&(n.log("Loaded fragment "+i.sn+" of level "+i.level),n.hls.trigger(d.Events.FRAG_LOADED,e)),n._handleFragmentLoadComplete(e))}}).catch(function(e){n.state!==b.STOPPED&&n.state!==b.ERROR&&(n.warn(e),n.resetFragmentLoading(i))})},t.flushMainBuffer=function(e,t,i){if(void 0===i&&(i=null),e-t){e={startOffset:e,endOffset:t,type:i};this.fragLoadError=0,this.hls.trigger(d.Events.BUFFER_FLUSHING,e)}},t._loadInitSegment=function(a){var s=this;this._doFragLoad(a).then(function(e){if(e&&!s.fragContextChanged(a)&&s.levels)return e;throw new Error("init load aborted")}).then(function(i){var n,r=s.hls,e=i.payload,t=a.decryptdata;return e&&0<e.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method?(n=self.performance.now(),s.decrypter.webCryptoDecrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).then(function(e){var t=self.performance.now();return r.trigger(d.Events.FRAG_DECRYPTED,{frag:a,payload:e,stats:{tstart:n,tdecrypt:t}}),i.payload=e,i})):i}).then(function(e){var t=s.fragCurrent,i=s.hls,n=s.levels;if(!n)throw new Error("init load aborted, missing levels");n[a.level].details;n=a.stats;s.state=b.IDLE,s.fragLoadError=0,a.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),e.frag===t&&i.trigger(d.Events.FRAG_BUFFERED,{stats:n,frag:t,part:null,id:a.type}),s.tick()}).catch(function(e){s.state!==b.STOPPED&&s.state!==b.ERROR&&(s.warn(e),s.resetFragmentLoading(a))})},t.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},t.fragBufferedComplete=function(e,t){var i=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+(i?v.default.toString(s.BufferHelper.getBuffered(i)):"(detached)")),this.state=b.IDLE,i&&(!this.loadedmetadata&&e.type==m.PlaylistLevelType.MAIN&&i.buffered.length&&(null==(t=this.fragCurrent)?void 0:t.sn)===(null==(e=this.fragPrevious)?void 0:e.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},t.seekToStartPos=function(){},t._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var i=e.frag,n=e.part,e=e.partsLoaded,e=!e||0===e.length||e.some(function(e){return!e}),i=new a.ChunkMetadata(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!e);t.flush(i)}},t._handleFragmentLoadProgress=function(e){},t._doFragLoad=function(e,t,i,n){var r=this;if(void 0===i&&(i=null),!this.levels)throw new Error("frag load aborted, missing levels");if(i=Math.max(e.start,i||0),this.config.lowLatencyMode&&t){var a=t.partList;if(a&&n){i>e.end&&t.fragmentHint&&(e=t.fragmentHint);var s,o=this.getNextPart(a,e,i);if(-1<o)return s=a[o],this.log("Loading part sn: "+e.sn+" p: "+s.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(a.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=s.start+s.duration,this.state=b.FRAG_LOADING,this.hls.trigger(d.Events.FRAG_LOADING,{frag:e,part:a[o],targetBufferTime:i}),this.doFragPartsLoad(e,a,o,n).catch(function(e){return r.handleFragLoadError(e)});if(!e.url||this.loadedEndOfParts(a,i))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),(0,l.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=b.FRAG_LOADING,this.hls.trigger(d.Events.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragmentLoader.load(e,n).catch(function(e){return r.handleFragLoadError(e)})},t.doFragPartsLoad=function(o,l,t,u){var c=this;return new Promise(function(a,e){var s=[];!function i(n){var r=l[n];c.fragmentLoader.loadPart(o,r,u).then(function(e){var t=(s[r.index]=e).part,e=(c.hls.trigger(d.Events.FRAG_LOADED,e),l[n+1]);if(!e||e.fragment!==o)return a({frag:o,part:t,partsLoaded:s});i(n+1)}).catch(e)}(t)})},t.handleFragLoadError=function(e){e=e.data;return e&&e.details===n.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(d.Events.ERROR,e),null},t._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===b.PARSING){var i=t.frag,n=t.part,t=t.level,r=self.performance.now();i.stats.parsing.end=r,n&&(n.stats.parsing.end=r),this.updateLevelTiming(i,n,t,e.partial)}else this.fragCurrent||(this.state=b.IDLE)},t.getCurrentContext=function(e){var t=this.levels,i=e.level,n=e.sn,e=e.part;if(!t||!t[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk will not be buffered."),null;t=t[i],i=-1<e?(0,f.getPartWith)(t,n,e):null,e=i?i.fragment:(0,f.getFragmentWithSN)(t,n,this.fragCurrent);return e?{frag:e,part:i,level:t}:null},t.bufferFragmentData=function(e,t,i,n){if(e&&this.state===b.PARSING){var r=e.data1,a=e.data2,s=r;if((s=r&&a?(0,o.appendUint8Array)(r,a):s)&&s.length){r={type:e.type,frag:t,part:i,chunkMeta:n,parent:t.type,data:s};this.hls.trigger(d.Events.BUFFER_APPENDING,r),e.dropped&&e.independent&&!i&&this.flushBufferGap(t)}}},t.flushBufferGap=function(e){var t=this.media;if(t)if(s.BufferHelper.isBuffered(t,t.currentTime)){var i=t.currentTime,t=s.BufferHelper.bufferInfo(t,i,0),n=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),t=Math.max(Math.min(e.start-n,t.end-n),i+n);e.start-t>n&&this.flushMainBuffer(t,e.start)}else this.flushMainBuffer(0,e.start)},t.getFwdBufferInfo=function(e,t){var i=this.config,n=this.getLoadPosition();if(!(0,l.isFiniteNumber)(n))return null;var r=s.BufferHelper.bufferInfo(e,n,i.maxBufferHole);if(0===r.len&&void 0!==r.nextStart){t=this.fragmentTracker.getBufferedFrag(n,t);if(t&&r.nextStart<t.end)return s.BufferHelper.bufferInfo(e,n,Math.max(r.nextStart,i.maxBufferHole))}return r},t.getMaxBufferLength=function(e){var t=this.config,e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength;return Math.min(e,t.maxMaxBufferLength)},t.reduceMaxBufferLength=function(e){var t=this.config,e=e||t.maxBufferLength;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,a=this.config,s=i[0].start;if(t.live){var o=a.initialLiveManifestSize;if(n<o)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+o+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,i),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=s&&(r=i[0]);r||(n=a.lowLatencyMode?t.partEnd:t.fragmentEnd,r=this.getFragmentAtPosition(e,n,t));return this.mapToInitFragWhenRequired(r)},t.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},t.getNextPart=function(e,t,i){for(var n=-1,r=!1,a=!0,s=0,o=e.length;s<o;s++){var l=e[s],a=a&&!l.independent;if(-1<n&&i<l.start)break;var u=l.loaded;!u&&(r||l.independent||a)&&l.fragment===t&&(n=s),r=u}return n},t.loadedEndOfParts=function(e,t){e=e[e.length-1];return e&&t>e.start&&e.loaded},t.getInitialLiveFragment=function(e,t){var i=this.fragPrevious,n=null;if(i){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),n=(0,h.findFragmentByPDT)(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){r=t[r-e.startSN];i.cc===r.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(n=r).sn)}n||(n=(0,h.findFragWithCC)(t,i.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn)}}else{r=this.hls.liveSyncPosition;null!==r&&(n=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},t.getFragmentAtPosition=function(e,t,i){var n=this.config,r=this.fragPrevious,a=i.fragments,s=i.endSN,o=i.fragmentHint,l=n.maxFragLookUpTolerance,n=!!(n.lowLatencyMode&&i.partList&&o);if(o=(n&&o&&!this.bitrateTest&&(a=a.concat(o),s=o.sn),e<t)?(0,h.findFragmentByPTS)(r,a,e,t-l<e?0:l):a[a.length-1]){t=o.sn-i.startSN;if((r=this.fragmentTracker.getState(o)===u.FragmentState.OK?o:r)&&o.sn===r.sn&&!n&&r&&o.level===r.level){e=a[1+t];o=o.sn<s&&this.fragmentTracker.getState(e)!==u.FragmentState.OK?(this.log("SN "+o.sn+" just loaded, load next one: "+e.sn),e):null}}return o},t.synchronizeToLiveEdge=function(e){var t=this.config,i=this.media;if(i){var n=this.hls.liveSyncPosition,r=i.currentTime,a=e.fragments[0].start,s=e.edge,a=r>=a-t.maxFragLookUpTolerance&&r<=s;if(null!==n&&i.duration>n&&(r<n||!a)){t=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!a&&i.readyState<4||r<s-t)&&(this.loadedmetadata||(this.nextLoadPosition=n),i.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+n.toFixed(3)),i.currentTime=n))}}},t.alignPlaylists=function(e,t){var i=this.levels,n=this.levelLastLoaded,r=this.fragPrevious,i=null!==n?i[n]:null,n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var a=e.fragments[0].start,s=!t,o=e.alignedSliding&&(0,l.isFiniteNumber)(a);if(s||!o&&!a){(0,c.alignStream)(r,i,e);s=e.fragments[0].start;return this.log("Live playlist sliding: "+s.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(r?r.sn:"na")+" fragments: "+n),s}return a},t.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},t.setStartPosition=function(e,t){var i=this.startPosition;if(-1===(i=i<t?-1:i)||-1===this.lastCurrentTime){var n=e.startTimeOffset;(0,l.isFiniteNumber)(n)?(i=t+n,n<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log("Start time offset "+n+" found in playlist, adjust startPosition to "+i),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},t.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},t.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},t.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===b.FRAG_LOADING_WAITING_RETRY)||(this.state=b.IDLE)},t.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var i=t.frag;if(i&&i.type===e){this.fragCurrent;var n=this.config;if(this.fragLoadError+1<=n.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);n=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" failed to load, retrying in "+n+"ms"),this.retryDate=self.performance.now()+n,this.fragLoadError++,this.state=b.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===m.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=b.IDLE):(r.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=b.ERROR)}}},t.afterBufferFlushed=function(e,t,i){if(e){e=s.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,e,i),this.state===b.ENDED&&this.resetLoadingState()}},t.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=b.IDLE},t.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;e=this.levels?this.levels[e].details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},t.updateLevelTiming=function(r,e,a,s){var o=this,l=a.details;Object.keys(r.elementaryStreams).reduce(function(e,t){var i=r.elementaryStreams[t];if(i){var n=i.endPTS-i.startPTS;if(n<=0)return o.warn("Could not parse fragment "+r.sn+" "+t+" duration reliably ("+n+")"),e||!1;n=s?0:(0,f.updateFragPTSDTS)(l,r,i.startPTS,i.endPTS,i.startDTS,i.endDTS);return o.hls.trigger(d.Events.LEVEL_PTS_UPDATED,{details:l,level:a,drift:n,type:t,frag:r,start:i.startPTS,end:i.endPTS}),!0}return e},!1)||(this.warn("Found no media in fragment "+r.sn+" of level "+a.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=b.PARSED,this.hls.trigger(d.Events.FRAG_PARSED,{frag:r,part:e})},t.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},y((i=S).prototype,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),Object.defineProperty(i,"prototype",{writable:!1}),S);function S(e,t,i){var n;return(n=T.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=b.STOPPED,n.media=null,n.mediaBuffer=null,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=i,n.log=r.logger.log.bind(r.logger,i+":"),n.warn=r.logger.warn.bind(r.logger,i+":"),n.hls=e,n.fragmentLoader=new p.default(e.config),n.fragmentTracker=t,n.config=e.config,n.decrypter=new g.default(e,e.config),e.on(d.Events.KEY_LOADED,n.onKeyLoaded,A(n)),e.on(d.Events.LEVEL_SWITCHING,n.onLevelSwitching,A(n)),n}},"./src/controller/buffer-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var l=i("./src/polyfills/number.ts"),g=i("./src/events.ts"),v=i("./src/utils/logger.ts"),m=i("./src/errors.ts"),y=i("./src/utils/buffer-helper.ts"),t=i("./src/utils/mediasource-helper.ts"),s=i("./src/loader/fragment.ts"),n=i("./src/controller/buffer-operation-queue.ts"),r=(0,t.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,a=((i=o.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},i.destroy=function(){this.unregisterListeners(),this.details=null},i.registerListeners=function(){var e=this.hls;e.on(g.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(g.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(g.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(g.Events.BUFFER_RESET,this.onBufferReset,this),e.on(g.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(g.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(g.Events.BUFFER_EOS,this.onBufferEos,this),e.on(g.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(g.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(g.Events.FRAG_PARSED,this.onFragParsed,this),e.on(g.Events.FRAG_CHANGED,this.onFragChanged,this)},i.unregisterListeners=function(){var e=this.hls;e.off(g.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(g.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(g.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(g.Events.BUFFER_RESET,this.onBufferReset,this),e.off(g.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(g.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(g.Events.BUFFER_EOS,this.onBufferEos,this),e.off(g.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(g.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(g.Events.FRAG_PARSED,this.onFragParsed,this),e.off(g.Events.FRAG_CHANGED,this.onFragChanged,this)},i._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new n.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},i.onManifestParsed=function(e,t){var i=2;(!t.audio||t.video)&&t.altAudio||(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.details=null,v.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(e,t){t=this.media=t.media;if(t&&r){var i=this.mediaSource=new r;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(i),this._objectUrl=t.src}},i.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(v.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){v.logger.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):v.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(g.Events.MEDIA_DETACHED,void 0)},i.onBufferReset=function(){var i=this;this.getSourceBufferTypes().forEach(function(t){var e=i.sourceBuffer[t];try{e&&(i.removeBufferListeners(t),i.mediaSource&&i.mediaSource.removeSourceBuffer(e),i.sourceBuffer[t]=void 0)}catch(e){v.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}}),this._initSourceBuffer()},i.onBufferCodecs=function(e,u){var c=this,d=this.getSourceBufferTypes().length;Object.keys(u).forEach(function(e){if(d){var t=c.tracks[e];if(t&&"function"==typeof t.buffer.changeType){var i=u[e],n=i.id,r=i.codec,a=i.levelCodec,s=i.container,i=i.metadata,o=(t.levelCodec||t.codec).replace(h,"$1"),l=(a||r).replace(h,"$1");o!==l&&(c.appendChangeType(e,s+";codecs="+(a||r)),v.logger.log("[buffer-controller]: switching codec "+o+" to "+l),c.tracks[e]={buffer:t.buffer,codec:r,container:s,levelCodec:a,metadata:i,id:n})}}else c.pendingTracks[e]=u[e]}),d||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.appendChangeType=function(t,i){var n=this,r=this.operationQueue;r.append({execute:function(){var e=n.sourceBuffer[t];e&&(v.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+i),e.changeType(i)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){v.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}},t)},i.onBufferAppending=function(e,t){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,s=t.data,o=t.type,l=t.frag,u=t.part,c=t.chunkMeta,d=c.buffering[o],t=self.performance.now(),h=(d.start=t,l.stats.buffering),f=u?u.stats.buffering:null,t=(0===h.start&&(h.start=t),f&&0===f.start&&(f.start=t),a.audio),p="audio"===o&&1===c.id&&"audio/mpeg"===(null==t?void 0:t.container);n.append({execute:function(){if(d.executeStart=self.performance.now(),p){var e=r.sourceBuffer[o];if(e){var t=l.start-e.timestampOffset;.1<=Math.abs(t)&&(v.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+l.start+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=l.start)}}r.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var e,t=self.performance.now(),i=(d.executeEnd=d.end=t,0===h.first&&(h.first=t),f&&0===f.first&&(f.first=t),r.sourceBuffer),n={};for(e in i)n[e]=y.BufferHelper.getBuffered(i[e]);r.appendError=0,r.hls.trigger(g.Events.BUFFER_APPENDED,{type:o,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:n})},onError:function(e){v.logger.error("[buffer-controller]: Error encountered while trying to append to the "+o+" SourceBuffer",e);var t={type:m.ErrorTypes.MEDIA_ERROR,parent:l.type,details:m.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=m.ErrorDetails.BUFFER_FULL_ERROR:(r.appendError++,t.details=m.ErrorDetails.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(v.logger.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,i.stopLoad())),i.trigger(g.Events.ERROR,t)}},o)},i.onBufferFlushing=function(e,i){function t(t){return{execute:n.removeExecutor.bind(n,t,i.startOffset,i.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(g.Events.BUFFER_FLUSHED,{type:t})},onError:function(e){v.logger.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}}var n=this,r=this.operationQueue;i.type?r.append(t(i.type),i.type):this.getSourceBufferTypes().forEach(function(e){r.append(t(e),e)})},i.onFragParsed=function(e,t){var i=this,n=t.frag,r=t.part,t=[],a=(r||n).elementaryStreams;a[s.ElementaryStreamTypes.AUDIOVIDEO]?t.push("audiovideo"):(a[s.ElementaryStreamTypes.AUDIO]&&t.push("audio"),a[s.ElementaryStreamTypes.VIDEO]&&t.push("video")),0===t.length&&v.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var e=self.performance.now(),e=(n.stats.buffering.end=e,r&&(r.stats.buffering.end=e),(r||n).stats);i.hls.trigger(g.Events.FRAG_BUFFERED,{frag:n,part:r,stats:e,id:n.type})},t)},i.onFragChanged=function(e,t){this.flushBackBuffer()},i.onBufferEos=function(e,n){var r=this;this.getSourceBufferTypes().reduce(function(e,t){var i=r.sourceBuffer[t];return n.type&&n.type!==t||i&&!i.ended&&(i.ended=!0,v.logger.log("[buffer-controller]: "+t+" sourceBuffer now EOS")),e&&!(i&&!i.ended)},!0)&&this.blockBuffers(function(){var e=r.mediaSource;e&&"open"===e.readyState&&e.endOfStream()})},i.onLevelUpdated=function(e,t){t=t.details;t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},i.flushBackBuffer=function(){var i=this.hls,n=this.details,e=this.media,r=this.sourceBuffer;if(e&&null!==n){var t=this.getSourceBufferTypes();if(t.length){var a=n.live&&null!==i.config.liveBackBufferLength?i.config.liveBackBufferLength:i.config.backBufferLength;if((0,l.isFiniteNumber)(a)&&!(a<0)){var e=e.currentTime,s=n.levelTargetDuration,a=Math.max(a,s),o=Math.floor(e/s)*s-a;t.forEach(function(e){var t=r[e];if(t){t=y.BufferHelper.getBuffered(t);0<t.length&&o>t.start(0)&&(i.trigger(g.Events.BACK_BUFFER_REACHED,{bufferEnd:o}),n.live&&i.trigger(g.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:o}),i.trigger(g.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:o,type:e}))}})}}}},i.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,i=this.media,n=this.mediaSource,r=e.fragments[0].start+e.totalduration,i=i.duration,a=(0,l.isFiniteNumber)(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(v.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(a<r&&i<r||!(0,l.isFiniteNumber)(i))&&(v.logger.log("[buffer-controller]: Updating Media Source duration to "+r.toFixed(3)),n.duration=r)}},i.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){i=Math.max(0,i[0].start),e=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,e)}},i.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;if(n&&!e||2===n){this.createSourceBuffers(i),this.pendingTracks={};e=this.getSourceBufferTypes();0===e.length?this.hls.trigger(g.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"}):e.forEach(function(e){t.executeNext(e)})}},i.createSourceBuffers=function(e){var t=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var n,r=0;for(n in e)if(!t[n]){var a=e[n];if(!a)throw Error("source buffer exists for track "+n+", however track does not");var s=a.levelCodec||a.codec,o=a.container+";codecs="+s;v.logger.log("[buffer-controller]: creating sourceBuffer("+o+")");try{var l=t[n]=i.addSourceBuffer(o),u=n;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:s,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id},r++}catch(e){v.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(g.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:o})}}r&&this.hls.trigger(g.Events.BUFFER_CREATED,{tracks:this.tracks})},i._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},i._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},i._onSBUpdateError=function(e,t){v.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(g.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});e=this.operationQueue.current(e);e&&e.onError(t)},i.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,a=this.operationQueue,s=this.sourceBuffer[e];if(!n||!r||!s)return v.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);n=(0,l.isFiniteNumber)(n.duration)?n.duration:1/0,r=(0,l.isFiniteNumber)(r.duration)?r.duration:1/0,t=Math.max(0,t),i=Math.min(i,n,r);t<i?(v.logger.log("[buffer-controller]: Removing ["+t+","+i+"] from the "+e+" SourceBuffer"),s.remove(t,i)):a.shiftAndExecuteNext(e)},i.appendExecutor=function(e,t){var i=this.operationQueue,n=this.sourceBuffer[t];if(!n)return v.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(t);n.ended=!1,n.appendBuffer(e)},i.blockBuffers=function(e,t){var i=this;if(!(t=void 0===t?this.getSourceBufferTypes():t).length)return v.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var n=this.operationQueue,r=t.map(function(e){return n.appendBlocker(e)});Promise.all(r).then(function(){e(),t.forEach(function(e){var t=i.sourceBuffer[e];t&&t.updating||n.shiftAndExecuteNext(e)})})},i.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},i.addBufferListener=function(e,t,i){var n=this.sourceBuffer[e];if(n){i=i.bind(this,e);this.listeners[e].push({event:t,listener:i}),n.addEventListener(t,i)}},i.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},o);function o(e){var n=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=n.hls,t=n.media,i=n.mediaSource;v.logger.log("[buffer-controller]: Media source opened"),t&&(n.updateMediaElementDuration(),e.trigger(g.Events.MEDIA_ATTACHED,{media:t})),i&&i.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},this._onMediaSourceClose=function(){v.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){v.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}},"./src/controller/buffer-operation-queue.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var a=i("./src/utils/logger.ts"),n=((t=r.prototype).append=function(e,t){var i=this.queues[t];i.push(e),1===i.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,i=new Promise(function(e){t=e}),n={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),i},t.executeNext=function(e){var t=this.buffers,i=this.queues,n=t[e],i=i[e];if(i.length){var r=i[0];try{r.execute()}catch(t){a.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),r.onError(t),n&&n.updating||(i.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},r);function r(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}},"./src/controller/cap-level-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var n=i("./src/events.ts");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t=a.prototype).setStreamController=function(e){this.streamController=e},t.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},t.registerListeners=function(){var e=this.hls;e.on(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListener=function(){var e=this.hls;e.off(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.onFpsDropLevelCapping=function(e,t){a.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},t.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},t.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onMediaDetaching=function(){this.stopCapping()},t.detectPlayerSize=function(){if(this.media&&0<this.mediaHeight&&0<this.mediaWidth){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.getMaxLevel=function(i){var n=this,e=this.hls.levels;if(!e.length)return-1;e=e.filter(function(e,t){return a.isLevelAllowed(t,n.restrictedLevels)&&t<=i});return this.clientRect=null,a.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},t.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},t.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t},a.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},a.getMaxLevelByMediaSize=function(e,t,i){if(!e||!e.length)return-1;for(var n,r=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=i)&&(!(n=e[a+1])||s.width!==n.width||s.height!==n.height)){r=a;break}}return r},r((t=a).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),Object.defineProperty(t,"prototype",{writable:!1});function a(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}const s=a},"./src/controller/cmcd-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var n=i("./src/events.ts"),s=i("./src/types/cmcd.ts"),r=i("./src/utils/buffer-helper.ts"),o=i("./src/utils/logger.ts");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function u(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return c(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}(t=f.prototype).registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(n.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(n.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var i;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer},t.createData=function(){var e;return{v:s.CMCDVersion,sf:s.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(e,t){d(t=void 0===t?{}:t,this.createData());var i=t.ot===s.CMCDObjectType.INIT||t.ot===s.CMCDObjectType.VIDEO||t.ot===s.CMCDObjectType.MUXED;if(this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){i=f.toHeaders(t);Object.keys(i).length&&(e.headers||(e.headers={}),d(e.headers,i))}else{i=f.toQuery(t);i&&(e.url=f.appendQueryToUri(e.url,i))}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?s.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?s.CMCDObjectType.INIT:"audio"===t?s.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?s.CMCDObjectType.VIDEO:s.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){for(var t=0,i=this.hls,n=u(e===s.CMCDObjectType.AUDIO?i.audioTracks:(e=-1<(e=i.maxAutoLevel)?e+1:i.levels.length,i.levels.slice(0,e)));!(r=n()).done;){var r=r.value;r.bitrate>t&&(t=r.bitrate)}return 0<t?t:NaN},t.getBufferLength=function(e){var t=this.hls.media,e=e===s.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return e&&t?1e3*r.BufferHelper.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,n=this.applyPlaylistData,t=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,i){n(e),this.loader.load(e,t,i)},l(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new t(e)}},t.createFragmentLoader=function(){var e=this.config.fLoader,n=this.applyFragmentData,t=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,i){n(e),this.loader.load(e,t,i)},l(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new t(e)}},f.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},f.serialize=function(e){for(var t=[],i=function(e){return Math.round(e)},n=function(e){return 100*i(e/100)},r={br:i,d:i,bl:n,dl:n,mtp:n,nor:function(e){return encodeURIComponent(e)},rtp:n,tb:i},a=u(Object.keys(e||{}).sort());!(s=a()).done;){var s=s.value,o=e[s];if((l=o,!Number.isNaN(l)&&null!=l&&""!==l&&!1!==l)&&!("v"===s&&1===o||"pr"==s&&1===o)){var l=r[s],l=typeof(o=l?l(o):o),l="ot"===s||"sf"===s||"st"===s?s+"="+o:"boolean"==l?s:"number"==l?s+"="+o:s+"="+JSON.stringify(o);t.push(l)}}return t.join(",")},f.toHeaders=function(e){for(var t={},i=["Object","Request","Session","Status"],n=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=0,s=Object.keys(e);a<s.length;a++){var o=s[a];n[null!=r[o]?r[o]:1][o]=e[o]}for(var l=0;l<n.length;l++){var u=f.serialize(n[l]);u&&(t["CMCD-"+i[l]]=u)}return t},f.toQuery=function(e){return"CMCD="+encodeURIComponent(f.serialize(e))},f.appendQueryToUri=function(e,t){if(!t)return e;var i=e.includes("?")?"&":"?";return e+i+t};var h=f;function f(e){var a=this,e=(this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){a.initialized&&(a.starved=!0),a.buffering=!0},this.onPlaying=function(){a.initialized||(a.initialized=!0),a.buffering=!1},this.applyPlaylistData=function(e){try{a.apply(e,{ot:s.CMCDObjectType.MANIFEST,su:!a.initialized})}catch(e){o.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=a.hls.levels[t.level],n=a.getObjectType(t),r={d:1e3*t.duration,ot:n};n!==s.CMCDObjectType.VIDEO&&n!==s.CMCDObjectType.AUDIO&&n!=s.CMCDObjectType.MUXED||(r.br=i.bitrate/1e3,r.tb=a.getTopBandwidth(n)/1e3,r.bl=a.getBufferLength(n)),a.apply(e,r)}catch(e){o.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=e,this.config=e.config),t=e.cmcd;null!=t&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=t.sessionId||f.uuid(),this.cid=t.contentId,this.useHeaders=!0===t.useHeaders,this.registerListeners())}},"./src/controller/eme-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var s=i("./src/events.ts"),o=i("./src/errors.ts"),l=i("./src/utils/logger.ts"),u=i("./src/utils/mediakeys-helper.ts");function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t=r.prototype).destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},t._registerListeners=function(){this.hls.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t._unregisterListeners=function(){this.hls.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(s.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t.getLicenseServerUrl=function(e){if(e===u.KeySystems.WIDEVINE)if(this._widevineLicenseUrl)return this._widevineLicenseUrl;throw new Error('no license server URL configured for key-system "'+e+'"')},t._attemptKeySystemAccess=function(t,e,s){var i=this,e=function(e,t,i){if(e===u.KeySystems.WIDEVINE)return n=s,r=i,a={audioCapabilities:[],videoCapabilities:[]},t.forEach(function(e){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})}),n.forEach(function(e){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})}),[a];var n,r,a;throw new Error("Unknown key-system: "+e)}(t,e,this._drmSystemOptions),e=(l.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,e));this.mediaKeysPromise=e.then(function(e){return i._onMediaKeySystemAccessObtained(t,e)}),e.catch(function(e){l.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},t._onMediaKeySystemAccessObtained=function(t,e){var i=this,n=(l.logger.log('Access for key-system "'+t+'" obtained'),{mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t}),r=(this._mediaKeysList.push(n),Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return n.mediaKeys=e,l.logger.log('Media-keys created for key-system "'+t+'"'),i._onMediaKeysCreated(),e}));return r.catch(function(e){l.logger.error("Failed to create media-keys:",e)}),r},t._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},t._onNewMediaKeySession=function(t){var i=this;l.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){i._onKeySessionMessage(t,e.message)},!1)},t._onKeySessionMessage=function(t,e){l.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){l.logger.log("Received license data (length: "+(e&&e.byteLength)+"), updating key-session"),t.update(e).catch(function(e){l.logger.warn("Updating key-session failed: "+e)})})},t.onMediaEncrypted=function(t){var i=this;if(l.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});function e(e){i._media&&(i._attemptSetMediaKeys(e),i._generateRequestWithPreferredKeySession(t.initDataType,t.initData))}this.mediaKeysPromise.then(e).catch(e)},t._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},t._generateRequestWithPreferredKeySession=function(e,t){var i=this,n=this._mediaKeysList[0];if(!n)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var r=n.mediaKeysSession;if(!r)return l.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return l.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});l.logger.log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,r.generateRequest(e,t).then(function(){l.logger.debug("Key-session generation succeeded")}).catch(function(e){l.logger.error("Error generating key-session request:",e),i.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t._createLicenseXhr=function(e,t,i){var n=new XMLHttpRequest,t=(n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,i),this._licenseXhrSetup);if(t)try{t.call(this.hls,n,e),t=void 0}catch(e){l.logger.error(e)}try{n.readyState||n.open("POST",e,!0),t&&t.call(this.hls,n,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return n},t._onLicenseRequestReadyStageChange=function(e,t,i,n){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,l.logger.log("License request succeeded");var r=e.response,a=this._licenseResponseCallback;if(a)try{r=a.call(this.hls,e,t)}catch(e){l.logger.error(e)}n(r)}else if(l.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});else{a=3-this._requestLicenseFailureCount+1;l.logger.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(i,n)}},t._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===u.KeySystems.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},t._requestLicense=function(e,t){l.logger.log("Requesting content license for key-system");var i=this._mediaKeysList[0];if(!i)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(i.mediaKeySystemDomain),r=this._createLicenseXhr(n,e,t),a=(l.logger.log("Sending license request to URL: "+n),this._generateLicenseRequestChallenge(i,e));r.send(a)}catch(e){l.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(s.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},t.onMediaAttached=function(e,t){if(this._emeEnabled){t=t.media;(this._media=t).addEventListener("encrypted",this._onMediaEncrypted)}},t.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},t.onManifestParsed=function(e,t){if(this._emeEnabled){var i=t.levels.map(function(e){return e.audioCodec}).filter(function(e){return!!e}),t=t.levels.map(function(e){return e.videoCodec}).filter(function(e){return!!e});this._attemptKeySystemAccess(u.KeySystems.WIDEVINE,i,t)}},n((t=r).prototype,[{key:"requestMediaKeySystemAccess",get:function(){if(this._requestMediaKeySystemAccess)return this._requestMediaKeySystemAccess;throw new Error("No requestMediaKeySystemAccess function configured")}}]),Object.defineProperty(t,"prototype",{writable:!1});function r(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}const a=r},"./src/controller/fps-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var l=i("./src/events.ts"),u=i("./src/utils/logger.ts");(t=n.prototype).setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(l.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(l.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var i=this.hls.config;if(i.capLevelOnFPSDrop){t=t.media instanceof self.HTMLVideoElement?t.media:null;(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,s=t-this.lastDecodedFrames,r=1e3*a/r,o=this.hls;if(o.trigger(l.Events.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:i}),0<r&&a>o.config.fpsDroppedMonitoringThreshold*s){r=o.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+r),0<r&&(-1===o.autoLevelCapping||o.autoLevelCapping>=r)&&(o.trigger(l.Events.FPS_DROP_LEVEL_CAPPING,{level:--r,droppedLevel:o.currentLevel}),o.autoLevelCapping=r,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)};function n(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}const r=n},"./src/controller/fragment-finders.ts":(e,t,i)=>{i.r(t),i.d(t,{findFragWithCC:()=>function(e,t){return s.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},findFragmentByPDT:()=>function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!(0,a.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var n=0;n<e.length;++n){var r=e[n];if(l(t,i,r))return r}return null},findFragmentByPTS:()=>function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=null;return(e?r=t[e.sn-t[0].sn+1]||null:0===i&&0===t[0].start&&(r=t[0]),!r||0!==o(i,n,r))&&s.default.search(t,o.bind(null,i,n))||r},fragmentWithinToleranceTest:()=>o,pdtWithinToleranceTest:()=>l});var a=i("./src/polyfills/number.ts"),s=i("./src/utils/binary-search.ts");function o(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,i.duration+(i.deltaPTS||0));return i.start+i.duration-t<=e?1:i.start-t>e&&i.start?-1:0}function l(e,t,i){t=1e3*Math.min(t,i.duration+(i.deltaPTS||0));return(i.endProgramDateTime||0)-t>e}},"./src/controller/fragment-tracker.ts":(e,t,i)=>{i.r(t),i.d(t,{FragmentState:()=>n,FragmentTracker:()=>a});var n,r=i("./src/events.ts"),o=i("./src/types/loader.ts"),a=((t=n=n||{}).NOT_LOADED="NOT_LOADED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK",(i=s.prototype)._registerListeners=function(){var e=this.hls;e.on(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this)},i._unregisterListeners=function(){var e=this.hls;e.off(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this)},i.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},i.getAppendedFrag=function(e,t){if(t===o.PlaylistLevelType.MAIN){var i=this.activeFragment,n=this.activeParts;if(!i)return null;if(n)for(var r=n.length;r--;){var a=n[r],s=a?a.end:i.appendedPTS;if(a.start<=e&&void 0!==s&&e<=s)return 9<r&&(this.activeParts=n.slice(r-9)),a}else if(i.start<=e&&void 0!==i.appendedPTS&&e<=i.appendedPTS)return i}return this.getBufferedFrag(e,t)},i.getBufferedFrag=function(e,t){for(var i=this.fragments,n=Object.keys(i),r=n.length;r--;){var a=i[n[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){a=a.body;if(a.start<=e&&e<=a.end)return a}}return null},i.detectEvictedFragments=function(i,n,r){var a=this;Object.keys(this.fragments).forEach(function(e){var t=a.fragments[e];if(t)if(t.buffered){e=t.range[i];e&&e.time.some(function(e){e=!a.isTimeBuffered(e.startPTS,e.endPTS,n);return e&&a.removeFragment(t.body),e})}else t.body.type===r&&a.removeFragment(t.body)})},i.detectPartialFragments=function(e){var n=this,r=this.timeRanges,a=e.frag,s=e.part;if(r&&"initSegment"!==a.sn){var e=u(a),o=this.fragments[e];o&&(Object.keys(r).forEach(function(e){var t=a.elementaryStreams[e];if(t){var i=r[e],t=null!==s||!0===t.partial;o.range[e]=n.getBufferedTimes(a,s,t,i)}}),o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},i.fragBuffered=function(e){e=u(e),e=this.fragments[e];e&&(e.loaded=null,e.buffered=!0)},i.getBufferedTimes=function(e,t,i,n){for(var r={time:[],partial:i},a=(t||e).start,s=(t||e).end,o=e.minEndPTS||s,l=e.maxStartPTS||a,u=0;u<n.length;u++){var c=n.start(u)-this.bufferPadding,d=n.end(u)+this.bufferPadding;if(c<=l&&o<=d){r.time.push({startPTS:Math.max(a,n.start(u)),endPTS:Math.min(s,n.end(u))});break}if(a<d&&c<s)r.partial=!0,r.time.push({startPTS:Math.max(a,n.start(u)),endPTS:Math.min(s,n.end(u))});else if(s<=c)break}return r},i.getPartialFragment=function(t){var i,n,r=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach(function(e){e=o[e];e&&l(e)&&(i=e.body.start-s,n=e.body.end+s,i<=t&&t<=n&&(i=Math.min(t-i,n-t),a<=i&&(r=e.body,a=i)))}),r},i.getState=function(e){e=u(e),e=this.fragments[e];return e?e.buffered?l(e)?n.PARTIAL:n.OK:n.APPENDING:n.NOT_LOADED},i.isTimeBuffered=function(e,t,i){for(var n,r,a=0;a<i.length;a++){if(n=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,n<=e&&t<=r)return!0;if(t<=n)return!1}return!1},i.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if("initSegment"!==i.sn&&!i.bitrateTest&&!n){n=u(i);this.fragments[n]={body:i,loaded:t,buffered:!1,range:Object.create(null)}}},i.onBufferAppended=function(e,t){var n=this,r=t.frag,a=t.part,s=t.timeRanges;if(r.type===o.PlaylistLevelType.MAIN)if(this.activeFragment=r,a){t=this.activeParts;t||(this.activeParts=t=[]),t.push(a)}else this.activeParts=null;this.timeRanges=s,Object.keys(s).forEach(function(e){var t=s[e];if(n.detectEvictedFragments(e,t),!a)for(var i=0;i<t.length;i++)r.appendedPTS=Math.max(t.end(i),r.appendedPTS||0)})},i.onFragBuffered=function(e,t){this.detectPartialFragments(t)},i.hasFragment=function(e){e=u(e);return!!this.fragments[e]},i.removeFragmentsInRange=function(t,i,n){var r=this;Object.keys(this.fragments).forEach(function(e){e=r.fragments[e];if(e&&e.buffered){e=e.body;e.type===n&&e.start<i&&e.end>t&&r.removeFragment(e)}})},i.removeFragment=function(e){var t=u(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},i.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},s);function s(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}function l(e){var t;return e.buffered&&(null!=(t=e.range.video)&&t.partial||null!=(t=e.range.audio)&&t.partial)}function u(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{MAX_START_GAP_JUMP:()=>p,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>g,SKIP_BUFFER_RANGE_START:()=>v,STALL_MINIMUM_DURATION_MS:()=>f,default:()=>n});var u=i("./src/utils/buffer-helper.ts"),c=i("./src/errors.ts"),d=i("./src/events.ts"),h=i("./src/utils/logger.ts"),f=250,p=2,g=.1,v=.05,n=((t=r.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var i=this.config,n=this.media,r=this.stalled;if(null!==n){var a=n.currentTime,s=n.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===e){if((l||o)&&(this.stalled=null),!(n.paused&&!s||n.ended||0===n.playbackRate)&&u.BufferHelper.getBuffered(n).length){e=u.BufferHelper.bufferInfo(n,a,0),l=0<e.len,o=e.nextStart||0;if(l||o){if(s){l=e.len>p,t=!o||t&&t.start<=a||p<o-a&&!this.fragmentTracker.getPartialFragment(a);if(l||t)return;this.moved=!1}if(!this.moved&&null!==this.stalled){l=Math.max(o,e.start||0)-a,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,o=null!=t&&null!=(o=t.details)&&o.live?2*t.details.targetduration:p;if(0<l&&l<=o)return void this._trySkipBufferHole(null)}t=self.performance.now();if(null!==r){l=t-r;if(s||!(f<=l)||(this._reportStall(e),this.media)){o=u.BufferHelper.bufferInfo(n,a,i.maxBufferHole);this._tryFixBufferStall(o,l)}}else this.stalled=t}}}else if(this.moved=!0,null!==r){if(this.stallReported){s=self.performance.now()-r;h.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(s)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},t._tryFixBufferStall=function(e,t){var i=this.config,n=this.fragmentTracker,r=this.media;if(null!==r){r=r.currentTime,n=n.getPartialFragment(r);(!n||!this._trySkipBufferHole(n)&&this.media)&&e.len>i.maxBufferHole&&t>1e3*i.highBufferWatchdogPeriod&&(h.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,i=this.media;!this.stallReported&&i&&(this.stallReported=!0,h.logger.warn("Playback stalling at @"+i.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(d.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},t._trySkipBufferHole=function(e){var t=this.config,i=this.hls,n=this.media;if(null===n)return 0;for(var r=n.currentTime,a=0,s=u.BufferHelper.getBuffered(n),o=0;o<s.length;o++){var l=s.start(o);if(r+t.maxBufferHole>=a&&r<l)return l=Math.max(l+v,n.currentTime+g),h.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+l),this.moved=!0,this.stalled=null,n.currentTime=l,e&&i.trigger(d.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+l,frag:e}),l;a=s.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,n=this.nudgeRetry;if(null!==i){var r=i.currentTime;if(this.nudgeRetry++,n<e.nudgeMaxRetry){n=r+(n+1)*e.nudgeOffset;h.logger.warn("Nudging 'currentTime' from "+r+" to "+n),i.currentTime=n,t.trigger(d.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(d.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},r);function r(e,t,i,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}},"./src/controller/id3-track-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var s=i("./src/polyfills/number.ts"),n=i("./src/events.ts"),l=i("./src/utils/texttrack-utils.ts"),g=i("./src/demux/id3.ts"),E=i("./src/loader/date-range.ts"),T=i("./src/types/demuxer.ts");function b(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var k=function(){var e=b();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function S(e,t){return e.getTime()/1e3-t}(t=r.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(n.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(n.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&((0,l.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){e=this.getID3Track(e.textTracks);return e.mode="hidden",e},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return(0,l.sendAddTrackEvent)(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var i=this.hls.config,n=i.enableEmsgMetadataCues,r=i.enableID3MetadataCues;if(n||r){t.frag;var a=t.samples;t.details,this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=b(),o=0;o<a.length;o++){var l=a[o].type;if((l!==T.MetadataSchema.emsg||n)&&r){var u=g.getID3Frames(a[o].data);if(u){var c=a[o].pts,d=c+a[o].duration;(d=k<d?k:d)-c<=0&&(d=c+.25);for(var h=0;h<u.length;h++){var f=u[h];if(!g.isTimeStampFrame(f)){this.updateId3CueEnds(c);var p=new s(c,d,"");p.value=f,l&&(p.type=l),this.id3Track.addCue(p)}}}}}}}},t.updateId3CueEnds=function(e){var t,i=null==(t=this.id3Track)?void 0:t.cues;if(i)for(var n=i.length;n--;){var r=i[n];r.startTime<e&&r.endTime===k&&(r.endTime=e)}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,t=t.type,r=this.id3Track,a=this.hls;if(a){var a=a.config,s=a.enableEmsgMetadataCues,o=a.enableID3MetadataCues;r&&(s||o)&&(0,l.removeCuesInRange)(r,i,n,"audio"===t?function(e){return e.type===T.MetadataSchema.audioId3&&o}:"video"===t?function(e){return e.type===T.MetadataSchema.emsg&&s}:function(e){return e.type===T.MetadataSchema.audioId3&&o||e.type===T.MetadataSchema.emsg&&s})}},t.onLevelUpdated=function(e,t){var p=this,t=t.details;if(this.media&&t.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var g=this.dateRangeCuesAppended,i=this.id3Track,v=t.dateRanges,m=Object.keys(v);if(i)for(var n=Object.keys(g).filter(function(e){return!m.includes(e)}),r=n.length;r--;)!function(e){var t=n[e];Object.keys(g[t].cues).forEach(function(e){i.removeCue(g[t].cues[e])}),delete g[t]}(r);t=t.fragments[t.fragments.length-1];if(0!==m.length&&(0,s.isFiniteNumber)(null==t?void 0:t.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=t.programDateTime/1e3-t.start,A=b(),a=0;a<m.length;a++)!function(e){var e=m[e],n=v[e],t=g[e],i=(null==t?void 0:t.cues)||{},r=(null==t?void 0:t.durationKnown)||!1,a=S(n.startDate,y),s=k,o=n.endDate;if(o)s=S(o,y),r=!0;else if(n.endOnNext&&!r){o=m.reduce(function(e,t){var i=v[t];return i.class===n.class&&i.id!==t&&i.startDate>n.startDate&&e.push(i),e},[]).sort(function(e,t){return e.startDate.getTime()-t.startDate.getTime()})[0];o&&(s=S(o.startDate,y),r=!0)}for(var l,u=Object.keys(n.attr),c=0;c<u.length;c++){var d=u[c];if(d!==E.DateRangeAttribute.ID&&d!==E.DateRangeAttribute.CLASS&&d!==E.DateRangeAttribute.START_DATE&&d!==E.DateRangeAttribute.DURATION&&d!==E.DateRangeAttribute.END_DATE&&d!==E.DateRangeAttribute.END_ON_NEXT)if(f=i[d])r&&!t.durationKnown&&(f.endTime=s);else{var h=n.attr[d],f=new A(a,s,"");d!==E.DateRangeAttribute.SCTE35_OUT&&d!==E.DateRangeAttribute.SCTE35_IN||(l=h,h=Uint8Array.from(l.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),f.value={key:d,data:h},f.type=T.MetadataSchema.dateRange,p.id3Track.addCue(f),i[d]=f}}g[e]={cues:i,dateRange:n,durationKnown:r}}(a)}}};function r(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}const a=r},"./src/controller/latency-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var n=i("./src/errors.ts"),r=i("./src/events.ts"),a=i("./src/utils/logger.ts");function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t=l.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(r.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(r.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(r.Events.ERROR,this.onError)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){t=t.details;(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===n.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var n=this.config,r=n.lowLatencyMode,n=n.maxLiveSyncPlaybackRate;if(r&&1!==n){r=this.targetLatency;if(null!==r){i=i-r,r=i<Math.min(this.maxLatency,r+t.targetduration);if(t.live&&r&&.05<i&&1<this.forwardBufferLength){t=Math.min(2,Math.max(1,n)),r=Math.round(2/(1+Math.exp(-.75*i-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,r))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},s((t=l).prototype,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,i=e.partHoldBack,e=e.targetduration,n=this.config,r=n.liveSyncDuration,a=n.liveSyncDurationCount,n=n.lowLatencyMode,s=this.hls.userConfig,n=n&&i||t;return(n=s.liveSyncDuration||s.liveSyncDurationCount||0===n?void 0!==r?r:a*e:n)+Math.min(+this.stallCount,e)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;var n=i.edge,e=e-t-this.edgeStalled,t=n-i.totalduration,n=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(t,e),n)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}}]),Object.defineProperty(t,"prototype",{writable:!1});var o=l;function l(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}},"./src/controller/level-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var f=i("./src/types/level.ts"),p=i("./src/events.ts"),g=i("./src/errors.ts"),v=i("./src/utils/codecs.ts"),m=i("./src/controller/level-helper.ts"),t=i("./src/controller/base-playlist-controller.ts"),l=i("./src/types/loader.ts");function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,y=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),s=(u=t.default,i=u,(t=o).prototype=Object.create(i.prototype),a(t.prototype.constructor=t,i),(t=o.prototype)._registerListeners=function(){var e=this.hls;e.on(p.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(p.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(p.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(p.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(p.Events.ERROR,this.onError,this)},t._unregisterListeners=function(){var e=this.hls;e.off(p.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(p.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(p.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(p.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(p.Events.ERROR,this.onError,this)},t.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,u.prototype.destroy.call(this)},t.startLoad=function(){this._levels.forEach(function(e){e.loadError=0}),u.prototype.startLoad.call(this)},t.onManifestLoaded=function(e,t){var i,n,r=[],a=[],s=[],o={},l=!1,u=!1,c=!1;if(t.levels.forEach(function(e){var t=e.attrs,i=(l=l||!(!e.width||!e.height),u=u||!!e.videoCodec,c=c||!!e.audioCodec,y&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS);(n=o[i])?n.url.push(e.url):(n=new f.Level(e),o[i]=n,r.push(n)),t&&(t.AUDIO&&(0,m.addGroupId)(n,"audio",t.AUDIO),t.SUBTITLES&&(0,m.addGroupId)(n,"text",t.SUBTITLES))}),r=(r=(l||u)&&c?r.filter(function(e){var t=e.videoCodec,i=e.width,e=e.height;return!!t||!(!i||!e)}):r).filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||(0,v.isCodecSupportedInMp4)(t,"audio"))&&(!e||(0,v.isCodecSupportedInMp4)(e,"video"))}),t.audioTracks&&(a=t.audioTracks.filter(function(e){return!e.audioCodec||(0,v.isCodecSupportedInMp4)(e.audioCodec,"audio")}),(0,m.assignTrackIdsByGroup)(a)),t.subtitles&&(s=t.subtitles,(0,m.assignTrackIdsByGroup)(s)),0<r.length){i=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===i){this._firstLevel=d,this.log("manifest loaded, "+r.length+" level(s) found, first bitrate: "+i);break}var h=c&&!u,s={levels:r,audioTracks:a,subtitleTracks:s,firstLevel:this._firstLevel,stats:t.stats,audio:c,video:u,altAudio:!h&&a.some(function(e){return!!e.url})};this.hls.trigger(p.Events.MANIFEST_PARSED,s),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(p.Events.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},t.onError=function(e,t){if(u.prototype.onError.call(this,e,t),!t.fatal){var i=t.context,e=this._levels[this.currentLevelIndex];if(i&&(i.type===l.PlaylistContextType.AUDIO_TRACK&&e.audioGroupIds&&i.groupId===e.audioGroupIds[e.urlId]||i.type===l.PlaylistContextType.SUBTITLE_TRACK&&e.textGroupIds&&i.groupId===e.textGroupIds[e.urlId]))this.redundantFailover(this.currentLevelIndex);else{var n,r=!1,a=!0;switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:if(t.frag){var s=t.frag.type===l.PlaylistLevelType.MAIN?t.frag.level:this.currentLevelIndex,o=this._levels[s];o?(o.fragmentError++,o.fragmentError>this.hls.config.fragLoadingMaxRetry&&(n=s)):n=s}break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(a=!1),n=i.level),r=!0;break;case g.ErrorDetails.REMUX_ALLOC_ERROR:n=null!=(o=t.level)?o:this.currentLevelIndex,r=!0}void 0!==n&&this.recoverLevel(t,n,r,a)}}},t.recoverLevel=function(e,t,i,n){var r=e.details,a=this._levels[t];if(a.loadError++,i){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(n){i=a.url.length;if(1<i&&a.loadError<i)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var s=-1,o=this._levels,l=o.length;l--;){var u=(l+this.currentLevelIndex)%o.length;if(u!==this.currentLevelIndex&&0===o[u].loadError){s=u;break}}-1<s&&this.currentLevelIndex!==s&&(this.warn(r+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},t.redundantFailover=function(e){var t=this._levels[e],i=t.url.length;if(1<i){var n=(t.urlId+1)%i;this.warn("Switching to redundant URL-id "+n),this._levels.forEach(function(e){e.urlId=n}),this.level=e}},t.onFragLoaded=function(e,t){t=t.frag;if(void 0!==t&&t.type===l.PlaylistLevelType.MAIN){t=this._levels[t.level];void 0!==t&&(t.fragmentError=0,t.loadError=0)}},t.onLevelLoaded=function(e,t){var i,n=t.level,r=t.details,a=this._levels[n];if(!a)return this.warn("Invalid level index "+n),void(null!=(i=t.deliveryDirectives)&&i.skip&&(r.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===a.fragmentError&&(a.loadError=0,this.retryCount=0),this.playlistLoaded(n,t,a.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(r.deltaUpdateFailed=!0)},t.onAudioTrackSwitched=function(e,t){var i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var n=-1,r=this.hls.audioTracks[t.id].groupId,a=0;a<i.audioGroupIds.length;a++)if(i.audioGroupIds[a]===r){n=a;break}n!==i.urlId&&(i.urlId=n,this.startLoad())}},t.loadPlaylist=function(e){var t=this.currentLevelIndex,i=this._levels[t];if(this.canLoad&&i&&0<i.url.length){var n=i.urlId,i=i.url[n];if(e)try{i=e.addDirectives(i)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+n+" "+i),this.clearTimer(),this.hls.trigger(p.Events.LEVEL_LOADING,{url:i,level:t,id:n,deliveryDirectives:e||null})}},t.removeLevel=function(i,n){function r(e,t){return t!==n}var e=this._levels.filter(function(e,t){return t!==i||1<e.url.length&&void 0!==n&&(e.url=e.url.filter(r),e.audioGroupIds&&(e.audioGroupIds=e.audioGroupIds.filter(r)),e.textGroupIds&&(e.textGroupIds=e.textGroupIds.filter(r)),!(e.urlId=0))}).map(function(e,t){var i=e.details;return null!=i&&i.fragments&&i.fragments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(p.Events.LEVELS_UPDATED,{levels:e})},n((i=o).prototype,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length&&(this.currentLevelIndex!==e||null==(i=t[e])||!i.details)){if(e<0||e>=t.length){var i=e<0;if(this.hls.trigger(p.Events.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,t.length-1)}this.clearTimer();var i=this.currentLevelIndex,n=t[i],t=t[e],i=(this.log("switching to level "+e+" from "+i),r({},t,{level:this.currentLevelIndex=e,maxBitrate:t.maxBitrate,uri:t.uri,urlId:t.urlId})),e=(delete i._urlId,this.hls.trigger(p.Events.LEVEL_SWITCHING,i),t.details);if(!e||e.live){i=this.switchParams(t.uri,null==n?void 0:n.details);this.loadPlaylist(i)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){var e;return void 0===this._startLevel?void 0!==(e=this.hls.config.startLevel)?e:this._firstLevel:this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),Object.defineProperty(i,"prototype",{writable:!1}),o);function o(e){return(e=u.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.onParsedComplete=void 0,e._registerListeners(),e}},"./src/controller/level-helper.ts":(e,t,i)=>{i.r(t),i.d(t,{addGroupId:()=>function(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}},addSliding:()=>n,adjustSliding:()=>b,assignTrackIdsByGroup:()=>function(e){var i={};e.forEach(function(e){var t=e.groupId||"";e.id=i[t]=i[t]||0,i[t]++})},computeReloadInterval:()=>function(e,t){var i=1e3*e.levelTargetDuration,n=i/2,r=e.age,a=0<r&&r<3*i,t=t.loading.end-t.loading.start,s=e.availabilityDelay;if(!1===e.updated)if(a){var o=333*e.misses;o=Math.max(Math.min(n,2*t),o),e.availabilityDelay=(e.availabilityDelay||0)+o}else o=n;else o=a?(s=Math.min(s||i/2,r),e.availabilityDelay=s,s+i-r):i-t;return Math.round(o)},getFragmentWithSN:()=>function(e,t,i){if(!e||!e.details)return null;var n,e=e.details;return(n=e.fragments[t-e.startSN])||((n=e.fragmentHint)&&n.sn===t?n:t<e.startSN&&i&&i.sn===t?i:null)},getPartWith:()=>function(e,t,i){if(!e||!e.details)return null;var n=e.details.partList;if(n)for(var r=n.length;r--;){var a=n[r];if(a.index===i&&a.fragment.sn===t)return a}return null},mapFragmentIntersection:()=>T,mapPartIntersection:()=>E,mergeDetails:()=>function(e,i){for(var n=null,t=e.fragments,r=t.length-1;0<=r;r--){var a=t[r].initSegment;if(a){n=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var s,o,l,u=0;if(T(e,i,function(e,t){e.relurl&&(u=e.cc-t.cc),(0,g.isFiniteNumber)(e.startPTS)&&(0,g.isFiniteNumber)(e.endPTS)&&(t.start=t.startPTS=e.startPTS,t.startDTS=e.startDTS,t.appendedPTS=e.appendedPTS,t.maxStartPTS=e.maxStartPTS,t.endPTS=e.endPTS,t.endDTS=e.endDTS,t.minEndPTS=e.minEndPTS,t.duration=e.endPTS-e.startPTS,t.duration&&(s=t),i.PTSKnown=i.alignedSliding=!0),t.elementaryStreams=e.elementaryStreams,t.loader=e.loader,t.stats=e.stats,t.urlId=e.urlId,e.initSegment&&(t.initSegment=e.initSegment,n=e.initSegment)}),n&&(i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments).forEach(function(e){var t;e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}),i.skippedSegments)if(i.deltaUpdateFailed=i.fragments.some(function(e){return!e}),i.deltaUpdateFailed){v.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var c=i.skippedSegments;c--;)i.fragments.shift();i.startSN=i.fragments[0].sn,i.startCC=i.fragments[0].cc}else i.canSkipDateRanges&&(i.dateRanges=(f=e.dateRanges,o=i.dateRanges,p=i.recentlyRemovedDateranges,l=y({},f),p&&p.forEach(function(e){delete l[e]}),Object.keys(o).forEach(function(e){var t=new m.DateRange(o[e].attr,l[e]);t.isValid?l[e]=t:v.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(o[e].attr)+'"')}),l));var d=i.fragments;if(u){v.logger.warn("discontinuity sliding from playlist, take drift into account");for(var h=0;h<d.length;h++)d[h].cc+=u}i.skippedSegments&&(i.startCC=i.fragments[0].cc),E(e.partList,i.partList,function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),s?A(i,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):b(e,i),d.length&&(i.totalduration=i.edge-d[0].start),i.driftStartTime=e.driftStartTime,i.driftStart=e.driftStart;var f=i.advancedDateTime;if(i.advanced&&f){var p=i.edge;i.driftStart||(i.driftStartTime=f,i.driftStart=p),i.driftEndTime=f,i.driftEnd=p}else i.driftEndTime=e.driftEndTime,i.driftEnd=e.driftEnd,i.advancedDateTime=e.advancedDateTime},updateFragPTSDTS:()=>A,updatePTS:()=>function(e,t,i){f(e[t],e[i])}});var g=i("./src/polyfills/number.ts"),v=i("./src/utils/logger.ts"),m=i("./src/loader/date-range.ts");function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function f(e,t){var i=t.startPTS;if((0,g.isFiniteNumber)(i)){var n=0,i=t.sn>e.sn?(n=i-e.start,e):(n=e.start-i,t);i.duration!==n&&(i.duration=n)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function A(e,t,i,n,r,a){n-i<=0&&(v.logger.warn("Fragment should have a positive duration",t),n=i+t.duration,a=r+t.duration);var s=i,o=n,l=t.startPTS,u=t.endPTS;if((0,g.isFiniteNumber)(l)){var c=Math.abs(l-i);(0,g.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,s=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),o=Math.min(n,u),n=Math.max(n,u),a=Math.max(a,t.endDTS)}t.duration=n-i;c=i-t.start;t.appendedPTS=n,t.start=t.startPTS=i,t.maxStartPTS=s,t.startDTS=r,t.endPTS=n,t.minEndPTS=o,t.endDTS=a;var d,l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var u=l-e.startSN,h=e.fragments;for(h[u]=t,d=u;0<d;d--)f(h[d],h[d-1]);for(d=u;d<h.length-1;d++)f(h[d],h[d+1]);return e.fragmentHint&&f(h[h.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function E(e,t,i){if(e&&t)for(var n=0,r=0,a=e.length;r<=a;r++){var s=e[r],o=t[r+n];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?i(s,o):n--}}function T(e,t,i){for(var n=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r;u<=a;u++){var c=l[s+u],d=o[u];n&&!d&&u<n&&(d=t.fragments[u]=c),c&&d&&i(c,d)}}function b(e,t){var i=t.startSN+t.skippedSegments-e.startSN,e=e.fragments;i<0||i>=e.length||n(t,e[i].start)}function n(e,t){if(t){for(var i=e.fragments,n=e.skippedSegments;n<i.length;n++)i[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}},"./src/controller/stream-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var v=i("./src/polyfills/number.ts"),m=i("./src/controller/base-stream-controller.ts"),a=i("./src/is-supported.ts"),y=i("./src/events.ts"),r=i("./src/utils/buffer-helper.ts"),s=i("./src/controller/fragment-tracker.ts"),d=i("./src/types/loader.ts"),A=i("./src/loader/fragment.ts"),h=i("./src/demux/transmuxer-interface.ts"),f=i("./src/types/transmuxer.ts"),n=i("./src/controller/gap-controller.ts"),o=i("./src/errors.ts");function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}c=m.default,t=c,(i=g).prototype=Object.create(t.prototype),u(i.prototype.constructor=i,t),(i=g.prototype)._registerListeners=function(){var e=this.hls;e.on(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(y.Events.ERROR,this.onError,this),e.on(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(y.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(y.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(y.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(y.Events.ERROR,this.onError,this),e.off(y.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(y.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(y.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(y.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(y.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(y.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},i.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(i.config.testBandwidth&&1<this.levels.length?this.bitrateTest=!(n=0):n=i.nextAutoLevel),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=m.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=m.State.STOPPED},i.stopLoad=function(){this._forceStartLoad=!1,c.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case m.State.IDLE:this.doTickIdle();break;case m.State.WAITING_LEVEL:var e=this.levels,t=this.level,t=null==e||null==(e=e[t])?void 0:e.details;if(!t||t.live&&this.levelLastLoaded!==this.level)break;if(this.waitForCdnTuneIn(t))break;this.state=m.State.IDLE;break;case m.State.FRAG_LOADING_WAITING_RETRY:e=self.performance.now(),t=this.retryDate;(!t||t<=e||null!=(t=this.media)&&t.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=m.State.IDLE)}this.onTickEnd()},i.onTickEnd=function(){c.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},i.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,i=this.levels,n=this.media,r=e.config,a=e.nextLoadLevel;if(null!==t&&(n||!this.startFragRequested&&r.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&i&&i[a]){t=i[a],r=(this.level=e.nextLoadLevel=a,t.details);if(!r||this.state===m.State.WAITING_LEVEL||r.live&&this.levelLastLoaded!==a)this.state=m.State.WAITING_LEVEL;else{var i=this.getMainFwdBufferInfo();if(null!==i&&!(i.len>=this.getMaxBufferLength(t.maxBitrate))){if(this._streamEnded(i,r))return e={},this.altAudio&&(e.type="video"),this.hls.trigger(y.Events.BUFFER_EOS,e),void(this.state=m.State.ENDED);this.backtrackFragment&&this.backtrackFragment.start>i.end&&(this.backtrackFragment=null);a=this.backtrackFragment?this.backtrackFragment.start:i.end,t=this.getNextFragment(a,r);if(this.couldBacktrack&&!this.fragPrevious&&t&&"initSegment"!==t.sn&&this.fragmentTracker.getState(t)!==s.FragmentState.OK){e=(null!=(e=this.backtrackFragment)?e:t).sn-r.startSN,e=r.fragments[e-1];e&&t.cc===e.cc&&this.fragmentTracker.removeFragment(t=e)}else this.backtrackFragment&&i.len&&(this.backtrackFragment=null);if(t&&this.fragmentTracker.getState(t)===s.FragmentState.OK&&this.nextLoadPosition>a){e=this.audioOnly&&!this.altAudio?A.ElementaryStreamTypes.AUDIO:A.ElementaryStreamTypes.VIDEO;n&&this.afterBufferFlushed(n,e,d.PlaylistLevelType.MAIN),t=this.getNextFragment(this.nextLoadPosition,r)}t&&("identity"!==(null==(i=(t=!t.initSegment||t.initSegment.data||this.bitrateTest?t:t.initSegment).decryptdata)?void 0:i.keyFormat)||null!=(n=t.decryptdata)&&n.key?this.loadFragment(t,r,a):this.loadKey(t,r))}}}},i.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===s.FragmentState.NOT_LOADED?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,c.prototype.loadFragment.call(this,e,t,i)):n===s.FragmentState.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null==(t=this.media)?void 0:t.buffered.length)&&this.fragmentTracker.removeAllFragments()},i.getAppendedFrag=function(e){e=this.fragmentTracker.getAppendedFrag(e,d.PlaylistLevelType.MAIN);return e&&"fragment"in e?e.fragment:e},i.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,d.PlaylistLevelType.MAIN)},i.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},i.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i=this.getAppendedFrag(t.currentTime),e=(i=(i&&1<i.start&&this.flushMainBuffer(0,i.start-1),!t.paused&&e)?(i=e[this.hls.nextLoadLevel],(e=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*e)+1:0):0,this.getBufferedFrag(t.currentTime+i));if(e){t=this.followingBufferedFrag(e);if(t){this.abortCurrentFrag();i=t.maxStartPTS||t.start,t=t.duration,e=Math.max(e.end,i+Math.min(Math.max(t-this.config.maxFragLookUpTolerance,.5*t),.75*t));this.flushMainBuffer(e,Number.POSITIVE_INFINITY)}}}},i.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,(this.backtrackFragment=null)!=e&&e.loader&&e.loader.abort(),this.state){case m.State.KEY_LOADING:case m.State.FRAG_LOADING:case m.State.FRAG_LOADING_WAITING_RETRY:case m.State.PARSING:case m.State.PARSED:this.state=m.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},i.flushMainBuffer=function(e,t){c.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},i.onMediaAttached=function(e,t){c.prototype.onMediaAttached.call(this,e,t);e=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),e.addEventListener("playing",this.onvplaying),e.addEventListener("seeked",this.onvseeked),this.gapController=new n.default(this.config,e,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),c.prototype.onMediaDetaching.call(this)},i.onMediaPlaying=function(){this.tick()},i.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:null;(0,v.isFiniteNumber)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},i.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(y.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},i.onManifestParsed=function(e,t){var i,n=!1,r=!1;t.levels.forEach(function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(n=!0),-1!==i.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r&&!(0,a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},i.onLevelLoading=function(e,t){var i=this.levels;if(i&&this.state===m.State.IDLE){i=i[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=m.State.WAITING_LEVEL)}},i.onLevelLoaded=function(e,t){var i=this.levels,n=t.level,r=t.details,a=r.totalduration;if(i){this.log("Level "+n+" loaded ["+r.startSN+","+r.endSN+"], cc ["+r.startCC+", "+r.endCC+"] duration:"+a);a=this.fragCurrent,t=(!a||this.state!==m.State.FRAG_LOADING&&this.state!==m.State.FRAG_LOADING_WAITING_RETRY||a.level!==t.level&&a.loader&&(this.state=m.State.IDLE,this.backtrackFragment=null,a.loader.abort()),i[n]),a=0;if(r.live||null!=(i=t.details)&&i.live){if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed)return;a=this.alignPlaylists(r,t.details)}if(t.details=r,this.levelLastLoaded=n,this.hls.trigger(y.Events.LEVEL_UPDATED,{details:r,level:n}),this.state===m.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(r))return;this.state=m.State.IDLE}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,a),this.tick()}else this.warn("Levels were reset while loading level "+n)},i._handleFragmentLoadProgress=function(e){var t=e.frag,i=e.part,e=e.payload,n=this.levels;if(n){var n=n[t.level],r=n.details;if(r){var a=n.videoCodec,s=r.PTSKnown||!r.live,o=null==(o=t.initSegment)?void 0:o.data,n=this._getAudioCodec(n),l=this.transmuxer=this.transmuxer||new h.default(this.hls,d.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),u=i?i.index:-1,u=new f.ChunkMetadata(t.level,t.sn,t.stats.chunkCount,e.byteLength,u,-1!==u),c=this.initPTS[t.cc];l.push(e,o,n,a,t,i,r.totalduration,s,u,c)}else this.warn("Dropping fragment "+t.sn+" of level "+t.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+t.sn+" of level "+t.level+" will not be buffered")},i.onAudioTrackSwitching=function(e,t){var i=this.altAudio,n=!!t.url,t=t.id;if(!n){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;n=this.fragCurrent;null!=n&&n.loader&&(this.log("Switching to main audio track, cancel main fragment load"),n.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();n=this.hls;i&&n.trigger(y.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(y.Events.AUDIO_TRACK_SWITCHED,{id:t})}},i.onAudioTrackSwitched=function(e,t){t=t.id,t=!!this.hls.audioTracks[t].url;if(t){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=t,this.tick()},i.onBufferCreated=function(e,t){var i,n,r,a=t.tracks,s=!1;for(r in a){var o=a[r];if("main"===o.id){if(i=o,"video"===(n=r)){o=a[r];o&&(this.videoBuffer=o.buffer)}}else s=!0}s&&i?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},i.onFragBuffered=function(e,t){var i=t.frag,t=t.part;if(!i||i.type===d.PlaylistLevelType.MAIN){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===m.State.PARSED&&(this.state=m.State.IDLE));var n=(t||i).stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,t)}},i.onError=function(e,t){switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(d.PlaylistLevelType.MAIN,t);break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==m.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=m.State.ERROR):t.levelRetry||this.state!==m.State.WAITING_LEVEL||(this.state=m.State.IDLE));break;case o.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===m.State.PARSING||this.state===m.State.PARSED)){var i=!0,n=this.getFwdBufferInfo(this.media,d.PlaylistLevelType.MAIN);(i=n&&.5<n.len?!this.reduceMaxBufferLength(n.len):i)&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},i.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!r.BufferHelper.getBuffered(e).length){var i=this.state!==m.State.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}},i.onFragLoadEmergencyAborted=function(){this.state=m.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},i.onBufferFlushed=function(e,t){t=t.type;if(t!==A.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var i=(t===A.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,t,d.PlaylistLevelType.MAIN)}},i.onLevelsUpdated=function(e,t){this.levels=t.levels},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,i=this.startPosition;if(0<=i&&t<i)if(e.seeking)this.log("could not seek to "+i+", already seeking at "+t);else{var n=r.BufferHelper.getBuffered(e),n=(n.length?n.start(0):0)-i;0<n&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),this.startPosition=i+=n),this.log("seek to target start position "+i+" from current time "+t),e.currentTime=i}}},i._getAudioCodec=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},i._loadBitrateTestFrag=function(n){var r=this;n.bitrateTest=!0,this._doFragLoad(n).then(function(e){var t=r.hls;if(e&&!t.nextLoadLevel&&!r.fragContextChanged(n)){r.fragLoadError=0,r.state=m.State.IDLE,r.startFragRequested=!1,r.bitrateTest=!1;var i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),t.trigger(y.Events.FRAG_LOADED,e),n.bitrateTest=!1}})},i._handleTransmuxComplete=function(e){var t="main",i=this.hls,n=e.remuxResult,e=e.chunkMeta,r=this.getCurrentContext(e);if(!r)return this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(e.level);var a=r.frag,s=r.part,r=r.level,o=n.video,l=n.text,u=n.id3,c=n.initSegment,d=r.details,h=this.altAudio?void 0:n.audio;if(!this.fragContextChanged(a)){if(this.state=m.State.PARSING,c){c.tracks&&(this._bufferInitSegment(r,c.tracks,a,e),i.trigger(y.Events.FRAG_PARSING_INIT_SEGMENT,{frag:a,id:t,tracks:c.tracks}));r=c.initPTS,c=c.timescale;(0,v.isFiniteNumber)(r)&&(this.initPTS[a.cc]=r,i.trigger(y.Events.INIT_PTS_FOUND,{frag:a,id:t,initPTS:r,timescale:c}))}if(o&&!1!==n.independent){if(d){var r=o.startPTS,c=o.endPTS,f=o.startDTS,p=o.endDTS;if(s)s.elementaryStreams[o.type]={startPTS:r,endPTS:c,startDTS:f,endDTS:p};else if(o.firstKeyFrame&&o.independent&&(this.couldBacktrack=!0),o.dropped&&o.independent){var g=this.getMainFwdBufferInfo();if((g?g.end:this.getLoadPosition())+this.config.maxBufferHole<(o.firstKeyFramePTS||r)-this.config.maxBufferHole)return void this.backtrack(a);a.setElementaryStreamInfo(o.type,a.start,c,a.start,p,!0)}a.setElementaryStreamInfo(o.type,r,c,f,p),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(o,a,s,e)}}else if(!1===n.independent)return void this.backtrack(a);if(h){g=h.startPTS,r=h.endPTS,c=h.startDTS,f=h.endDTS;s&&(s.elementaryStreams[A.ElementaryStreamTypes.AUDIO]={startPTS:g,endPTS:r,startDTS:c,endDTS:f}),a.setElementaryStreamInfo(A.ElementaryStreamTypes.AUDIO,g,r,c,f),this.bufferFragmentData(h,a,s,e)}if(d&&null!=u&&null!=(p=u.samples)&&p.length){o={id:t,frag:a,details:d,samples:u.samples};i.trigger(y.Events.FRAG_PARSING_METADATA,o)}if(d&&l){n={id:t,frag:a,details:d,samples:l.samples};i.trigger(y.Events.FRAG_PARSING_USERDATA,n)}}},i._bufferInitSegment=function(e,i,n,r){var a=this;if(this.state===m.State.PARSING){this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio;var t=i.audio,s=i.video,o=i.audiovideo;if(t){var l=e.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l=l&&(-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==t.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==t.container&&this.log("Android: force audio codec to "+(l="mp4a.40.2")),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),t.levelCodec=l,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+s.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(y.Events.BUFFER_CODECS,i),Object.keys(i).forEach(function(e){var t=i[e].initSegment;null!=t&&t.byteLength&&a.hls.trigger(y.Events.BUFFER_APPENDING,{type:e,data:t,frag:n,part:null,chunkMeta:r,parent:n.type})}),this.tick()}},i.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,d.PlaylistLevelType.MAIN)},i.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=m.State.IDLE},i.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&1<e.readyState&&!1===e.seeking){var i=e.currentTime;if(r.BufferHelper.isBuffered(e,i)?t=this.getAppendedFrag(i):r.BufferHelper.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;e=this.fragPlaying,i=t.level;e&&t.sn===e.sn&&e.level===i&&t.urlId===e.urlId||(this.hls.trigger(y.Events.FRAG_CHANGED,{frag:t}),e&&e.level===i||this.hls.trigger(y.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=t)}}},l((t=g).prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var e=e.currentTime,t=this.currentFrag;if(t&&(0,v.isFiniteNumber)(e)&&(0,v.isFiniteNumber)(t.programDateTime))return e=t.programDateTime+1e3*(e-t.start),new Date(e)}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Object.defineProperty(t,"prototype",{writable:!1});var c,p=g;function g(e,t){return(e=c.call(this,e,t,"[stream-controller]")||this).audioCodecSwap=!1,e.gapController=null,e.level=-1,e._forceStartLoad=!1,e.altAudio=!1,e.audioOnly=!1,e.fragPlaying=null,e.onvplaying=null,e.onvseeked=null,e.fragLastKbps=0,e.couldBacktrack=!1,e.backtrackFragment=null,e.audioCodecSwitch=!1,e.videoBuffer=null,e._registerListeners(),e}},"./src/controller/subtitle-stream-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{SubtitleStreamController:()=>g});var a=i("./src/events.ts"),l=i("./src/utils/buffer-helper.ts"),u=i("./src/controller/fragment-finders.ts"),o=i("./src/utils/discontinuities.ts"),c=i("./src/controller/level-helper.ts"),d=i("./src/controller/fragment-tracker.ts"),h=i("./src/controller/base-stream-controller.ts"),f=i("./src/types/loader.ts"),n=i("./src/types/level.ts");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}p=h.default,t=p,(i=m).prototype=Object.create(t.prototype),s(i.prototype.constructor=i,t),(i=m.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},i.startLoad=function(e){this.stopLoad(),this.state=h.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},i.onLevelLoaded=function(e,t){this.mainDetails=t.details},i.onSubtitleFragProcessed=function(e,t){var i=t.frag,t=t.success;if(this.fragPrevious=i,this.state=h.State.IDLE,t){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var r,a=i.start,s=0;s<n.length;s++)if(a>=n[s].start&&a<=n[s].end){r=n[s];break}t=i.start+i.duration;r?r.end=t:n.push(r={start:a,end:t}),this.fragmentTracker.fragBuffered(i)}}},i.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset;if(0===i&&n!==Number.POSITIVE_INFINITY){var r=this.currentTrackId,a=this.levels;if(a.length&&a[r]&&a[r].details){var s=n-a[r].details.targetduration;s<=0||(t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=s)e.shift();else{if(!(e[t].start<s))break;e[t].start=s,t++}}),this.fragmentTracker.removeFragmentsInRange(i,s,f.PlaylistLevelType.SUBTITLE))}}},i.onFragBuffered=function(e,t){this.loadedmetadata||t.frag.type!==f.PlaylistLevelType.MAIN||null!=(t=this.media)&&t.buffered.length&&(this.loadedmetadata=!0)},i.onError=function(e,t){var t=t.frag;t&&t.type===f.PlaylistLevelType.SUBTITLE&&(null!=(t=this.fragCurrent)&&t.loader&&this.fragCurrent.loader.abort(),this.state=h.State.IDLE)},i.onSubtitleTracksUpdated=function(e,t){var i=this,t=t.subtitleTracks;this.tracksBuffered=[],this.levels=t.map(function(e){return new n.Level(e)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(e){i.tracksBuffered[e.id]=[]}),this.mediaBuffer=null},i.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){t=this.levels[this.currentTrackId];null!=t&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(e,t){var i=t.details,t=t.id,n=this.currentTrackId,r=this.levels;if(r.length){var a=r[n];if(!(t>=r.length||t!==n)&&a){this.mediaBuffer=this.mediaBufferTimeRanges;r=0;if(i.live||null!=(n=a.details)&&n.live){n=this.mainDetails;if(i.deltaUpdateFailed||!n)return;var s=n.fragments[0];a.details?0===(r=this.alignPlaylists(i,a.details))&&s&&(r=s.start,(0,c.addSliding)(i,r)):i.hasProgramDateTime&&n.hasProgramDateTime?((0,o.alignMediaPlaylistByPDT)(i,n),r=i.fragments[0].start):s&&(r=s.start,(0,c.addSliding)(i,r))}a.details=i,this.levelLastLoaded=t,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(a.details,r),this.tick(),!i.live||this.fragCurrent||!this.media||this.state!==h.State.IDLE||(0,u.findFragmentByPTS)(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}},i._handleFragmentLoadComplete=function(e){var i=e.frag,e=e.payload,t=i.decryptdata,n=this.hls;if(!this.fragContextChanged(i)&&e&&0<e.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method){var r=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).then(function(e){var t=performance.now();n.trigger(a.Events.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:r,tdecrypt:t}})})}},i.doTick=function(){if(this.media){if(this.state===h.State.IDLE){var e=this.currentTrackId,t=this.levels;if(t.length&&t[e]&&t[e].details){var t=t[e].details,e=t.targetduration,i=this.config,n=this.getLoadPosition(),n=l.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n-e,i.maxBufferHole),r=n.end,n=n.len,a=this.getFwdBufferInfo(this.media,f.PlaylistLevelType.MAIN);if(!(n>this.getMaxBufferLength(null==a?void 0:a.len)+e)){var s,n=t.fragments,a=n.length,e=t.edge,o=this.fragPrevious;if(r<e){e=i.maxFragLookUpTolerance;!(s=(0,u.findFragmentByPTS)(o,n,Math.max(n[0].start,r),e))&&o&&o.start<n[0].start&&(s=n[0])}else s=n[a-1];(s=this.mapToInitFragWhenRequired(s))&&this.fragmentTracker.getState(s)===d.FragmentState.NOT_LOADED&&(s.encrypted?this.loadKey(s,t):this.loadFragment(s,t,r))}}}}else this.state=h.State.IDLE},i.getMaxBufferLength=function(e){var t=p.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},i.loadFragment=function(e,t,i){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,e,t,i))},r((t=m).prototype,[{key:"mediaBufferTimeRanges",get:function(){return new v(this.tracksBuffered[this.currentTrackId]||[])}}]),Object.defineProperty(t,"prototype",{writable:!1});var p,g=m,v=function(n){this.buffered=void 0;function t(e,t,i){if((t>>>=0)>i-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than the maximum bound ("+i+")");return n[t][e]}this.buffered={get length(){return n.length},end:function(e){return t("end",e,n.length)},start:function(e){return t("start",e,n.length)}}};function m(e,t){return(e=p.call(this,e,t,"[subtitle-stream-controller]")||this).levels=[],e.currentTrackId=-1,e.tracksBuffered=[],e.mainDetails=null,e._registerListeners(),e}},"./src/controller/subtitle-track-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n,l=i("./src/events.ts"),r=i("./src/utils/texttrack-utils.ts"),t=i("./src/controller/base-playlist-controller.ts"),a=i("./src/types/loader.ts");function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=t.default,i=n,(t=u).prototype=Object.create(i.prototype),o(t.prototype.constructor=t,i),(t=u.prototype).destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,n.prototype.destroy.call(this)},t.registerListeners=function(){var e=this.hls;e.on(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(l.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(l.Events.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},t.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},t.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach(function(e){(0,r.clearCurrentCues)(e)}),this.subtitleTrack=-1,this.media=null)},t.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},t.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},t.onSubtitleTrackLoaded=function(e,t){var i=t.id,n=t.details,r=this.trackId,r=this.tracksInGroup[r];if(r){var a=r.details;r.details=t.details,this.log("subtitle track "+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,t,a))}else this.warn("Invalid subtitle track id "+i)},t.onLevelLoading=function(e,t){this.switchLevel(t.level)},t.onLevelSwitching=function(e,t){this.switchLevel(t.level)},t.switchLevel=function(e){e=this.hls.levels[e];if(null!=e&&e.textGroupIds){var t=e.textGroupIds[e.urlId];if(this.groupId!==t){var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,i=this.tracks.filter(function(e){return!t||e.groupId===t}),n=(this.tracksInGroup=i,this.findTrackId(null==e?void 0:e.name)||this.findTrackId()),r=(this.groupId=t,{subtitleTracks:i});this.log("Updating subtitle tracks, "+i.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(l.Events.SUBTITLE_TRACKS_UPDATED,r),-1!==n&&this.setSubtitleTrack(n,e)}}},t.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var n=t[i];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1},t.onError=function(e,t){n.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===a.PlaylistContextType.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},t.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var i=t.id,n=t.groupId,t=t.url;if(e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(l.Events.SUBTITLE_TRACK_LOADING,{url:t,id:i,groupId:n,deliveryDirectives:e||null})}},t.toggleTrackModes=function(e){var t=this,i=this.media,n=this.trackId;if(i){var i=c(i.textTracks),r=i.filter(function(e){return e.groupId===t.groupId});if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{i=r[n];i&&(i.mode="disabled")}n=r[e];n&&(n.mode=this.subtitleDisplay?"showing":"hidden")}},t.setSubtitleTrack=function(e,t){var i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!=(n=i[e])&&n.details)||e<-1||e>=i.length)){this.clearTimer();var n=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,n){var i=n.id,r=n.groupId,a=n.name,s=n.type,o=n.url,i=(this.hls.trigger(l.Events.SUBTITLE_TRACK_SWITCH,{id:i,groupId:void 0===r?"":r,name:a,type:s,url:o}),this.switchParams(n.url,null==t?void 0:t.details));this.loadPlaylist(i)}else this.hls.trigger(l.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},t.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=c(this.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=i;else if("showing"===t[i].mode){e=i;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},s((i=u).prototype,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),Object.defineProperty(i,"prototype",{writable:!1});function u(e){var t;return(t=n.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t._subtitleDisplay=!0,t.registerListeners(),t}function c(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];"subtitles"===n.kind&&n.label&&t.push(e[i])}return t}const d=u},"./src/controller/timeline-controller.ts":(e,t,i)=>{i.r(t),i.d(t,{TimelineController:()=>n});var s=i("./src/polyfills/number.ts"),h=i("./src/events.ts"),a=i("./src/utils/cea-608-parser.ts"),o=i("./src/utils/output-filter.ts"),l=i("./src/utils/webvtt-parser.ts"),u=i("./src/utils/texttrack-utils.ts"),c=i("./src/utils/imsc1-ttml-parser.ts"),d=i("./src/utils/mp4-tools.ts"),f=i("./src/types/loader.ts"),p=i("./src/utils/logger.ts"),n=((t=r.prototype).destroy=function(){var e=this.hls;e.off(h.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(h.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(h.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(h.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(h.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(h.Events.FRAG_LOADING,this.onFragLoading,this),e.off(h.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(h.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(h.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(h.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(h.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(h.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,i,n,r){for(var a,s,o=!1,l=r.length;l--;){var u=r[l],c=(a=u[0],c=u[1],s=t,Math.min(c,i)-Math.max(a,s));if(0<=c&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],i),o=!0,.5<c/(i-t)))return}if(o||r.push([t,i]),this.config.renderTextTracksNatively){var d=this.captionsTracks[e];this.Cues.newCue(d,t,i,n)}else{d=this.Cues.newCue(null,t,i,n);this.hls.trigger(h.Events.CUES_PARSED,{type:"captions",cues:d,track:e})}},t.onInitPtsFound=function(e,t){var i=this,n=t.frag,r=t.id,a=t.initPTS,t=t.timescale,s=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=a,this.timescale[n.cc]=t),s.length&&(this.unparsedVttFrags=[],s.forEach(function(e){i.onFragLoaded(h.Events.FRAG_LOADED,e)}))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var n=t.textTracks[i];if(n[e])return n}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,i=this.captionsTracks,n=this.media,t=t[e],r=t.label,t=t.languageCode,a=this.getExistingTrack(e);if(a)i[e]=a,(0,u.clearCurrentCues)(i[e]),(0,u.sendAddTrackEvent)(i[e],n);else{a=this.createTextTrack("captions",r,t);a&&(a[e]=!0,i[e]=a)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(h.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]})}}},t.createTextTrack=function(e,t,i){var n=this.media;if(n)return n.addTextTrack(e,t,i)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){(0,u.clearCurrentCues)(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)(0,u.clearCurrentCues)(t[i])}},t.onSubtitleTracksUpdated=function(e,t){var o=this,t=(this.textTracks=[],t.subtitleTracks||[]),i=t.some(function(e){return e.textCodec===c.IMSC1_CODEC});if(this.config.enableWebVTT||i&&this.config.enableIMSC1){i=this.tracks&&t&&this.tracks.length===t.length;if(this.tracks=t||[],this.config.renderTextTracksNatively){var l=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var i,n,r;if(t<l.length){for(var a=null,s=0;s<l.length;s++)if(n=l[s],r=e,n&&n.label===r.name&&!n.textTrack1&&!n.textTrack2){a=l[s];break}a&&(i=a)}if(i)(0,u.clearCurrentCues)(i);else{t=o._captionsOrSubtitlesFromCharacteristics(e);(i=o.createTextTrack(t,e.name,e.lang))&&(i.mode="disabled")}i&&(i.groupId=e.groupId,o.textTracks.push(i))})}else if(!i&&this.tracks&&this.tracks.length){t=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}});this.hls.trigger(h.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t})}}},t._captionsOrSubtitlesFromCharacteristics=function(e){if(null!=(t=e.attrs)&&t.CHARACTERISTICS){var t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),e=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&e)return"captions"}return"subtitles"},t.onManifestLoaded=function(e,t){var i=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){t="textTrack"+t[1],t=i.captionsProperties[t];t&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e)}})},t.closedCaptionsForLevel=function(e){e=this.hls.levels[e.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){var i=this.cea608Parser1,n=this.cea608Parser2,r=this.lastSn,a=this.lastPartIndex;if(this.enabled&&i&&n&&t.frag.type===f.PlaylistLevelType.MAIN){var s=t.frag.sn,t=null!=(t=null==t||null==(t=t.part)?void 0:t.index)?t:-1;s===r+1||s===r&&t===a+1||(i.reset(),n.reset()),this.lastSn=s,this.lastPartIndex=t}},t.onFragLoaded=function(e,t){var i=t.frag,n=t.payload,r=this.initPTS,a=this.unparsedVttFrags;if(i.type===f.PlaylistLevelType.SUBTITLE)if(n.byteLength){if(!(0,s.isFiniteNumber)(r[i.cc]))return a.push(t),void(r.length&&this.hls.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Missing initial subtitle PTS")}));a=i.decryptdata,r="stats"in t;if(null==a||null==a.key||"AES-128"!==a.method||r){t=this.tracks[i.level],a=this.vttCCs;a[i.cc]||(a[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),t&&t.textCodec===c.IMSC1_CODEC?this._parseIMSC1(i,n):this._parseVTTs(i,n,a)}}else this.hls.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(t,e){var i=this,n=this.hls;(0,c.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],function(e){i._appendCues(e,t.level),n.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){p.logger.log("Failed to parse IMSC1: "+e),n.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})})},t._parseVTTs=function(t,i,e){var n=this,r=this.hls,a=null!=(a=t.initSegment)&&a.data?(0,d.appendUint8Array)(t.initSegment.data,new Uint8Array(i)):i;(0,l.parseWebVTT)(a,this.initPTS[t.cc],this.timescale[t.cc],e,t.cc,t.start,function(e){n._appendCues(e,t.level),r.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){n._fallbackToIMSC1(t,i),p.logger.log("Failed to parse VTT cue: "+e),r.trigger(h.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})})},t._fallbackToIMSC1=function(e,t){var i=this,n=this.tracks[e.level];n.textCodec||(0,c.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],function(){n.textCodec=c.IMSC1_CODEC,i._parseIMSC1(e,t)},function(){n.textCodec="wvtt"})},t._appendCues=function(e,t){var i=this.hls;if(this.config.renderTextTracksNatively){var n=this.textTracks[t];n&&"disabled"!==n.mode&&e.forEach(function(e){return(0,u.addCueToTrack)(n,e)})}else{var r=this.tracks[t];if(r){r=r.default?"default":"subtitles"+t;i.trigger(h.Events.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}},t.onFragDecrypted=function(e,t){var i=t.frag;i.type===f.PlaylistLevelType.SUBTITLE&&((0,s.isFiniteNumber)(this.initPTS[i.cc])?this.onFragLoaded(h.Events.FRAG_LOADED,t):this.unparsedVttFrags.push(t))},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var i=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&i&&n){var r=t.frag,a=t.samples;if(r.type!==f.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(var s=0;s<a.length;s++){var o=a[s].bytes;if(o){o=this.extractCea608Data(o);i.addData(a[s].pts,o[0]),n.addData(a[s].pts,o[1])}}}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.endOffsetSubtitles,t=t.type,a=this.media;if(a&&!(a.currentTime<n)){if(!t||"video"===t){var s=this.captionsTracks;Object.keys(s).forEach(function(e){return(0,u.removeCuesInRange)(s[e],i,n)})}if(this.config.renderTextTracksNatively&&0===i&&void 0!==r){var o=this.textTracks;Object.keys(o).forEach(function(e){return(0,u.removeCuesInRange)(o[e],i,r)})}}},t.extractCea608Data=function(e){for(var t=[[],[]],i=31&e[0],n=2,r=0;r<i;r++){var a=e[n++],s=127&e[n++],o=127&e[n++];if((0!=s||0!=o)&&0!=(4&a)){a=3&a;0!=a&&1!=a||(t[a].push(s),t[a].push(o))}}return t},r);function r(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new o.default(this,"textTrack1"),i=new o.default(this,"textTrack2"),n=new o.default(this,"textTrack3"),r=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,i),this.cea608Parser2=new a.default(3,n,r)}e.on(h.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(h.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(h.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(h.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(h.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(h.Events.FRAG_LOADING,this.onFragLoading,this),e.on(h.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(h.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(h.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(h.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(h.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(h.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}},"./src/crypt/aes-crypto.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});r.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)};var n=r;function r(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}},"./src/crypt/aes-decryptor.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r,removePadding:()=>function(e){var t=e.byteLength,i=t&&new DataView(e.buffer).getUint8(t-1);return i?(0,n.sliceUint8)(e,0,t-i):e}});var n=i("./src/utils/typed-array.ts");(t=a.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},t.initTable=function(){for(var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],s=i[3],i=this.invSubMix,o=i[0],l=i[1],u=i[2],c=i[3],d=new Uint32Array(256),h=0,f=0,p=0,p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=f^f<<1^f<<2^f<<3^f<<4,v=(e[h]=g=g>>>8^255&g^99,d[t[g]=h]),m=d[v],y=d[m],A=257*d[g]^16843008*g;n[h]=A<<24|A>>>8,r[h]=A<<16|A>>>16,a[h]=A<<8|A>>>24,s[h]=A,o[g]=(A=16843009*y^65537*m^257*v^16843008*h)<<24|A>>>8,l[g]=A<<16|A>>>16,u[g]=A<<8|A>>>24,c[g]=A,h?(h=v^d[d[d[y^v]]],f^=d[d[f]]):h=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a,s,o,l=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),d=this.sBox,h=this.rcon,e=this.invSubMix,f=e[0],p=e[1],g=e[2],v=e[3],m=0;m<l;m++)m<r?s=u[m]=t[m]:(o=s,m%r==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=h[m/r|0]<<24):6<r&&m%r==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),u[m]=s=(u[m-r]^o)>>>0);for(a=0;a<l;a++)m=l-a,o=3&a?u[m]:u[m-4],c[a]=a<4||m<=4?o:f[d[o>>>24]]^p[d[o>>>16&255]]^g[d[o>>>8&255]]^v[d[255&o]],c[a]=c[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,i){for(var n,r,a,s,o,l,u,c,d,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,A=this.invSBox,E=this.invSubMix,T=E[0],b=E[1],k=E[2],S=E[3],E=this.uint8ArrayToUint32Array_(i),_=E[0],C=E[1],L=E[2],D=E[3],R=new Int32Array(e),I=new Int32Array(R.length),O=this.networkToHostOrderSwap;t<R.length;){for(d=O(R[t]),h=O(R[t+1]),f=O(R[t+2]),p=O(R[t+3]),o=d^y[0],l=p^y[1],u=f^y[2],c=h^y[3],g=4,v=1;v<m;v++)n=T[o>>>24]^b[l>>16&255]^k[u>>8&255]^S[255&c]^y[g],r=T[l>>>24]^b[u>>16&255]^k[c>>8&255]^S[255&o]^y[g+1],a=T[u>>>24]^b[c>>16&255]^k[o>>8&255]^S[255&l]^y[g+2],s=T[c>>>24]^b[o>>16&255]^k[l>>8&255]^S[255&u]^y[g+3],o=n,l=r,u=a,c=s,g+=4;n=A[o>>>24]<<24^A[l>>16&255]<<16^A[u>>8&255]<<8^A[255&c]^y[g],r=A[l>>>24]<<24^A[u>>16&255]<<16^A[c>>8&255]<<8^A[255&o]^y[g+1],a=A[u>>>24]<<24^A[c>>16&255]<<16^A[o>>8&255]<<8^A[255&l]^y[g+2],s=A[c>>>24]<<24^A[o>>16&255]<<16^A[l>>8&255]<<8^A[255&u]^y[g+3],I[t]=O(n^_),I[t+1]=O(s^C),I[t+2]=O(a^L),I[t+3]=O(r^D),_=d,C=h,L=f,D=p,t+=4}return I.buffer};var r=a;function a(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}},"./src/crypt/decrypter.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var s=i("./src/crypt/aes-crypto.ts"),o=i("./src/crypt/fast-aes-key.ts"),l=i("./src/crypt/aes-decryptor.ts"),r=i("./src/utils/logger.ts"),u=i("./src/utils/mp4-tools.ts"),c=i("./src/utils/typed-array.ts"),n=((t=a.prototype).destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e)return e=new Uint8Array(e),this.reset(),this.removePKCS7Padding?(0,l.removePadding)(e):e;this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,i,n){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,i);var r=this.flush();r&&n(r.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,i).then(n)},t.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,a=this.remainderData,a=(this.logOnce("JS AES decrypt"),a&&(e=(0,u.appendUint8Array)(a,e),this.remainderData=null),this.getValidChunk(e));if(!a.length)return null;n&&(i=n);e=this.softwareDecrypter,n=((e=e||(this.softwareDecrypter=new l.default)).expandKey(t),r);return this.currentResult=e.decrypt(a.buffer,0,i),this.currentIV=(0,c.sliceUint8)(a,-16).buffer,n||null},t.webCryptoDecrypt=function(t,i,n){var r=this,a=this.subtle;return this.key===i&&this.fastAesKey||(this.key=i,this.fastAesKey=new o.default(a,i)),this.fastAesKey.expandKey().then(function(e){return a?new s.default(a,n).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return r.onWebCryptoError(e,t,i,n)})},t.onWebCryptoError=function(e,t,i,n){return r.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,i,n)},t.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=(0,c.sliceUint8)(e,0,i),this.remainderData=(0,c.sliceUint8)(e,i)),t},t.logOnce=function(e){this.logEnabled&&(r.logger.log("[decrypter.ts]: "+e),this.logEnabled=!1)},a);function a(e,t,i){i=(void 0===i?{}:i).removePKCS7Padding,i=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=i)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}},"./src/crypt/fast-aes-key.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});r.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])};var n=r;function r(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}},"./src/demux/aacdemuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var r,t=i("./src/demux/base-audio-demuxer.ts"),n=i("./src/demux/adts.ts"),a=i("./src/utils/logger.ts"),s=i("./src/demux/id3.ts");function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r=t.default,i=r,(t=u).prototype=Object.create(i.prototype),o(t.prototype.constructor=t,i),(t=u.prototype).resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},u.probe=function(e){if(!e)return!1;for(var t=(s.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(n.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},t.canParse=function(e,t){return n.canParse(e,t)},t.appendFrame=function(e,t,i){n.initTrackConfig(e,this.observer,t,i,e.manifestCodec);e=n.appendFrame(e,t,i,this.basePTS,this.frameIndex);if(e&&0===e.missing)return e};const l=u;function u(e,t){var i;return(i=r.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}},"./src/demux/adts.ts":(e,t,i)=>{i.r(t),i.d(t,{appendFrame:()=>function(e,t,i,n,r){var a,n=n+r*u(e.samplerate),r=c(t,i);{var s,o;if(r)return s=r.frameLength,r=r.headerLength,s=r+s,o=Math.max(0,i+s-t.length),r=(o?(a=new Uint8Array(s-r)).set(t.subarray(i+r,t.length),0):a=t.subarray(i+r,i+s),{unit:a,pts:n}),o||e.samples.push(r),{sample:r,length:s,missing:o}}e=t.length-i;return(a=new Uint8Array(e)).set(t.subarray(i,t.length),0),{sample:{unit:a,pts:n},length:e,missing:-1}},canGetFrameLength:()=>o,canParse:()=>function(e,t){return o(e,t)&&n(e,t)&&s(e,t)<=e.length-t},getAudioConfig:()=>a,getFrameDuration:()=>u,getFullFrameLength:()=>s,getHeaderLength:()=>r,initTrackConfig:()=>function(e,t,i,n,r){if(!e.samplerate){t=a(t,i,n,r);t&&(e.config=t.config,e.samplerate=t.samplerate,e.channelCount=t.channelCount,e.codec=t.codec,e.manifestCodec=t.manifestCodec,d.logger.log("parsed codec:"+e.codec+", rate:"+t.samplerate+", channels:"+t.channelCount))}},isHeader:()=>l,isHeaderPattern:()=>n,parseFrameHeader:()=>c,probe:()=>function(e,t){if(l(e,t)){var i=r(e,t);if(t+i>=e.length)return!1;var n=s(e,t);if(n<=i)return!1;i=t+n;return i===e.length||l(e,i)}return!1}});var d=i("./src/utils/logger.ts"),h=i("./src/errors.ts"),f=i("./src/events.ts");function a(e,t,i,n){var r,a,s=navigator.userAgent.toLowerCase(),o=n,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=1+((192&t[i+2])>>>6),c=(60&t[i+2])>>>2;if(!(l.length-1<c))return r=(1&t[i+2])<<2,r|=(192&t[i+3])>>>6,d.logger.log("manifest codec:"+n+", ADTS type:"+u+", samplingIndex:"+c),t=/firefox/i.test(s)?6<=c?(u=5,a=new Array(4),c-3):(u=2,a=new Array(2),c):-1!==s.indexOf("android")?(u=2,a=new Array(2),c):(u=5,a=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=c?c-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=c&&1==r||/vivaldi/i.test(s))||!n&&1==r)&&(u=2,a=new Array(2)),c)),a[0]=u<<3,a[0]|=(14&c)>>1,a[1]|=(1&c)<<7,a[1]|=r<<3,5===u&&(a[1]|=(14&t)>>1,a[2]=(1&t)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:l[c],channelCount:r,codec:"mp4a.40."+u,manifestCodec:o};e.trigger(f.Events.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}function n(e,t){return 255===e[t]&&240==(246&e[t+1])}function r(e,t){return 1&e[t+1]?7:9}function s(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function o(e,t){return t+5<e.length}function l(e,t){return t+1<e.length&&n(e,t)}function u(e){return 9216e4/e}function c(e,t){var i=r(e,t);if(t+i<=e.length){e=s(e,t)-i;if(0<e)return{headerLength:i,frameLength:e}}}},"./src/demux/base-audio-demuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r,initPTSFn:()=>v});var c=i("./src/polyfills/number.ts"),d=i("./src/demux/id3.ts"),h=i("./src/types/demuxer.ts"),f=i("./src/demux/dummy-demuxed-track.ts"),p=i("./src/utils/mp4-tools.ts"),g=i("./src/utils/typed-array.ts");(t=n.prototype).resetInitSegment=function(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,i){},t.demux=function(e,t){this.cachedData&&(e=(0,p.appendUint8Array)(this.cachedData,e),this.cachedData=null);var i,n=d.getID3Data(e,0),r=n?n.length:0,a=this._audioTrack,s=this._id3Track,o=n?d.getTimeStamp(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&(0,c.isFiniteNumber)(o))&&(this.basePTS=v(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&0<n.length&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:h.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){var u=this.appendFrame(a,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i=r+=u.length):r=l}else d.canParse(e,r)?(n=d.getID3Data(e,r),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:h.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),i=r+=n.length):r++;if(r===l&&i!==l){u=(0,g.sliceUint8)(e,i);this.cachedData?this.cachedData=(0,p.appendUint8Array)(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:(0,f.dummyTrack)(),id3Track:s,textTrack:(0,f.dummyTrack)()}},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:(0,f.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,f.dummyTrack)()}},t.destroy=function(){};var v=function(e,t,i){return(0,c.isFiniteNumber)(e)?90*e:9e4*t+(i||0)};function n(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}const r=n},"./src/demux/chunk-cache.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});(i=r.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},i.flush=function(){var e=this.chunks,a=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var t=new Uint8Array(a),i=0,n=0;n<e.length;n++){var r=e[n];t.set(r,i),i+=r.length}return t}(e),this.reset(),e):new Uint8Array(0)},i.reset=function(){this.chunks.length=0,this.dataLength=0};var n=r;function r(){this.chunks=[],this.dataLength=0}},"./src/demux/dummy-demuxed-track.ts":(e,t,i)=>{i.r(t),i.d(t,{dummyTrack:()=>function(e,t){return{type:e=void 0===e?"":e,id:-1,pid:-1,inputTimeScale:t=void 0===t?9e4:t,sequenceNumber:-1,samples:[],dropped:0}}})},"./src/demux/exp-golomb.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i("./src/utils/logger.ts");(t=a.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");n.set(e.subarray(i,i+t)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},t.skipBits=function(e){var t;this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)>>3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return 32<e&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},t.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,i=8,n=0;n<e;n++)t=0===(i=0!==i?(t+this.readEG()+256)%256:i)?t:i},t.readSPS=function(){var e,t,i,n=0,r=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this),g=(o(),o());if(l(5),d(3),o(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){g=u();if(3===g&&d(1),f(),f(),d(1),c())for(t=3!==g?8:12,i=0;i<t;i++)c()&&p(i<6?16:64)}f();g=u();if(0===g)u();else if(1===g)for(d(1),h(),h(),e=u(),i=0;i<e;i++)h();f(),d(1);var g=u(),f=u(),l=l(1),v=(0===l&&d(1),d(1),c()&&(n=u(),r=u(),a=u(),s=u()),[1,1]);if(c()&&c())switch(o()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(g+1)-2*n-2*r),height:(2-l)*(f+1)*16-(l?2:4)*(a+s),pixelRatio:v}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()};const r=a;function a(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}},"./src/demux/id3.ts":(e,t,i)=>{i.r(t),i.d(t,{canParse:()=>r,decodeFrame:()=>f,getID3Data:()=>n,getID3Frames:()=>h,getTimeStamp:()=>a,isFooter:()=>l,isHeader:()=>o,isTimeStampFrame:()=>s,testables:()=>A,utf8ArrayToStr:()=>y});var c,o=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},l=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},n=function(e,t){for(var i=t,n=0;o(e,t);)n=(n+=10)+u(e,t+6),l(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(i,i+n)},u=function(e,t){var i=0,i=(127&e[t])<<21;return(i=(i|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},r=function(e,t){return o(e,t)&&u(e,t+6)+10<=e.length-t},a=function(e){for(var t=h(e),i=0;i<t.length;i++){var n=t[i];if(s(n))return m(n)}},s=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=u(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}},h=function(e){for(var t=0,i=[];o(e,t);){for(var n=u(e,t+6),r=(t+=10)+n;t+8<r;){var a=d(e.subarray(t)),s=f(a);s&&i.push(s),t+=a.size+10}l(e,t)&&(t+=10)}return i},f=function(e){return("PRIV"===e.type?p:"W"===e.type[0]?v:g)(e)},p=function(e){var t,i;if(!(e.size<2))return t=y(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:i.buffer}},g=function(e){if(!(e.size<2)){var t;if("TXXX"===e.type)return t=1,t=(t+=(i=y(e.data.subarray(1),!0)).length+1,y(e.data.subarray(t))),{key:e.type,info:i,data:t};var i=y(e.data.subarray(1));return{key:e.type,data:i}}},v=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=y(e.data.subarray(1),!0),t=(t+=i.length+1,y(e.data.subarray(t)));return{key:e.type,info:i,data:t}}i=y(e.data);return{key:e.type,data:i}},m=function(e){var t;if(8===e.data.byteLength)return t=1&(e=new Uint8Array(e.data))[3],e=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7],e/=45,t&&(e+=47721858.84),Math.round(e)},y=function(e,t){void 0===t&&(t=!1);var i,n;c=c||void 0===self.TextDecoder?c:new self.TextDecoder("utf-8");if(c)return i=c.decode(e),t?-1!==(n=i.indexOf("\0"))?i.substring(0,n):i:i.replace(/\0/g,"");for(var r,a,s,o=e.length,l="",u=0;u<o;){if(0===(r=e[u++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[u++],s=e[u++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&s)<<0)}}return l},A={decodeTextFrame:g}},"./src/demux/mp3demuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var r,t=i("./src/demux/base-audio-demuxer.ts"),n=i("./src/demux/id3.ts"),a=i("./src/utils/logger.ts"),s=i("./src/demux/mpegaudio.ts");function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r=t.default,i=r,(t=l).prototype=Object.create(i.prototype),o(t.prototype.constructor=t,i),(t=l.prototype).resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},l.probe=function(e){if(!e)return!1;for(var t=(n.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(s.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},t.canParse=function(e,t){return s.canParse(e,t)},t.appendFrame=function(e,t,i){if(null!==this.basePTS)return s.appendFrame(e,t,i,this.basePTS,this.frameIndex)};function l(){return r.apply(this,arguments)||this}const u=l},"./src/demux/mp4demuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var a=i("./src/polyfills/number.ts"),s=i("./src/types/demuxer.ts"),c=i("./src/utils/mp4-tools.ts"),d=i("./src/demux/dummy-demuxed-track.ts"),o=/\/emsg[-/]ID3/i;(t=r.prototype).resetTimeStamp=function(){},t.resetInitSegment=function(e,t,i,n){var e=(0,c.parseInitSegment)(e),r=this.videoTrack=(0,d.dummyTrack)("video",1),a=this.audioTrack=(0,d.dummyTrack)("audio",1),s=this.txtTrack=(0,d.dummyTrack)("text",1);if(this.id3Track=(0,d.dummyTrack)("id3",1),this.timeOffset=0,e.video){var o=e.video,l=o.id,u=o.timescale,o=o.codec;r.id=l,r.timescale=s.timescale=u,r.codec=o}if(e.audio){l=e.audio,u=l.id,o=l.timescale,e=l.codec;a.id=u,a.timescale=o,a.codec=e}s.id=c.RemuxerTrackIdConfig.text,r.sampleDuration=0,r.duration=a.duration=n},t.resetContiguity=function(){},r.probe=function(e){return e=16384<e.length?e.subarray(0,16384):e,0<(0,c.findBox)(e,["moof"]).length},t.demux=function(e,t){this.timeOffset=t;var i=e,n=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=(0,c.appendUint8Array)(this.remainderData,e));e=(0,c.segmentValidRange)(i);this.remainderData=e.remainder,n.samples=e.valid||new Uint8Array}else n.samples=i;e=this.extractID3Track(n,t);return r.samples=(0,c.parseSamples)(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:e,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,i=this.txtTrack,n=(t.samples=this.remainderData||new Uint8Array,this.remainderData=null,this.extractID3Track(t,this.timeOffset));return i.samples=(0,c.parseSamples)(e,t),{videoTrack:t,audioTrack:(0,d.dummyTrack)(),id3Track:n,textTrack:(0,d.dummyTrack)()}},t.extractID3Track=function(e,n){var r=this.id3Track;if(e.samples.length){e=(0,c.findBox)(e.samples,["emsg"]);e&&e.forEach(function(e){e=(0,c.parseEmsg)(e);if(o.test(e.schemeIdUri)){var t=(0,a.isFiniteNumber)(e.presentationTime)?e.presentationTime/e.timeScale:n+e.presentationTimeDelta/e.timeScale,i=4294967295===e.eventDuration?Number.POSITIVE_INFINITY:e.eventDuration/e.timeScale,e=(i<=.001&&(i=Number.POSITIVE_INFINITY),e.payload);r.samples.push({data:e,len:e.byteLength,dts:t,pts:t,type:s.MetadataSchema.emsg,duration:i})}})}return r},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){};const n=r;function r(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}},"./src/demux/mpegaudio.ts":(e,t,i)=>{i.r(t),i.d(t,{appendFrame:()=>function(e,t,i,n,r){if(!(i+24>t.length)){var a=s(t,i);if(a&&i+a.frameLength<=t.length)return n=n+r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:t.subarray(i,i+a.frameLength),pts:n,dts:n},e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(r),{sample:r,length:a.frameLength,missing:0}}},canParse:()=>function(e,t){return r(e,t)&&4<=e.length-t},isHeader:()=>a,isHeaderPattern:()=>r,parseHeader:()=>s,probe:()=>function(e,t){{var i,n;if(t+1<e.length&&r(e,t))return n=s(e,t),i=4,null!=n&&n.frameLength&&(i=n.frameLength),(n=t+i)===e.length||a(e,n)}return!1}});var d=null,h=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],f=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],p=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],g=[0,1,1,4];function s(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!=i&&0!=r&&15!=r&&3!=a){var s=e[t+2]>>1&1,o=e[t+3]>>6,r=1e3*h[14*(3==i?3-n:3==n?3:4)+r-1],a=f[3*(3==i?0:2==i?1:2)+a],l=3==o?1:2,i=p[i][n],u=g[n],c=8*i*u,i=Math.floor(i*r/a+s)*u;if(null===d){s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);d=s?parseInt(s[1]):0}return d&&d<=87&&2==n&&224e3<=r&&0==o&&(e[t+3]=128|e[t+3]),{sampleRate:a,channelCount:l,frameLength:i,samplesPerFrame:c}}}function r(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function a(e,t){return t+1<e.length&&r(e,t)}},"./src/demux/sample-aes.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i("./src/crypt/decrypter.ts"),u=i("./src/utils/mp4-tools.ts");(t=a.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(t,i,n,r){var a=t[i].unit;if(!(a.length<=16)){var e=a.subarray(16,a.length-a.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),s=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e);a.set(e,16),r||s.decryptAacSamples(t,i+1,n)})}},t.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},t.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e},t.decryptAvcSample=function(t,i,n,r,a,s){var o=(0,u.discardEPB)(a.data),e=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(e.buffer,function(e){a.data=l.getAvcDecryptedUnit(o,e),s||l.decryptAvcSamples(t,i,n+1,r)})},t.decryptAvcSamples=function(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,n,a,s),!s)return}}}};const r=a;function a(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}},"./src/demux/transmuxer-interface.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var l=i("./src/demux/webworkify-webpack.js"),u=i("./src/events.ts"),b=i("./src/demux/transmuxer.ts"),k=i("./src/utils/logger.ts"),c=i("./src/errors.ts"),t=i("./src/utils/mediasource-helper.ts"),d=i("./node_modules/eventemitter3/index.js"),h=(0,t.getMediaSource)()||{isTypeSupported:function(){return!1}},n=((i=r.prototype).destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0;else{e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},i.push=function(e,t,i,n,r,a,s,o,l,u){var c=this,d=(l.transmuxing.start=self.performance.now(),this.transmuxer),h=this.worker,f=(a||r).start,p=r.decryptdata,g=this.frag,v=!(g&&r.cc===g.cc),m=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,A=this.part?l.part-this.part.index:-1,E=0==y&&1<l.id&&l.id===(null==g?void 0:g.stats.chunkCount),E=!m&&(1==y||0==y&&(1==A||E&&A<=0)),T=self.performance.now(),T=((m||y||0===r.stats.parsing.start)&&(r.stats.parsing.start=T),!a||!A&&E||(a.stats.parsing.start=T),!(g&&(null==(y=r.initSegment)?void 0:y.url)===(null==(A=g.initSegment)?void 0:A.url))),y=new b.TransmuxState(v,E,o,m,f,T);if(!E||v||T){k.logger.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+v+"\n        trackSwitch: "+m+"\n        contiguous: "+E+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+f+"\n        initSegmentChange: "+T);g=new b.TransmuxConfig(i,n,t,s,u);this.configureTransmuxer(g)}if(this.frag=r,this.part=a,h)h.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:y},e instanceof ArrayBuffer?[e]:[]);else if(d){A=d.push(e,p,l,y);(0,b.isPromise)(A)?A.then(function(e){c.handleTransmuxComplete(e)}):this.handleTransmuxComplete(A)}},i.flush=function(t){var i=this,e=(t.transmuxing.start=self.performance.now(),this.transmuxer),n=this.worker;if(n)n.postMessage({cmd:"flush",chunkMeta:t});else if(e){n=e.flush(t);(0,b.isPromise)(n)?n.then(function(e){i.handleFlushResult(e,t)}):this.handleFlushResult(n,t)}},i.handleFlushResult=function(e,t){var i=this;e.forEach(function(e){i.handleTransmuxComplete(e)}),this.onFlush(t)},i.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":k.logger[t.data.logType]&&k.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},i.configureTransmuxer=function(e){var t=this.worker,i=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):i&&i.configure(e)},i.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},r);function r(e,t,i,n){function r(e,t){(t=t||{}).frag=s.frag,t.id=s.id,s.hls.trigger(e,t)}var a,s=this,o=(this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,e.config),i=(this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=i,this.onFlush=n,this.observer=new d.EventEmitter,this.observer.on(u.Events.FRAG_DECRYPTED,r),this.observer.on(u.Events.ERROR,r),{mp4:h.isTypeSupported("video/mp4"),mpeg:h.isTypeSupported("audio/mpeg"),mp3:h.isTypeSupported('audio/mp4; codecs="mp3"')}),n=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){k.logger.log("demuxing in webworker");try{a=this.worker=(0,l.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),a.addEventListener("message",this.onwmsg),a.onerror=function(e){s.useWorker=!1,k.logger.warn("Exception in webworker, fallback to inline"),s.hls.trigger(u.Events.ERROR,{type:c.ErrorTypes.OTHER_ERROR,details:c.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},a.postMessage({cmd:"init",typeSupported:i,vendor:n,id:t,config:JSON.stringify(o)})}catch(e){k.logger.warn("Error in worker:",e),k.logger.error("Error while initializing DemuxerWorker, fallback to inline"),a&&self.URL.revokeObjectURL(a.objectURL),this.transmuxer=new b.default(this.observer,i,o,n,t),this.worker=null}}else this.transmuxer=new b.default(this.observer,i,o,n,t)}},"./src/demux/transmuxer-worker.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>function(a){function s(e,t){a.postMessage({event:e,data:t})}var o=new r.EventEmitter;o.on(n.Events.FRAG_DECRYPTED,s),o.on(n.Events.ERROR,s),a.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i,n=JSON.parse(t.config);a.transmuxer=new l.default(o,t.typeSupported,n,t.vendor,t.id),(0,u.enableLogs)(n.debug,t.id);for(i in u.logger)!function(t){u.logger[t]=function(e){s("workerLog",{logType:t,message:e})}}(i);s("init",null);break;case"configure":a.transmuxer.configure(t.config);break;case"demux":n=a.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);(0,l.isPromise)(n)?n.then(function(e){c(a,e)}):c(a,n);break;case"flush":var r=t.chunkMeta,n=a.transmuxer.flush(r);(0,l.isPromise)(n)?n.then(function(e){d(a,e,r)}):d(a,n,r)}})}});var l=i("./src/demux/transmuxer.ts"),n=i("./src/events.ts"),u=i("./src/utils/logger.ts"),r=i("./node_modules/eventemitter3/index.js");function c(e,t){if(!((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment))return!1;var i=[],n=t.remuxResult,r=n.audio,n=n.video;return r&&a(i,r),n&&a(i,n),e.postMessage({event:"transmuxComplete",data:t},i),!0}function a(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function d(i,e,t){e.reduce(function(e,t){return c(i,t)||e},!1)||i.postMessage({event:"transmuxComplete",data:e[0]}),i.postMessage({event:"flush",data:t})}},"./src/demux/transmuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{TransmuxConfig:()=>h,TransmuxState:()=>f,default:()=>u,isPromise:()=>d});var y,o=i("./src/events.ts"),l=i("./src/errors.ts"),n=i("./src/crypt/decrypter.ts"),t=i("./src/demux/aacdemuxer.ts"),m=i("./src/demux/mp4demuxer.ts"),r=i("./src/demux/tsdemuxer.ts"),a=i("./src/demux/mp3demuxer.ts"),s=i("./src/remux/mp4-remuxer.ts"),A=i("./src/remux/passthrough-remuxer.ts"),E=i("./src/utils/logger.ts");try{y=self.performance.now.bind(self.performance)}catch(e){E.logger.debug("Unable to use Performance API on this environment"),y=self.Date.now}var T=[{demux:r.default,remux:s.default},{demux:m.default,remux:A.default},{demux:t.default,remux:s.default},{demux:a.default,remux:s.default}],u=((i=c.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},i.push=function(e,t,i,n){var r=this,a=i.transmuxing,e=(a.executeStart=y(),new Uint8Array(e)),s=this.config,o=this.currentTransmuxState,l=this.transmuxConfig,n=(n&&(this.currentTransmuxState=n),n||o),o=n.contiguous,u=n.discontinuity,c=n.trackSwitch,d=n.accurateTimeOffset,h=n.timeOffset,n=n.initSegmentChange,f=l.audioCodec,p=l.videoCodec,g=l.defaultInitPts,v=l.duration,m=l.initSegmentData,f=((u||c||n)&&this.resetInitSegment(m,f,p,v),(u||n)&&this.resetInitialTimestamp(g),o||this.resetContiguity(),m=null,m=0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method?t:m);if(f&&"AES-128"===f.method){p=this.getDecrypter();if(!s.enableSoftwareAES)return this.decryptionPromise=p.webCryptoDecrypt(e,f.key.buffer,f.iv.buffer).then(function(e){e=r.push(e,null,i);return r.decryptionPromise=null,e}),this.decryptionPromise;v=p.softwareDecrypt(e,f.key.buffer,f.iv.buffer);if(!v)return a.executeEnd=y(),b(i);e=new Uint8Array(v)}this.needsProbing(e,u,c)&&this.configureTransmuxer(e,l);n=this.transmux(e,f,h,d,i),g=this.currentTransmuxState;return g.contiguous=!0,g.discontinuity=!1,g.trackSwitch=!1,a.executeEnd=y(),n},i.flush=function(t){var i=this,e=t.transmuxing,n=(e.executeStart=y(),this.decrypter),r=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then(function(){return i.flush(t)});var s=[],a=r.timeOffset;if(n){r=n.flush();r&&s.push(this.push(r,null,t))}n=this.demuxer,r=this.remuxer;if(!n||!r)return this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),e.executeEnd=y(),[b(t)];r=n.flush(a);return d(r)?r.then(function(e){return i.flushRemux(s,e,t),s}):(this.flushRemux(s,r,t),s)},i.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.videoTrack,a=t.id3Track,t=t.textTrack,s=this.currentTransmuxState,o=s.accurateTimeOffset,s=s.timeOffset,n=(E.logger.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level),this.remuxer.remux(n,r,a,t,s,o,!0,this.id));e.push({remuxResult:n,chunkMeta:i}),i.transmuxing.executeEnd=y()},i.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},i.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},i.resetInitSegment=function(e,t,i,n){var r=this.demuxer,a=this.remuxer;r&&a&&(r.resetInitSegment(e,t,i,n),a.resetInitSegment(e,t,i))},i.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},i.transmux=function(e,t,i,n,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r)},i.transmuxUnencrypted=function(e,t,i,n){var e=this.demuxer.demux(e,t,!1,!this.config.progressive),r=e.audioTrack,a=e.videoTrack,s=e.id3Track,e=e.textTrack;return{remuxResult:this.remuxer.remux(r,a,s,e,t,i,!1,this.id),chunkMeta:n}},i.transmuxSampleAes=function(e,t,i,n,r){var a=this;return this.demuxer.demuxSampleAes(e,t,i).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,n,!1,a.id),chunkMeta:r}})},i.configureTransmuxer=function(e,t){for(var i,n=this.config,r=this.observer,a=this.typeSupported,s=this.vendor,o=t.audioCodec,l=t.defaultInitPts,u=t.duration,c=t.initSegmentData,t=t.videoCodec,d=0,h=T.length;d<h;d++)if(T[d].demux.probe(e)){i=T[d];break}i||(E.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),i={demux:m.default,remux:A.default});var f=this.demuxer,p=this.remuxer,g=i.remux,v=i.demux;p&&p instanceof g||(this.remuxer=new g(r,n,a,s)),f&&f instanceof v||(this.demuxer=new v(r,n,a),this.probe=v.probe),this.resetInitSegment(c,o,t,u),this.resetInitialTimestamp(l)},i.needsProbing=function(e,t,i){return!this.demuxer||!this.remuxer||t||i},i.getDecrypter=function(){return this.decrypter||(this.decrypter=new n.default(this.observer,this.config))},c),b=function(e){return{remuxResult:{},chunkMeta:e}};function c(e,t,i,n,r){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n,this.id=r}function d(e){return"then"in e&&e.then instanceof Function}var h=function(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r},f=function(e,t,i,n,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var p=i("./src/demux/adts.ts"),l=i("./src/demux/mpegaudio.ts"),f=i("./src/demux/exp-golomb.ts"),n=i("./src/demux/sample-aes.ts"),D=i("./src/events.ts"),R=i("./src/utils/mp4-tools.ts"),I=i("./src/utils/logger.ts"),O=i("./src/errors.ts"),r=i("./src/types/demuxer.ts");function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function g(e,t,i,n){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:n,length:0}}function w(e){var t,i,n,r,a=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;){var o=new Uint8Array(s[0].length+s[1].length);o.set(s[0]),o.set(s[1],s[0].length),s[0]=o,s.splice(1,1)}if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var l=t[7],u=(192&l&&(n=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?54e5<n-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(I.logger.warn(Math.round((n-r)/9e4)+"s delta between PTS and DTS, align them"),n=r):r=n),(l=t[8])+9);if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),d=0,h=s.length;d<h;d++){var f=(t=s[d]).byteLength;if(u){if(f<u){u-=f;continue}t=t.subarray(u),f-=u,u=0}c.set(t,a),a+=f}return i&&(i-=l+3),{data:c,pts:n,dts:r,len:i}}function v(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,n=i.length;if(!n)return t.dropped++;i=i[n-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&I.logger.log(e.pts+"/"+e.dts+":"+e.debug)}P.probe=function(e){e=P.syncOffset(e);return 0<e&&I.logger.warn("MPEG2-TS detected but first sync word found @ offset "+e),-1!==e},P.syncOffset=function(e){for(var t=Math.min(940,e.length-376)+1,i=0;i<t;){if(71===e[i]&&71===e[i+188])return i;i++}return-1},P.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:R.RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}},(t=P.prototype).resetInitSegment=function(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=P.createTrack("video"),this._audioTrack=P.createTrack("audio",n),this._id3Track=P.createTrack("id3"),this._txtTrack=P.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=n},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},t.demux=function(e,t,i,n){void 0===n&&(n=!1),(i=void 0===i?!1:i)||(this.sampleAes=null);var r,a=this._avcTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack,u=a.pid,c=a.pesData,d=s.pid,h=o.pid,f=s.pesData,p=o.pesData,g=null,v=this.pmtParsed,m=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=(0,R.appendUint8Array)(this.remainderData,e)).length,this.remainderData=null),y<188&&!n)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};var A=Math.max(0,P.syncOffset(e));(y-=(y-A)%188)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var E,T=0,b=A;b<y;b+=188)if(71===e[b]){var k=!!(64&e[b+1]),S=((31&e[b+1])<<8)+e[b+2],_=void 0;if(1<(48&e[b+3])>>4){if((_=b+5+e[b+4])===b+188)continue}else _=b+4;switch(S){case u:k&&(c&&(r=w(c))&&this.parseAVCPES(a,l,r,!1),c={data:[],size:0}),c&&(c.data.push(e.subarray(_,b+188)),c.size+=b+188-_);break;case d:if(k){if(f&&(r=w(f)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,r);break;case"mp3":this.parseMPEGPES(s,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(_,b+188)),f.size+=b+188-_);break;case h:k&&(p&&(r=w(p))&&this.parseID3PES(o,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(_,b+188)),p.size+=b+188-_);break;case 0:k&&(_+=e[_]+1),m=this._pmtId=(31&(C=e)[(E=_)+10])<<8|C[E+11];break;case m:k&&(_+=e[_]+1);var C=function(e,t,i,n){var r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!n){I.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=s);break;case 21:-1===r.id3&&(r.id3=s);break;case 219:if(!n){I.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=s);break;case 3:case 4:!0!==i.mpeg&&!0!==i.mp3?I.logger.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=s,r.segmentCodec="mp3");break;case 36:I.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}(e,_,this.typeSupported,i);0<(u=C.avc)&&(a.pid=u),0<(d=C.audio)&&(s.pid=d,s.segmentCodec=C.segmentCodec),0<(h=C.id3)&&(o.pid=h),null===g||v||(I.logger.log("unknown PID '"+g+"' in TS found"),g=null,b=A-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=S}}else T++;0<T&&this.observer.emit(D.Events.ERROR,D.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+T+" TS packet/s that do not start with 0x47"}),a.pesData=c,s.pesData=f,o.pesData=p;var L={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return n&&this.extractRemainingSamples(L),L},t.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,i=e.audioTrack,n=e.videoTrack,r=e.id3Track,e=e.textTrack,a=n.pesData,s=i.pesData,o=r.pesData;if(a&&(t=w(a))?(this.parseAVCPES(n,e,t,!0),n.pesData=null):n.pesData=a,s&&(t=w(s))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,t);break;case"mp3":this.parseMPEGPES(i,t)}i.pesData=null}else null!=s&&s.size&&I.logger.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=s;o&&(t=w(o))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=o},t.demuxSampleAes=function(e,t,i){e=this.demux(e,i,!0,!this.config.progressive),i=this.sampleAes=new n.default(this.observer,this.config,t);return this.decrypt(e,i)},t.decrypt=function(n,r){return new Promise(function(e){var t=n.audioTrack,i=n.videoTrack;t.samples&&"aac"===t.segmentCodec?r.decryptAacSamples(t.samples,0,function(){i.samples?r.decryptAvcSamples(i.samples,0,0,function(){e(n)}):e(n)}):i.samples&&r.decryptAvcSamples(i.samples,0,0,function(){e(n)})})},t.destroy=function(){this._duration=0},t.parseAVCPES=function(s,o,l,e){var u,c=this,t=this.parseAVCNALu(s,l.data),d=this.avcSample,h=!1;l.data=null,d&&t.length&&!s.audFound&&(v(d,s),d=this.avcSample=g(!1,l.pts,l.dts,"")),t.forEach(function(e){switch(e.type){case 1:u=!0,(d=d||(c.avcSample=g(!0,l.pts,l.dts,""))).frame=!0;var t=e.data;if(h&&4<t.length){t=new f.default(t).readSliceType();2!==t&&4!==t&&7!==t&&9!==t||(d.key=!0)}break;case 5:u=!0,(d=d||(c.avcSample=g(!0,l.pts,l.dts,""))).key=!0,d.frame=!0;break;case 6:u=!0,(0,R.parseSEIMessageFromNALu)(e.data,1,l.pts,o.samples);break;case 7:if(h=u=!0,!s.sps){t=new f.default(e.data).readSPS();s.width=t.width,s.height=t.height,s.pixelRatio=t.pixelRatio,s.sps=[e.data],s.duration=c._duration;for(var i=e.data.subarray(1,4),n="avc1.",r=0;r<3;r++){var a=i[r].toString(16);n+=a=a.length<2?"0"+a:a}s.codec=n}break;case 8:u=!0,s.pps||(s.pps=[e.data]);break;case 9:u=!1,s.audFound=!0,d&&v(d,s),d=c.avcSample=g(!1,l.pts,l.dts,"");break;case 12:u=!0;break;default:u=!1,d&&(d.debug+="unknown NAL "+e.type+" ")}d&&u&&d.units.push(e)}),e&&d&&(v(d,s),this.avcSample=null)},t.getLastNalUnit=function(e){var t,i=this.avcSample;return t=null!=(e=i=i&&0!==i.units.length?i:e[e.length-1])&&e.units?(e=i.units)[e.length-1]:t},t.parseAVCNALu=function(e,t){var i,n,r=t.byteLength,a=e.naluState||0,s=a,o=[],l=0,u=-1,c=0;for(-1===a&&(c=31&t[u=0],a=0,l=1);l<r;)if(i=t[l++],a)if(1!==a)if(i)if(1===i){if(0<=u){var d={data:t.subarray(u,l-a-1),type:c};o.push(d)}else{d=this.getLastNalUnit(e.samples);if(d&&(s&&l<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),0<(n=l-a-1))){var h=new Uint8Array(d.data.byteLength+n);h.set(d.data,0),h.set(t.subarray(0,n),d.data.byteLength),d.data=h,d.state=0}}a=l<r?(c=31&t[u=l],0):-1}else a=0;else a=3;else a=i?0:2;else a=i?0:1;if(0<=u&&0<=a){var f={data:t.subarray(u,r),type:c,state:a};o.push(f)}if(0===o.length){f=this.getLastNalUnit(e.samples);if(f){var p=new Uint8Array(f.data.byteLength+t.byteLength);p.set(f.data,0),p.set(t,f.data.byteLength),f.data=p}}return e.naluState=a,o},t.parseAACPES=function(e,t){var i,n,r,a=0,s=this.aacOverFlow,o=t.data;if(s){this.aacOverFlow=null;var l=s.missing,u=s.sample.unit.byteLength;if(-1===l){var c=new Uint8Array(u+o.byteLength);c.set(s.sample.unit,0),c.set(o,u),o=c}else{c=u-l;s.sample.unit.set(o.subarray(0,l),c),e.samples.push(s.sample),a=s.missing}}for(i=a,n=o.length;i<n-1&&!p.isHeader(o,i);i++);if(i===a||(u=i<n-1?(r="AAC PES did not start with ADTS header,offset:"+i,!1):(r="no ADTS header found in AAC PES",!0),I.logger.warn("parsing error:"+r),this.observer.emit(D.Events.ERROR,D.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.FRAG_PARSING_ERROR,fatal:u,reason:r}),!u)){if(p.initTrackConfig(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)d=t.pts;else{if(!s)return void I.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var l=p.getFrameDuration(e.samplerate),d=s.sample.pts+l}for(var h,f=0;i<n;){if(i+=(h=p.appendFrame(e,o,i,d,f)).length,h.missing){this.aacOverFlow=h;break}for(f++;i<n-1&&!p.isHeader(o,i);i++);}}},t.parseMPEGPES=function(e,t){var i=t.data,n=i.length,r=0,a=0,s=t.pts;if(void 0!==s)for(;a<n;)if(l.isHeader(i,a)){var o=l.appendFrame(e,i,a,s,r);if(!o)break;a+=o.length,r++}else a++;else I.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){t=a({},t,{type:this._avcTrack?r.MetadataSchema.emsg:r.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(t)}else I.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")};const s=P;function P(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=i}},"./src/demux/webworkify-webpack.js":(e,t,h)=>{h.r(t),h.d(t,{default:()=>function(d,e){e=e||{};var i={main:h.m},n=e.all?{main:Object.keys(i.main)}:function(e){for(var t={main:[d]},i={main:[]},n={main:{}};function(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}(t);)for(var r=Object.keys(t),a=0;a<r.length;a++){var s=r[a],o=t[s].pop();if(n[s]=n[s]||{},!n[s][o]&&e[s][o]){n[s][o]=!0,i[s]=i[s]||[],i[s].push(o);for(var l=function(e,t,i){var n={},r=(n[i]=[],t.toString().replace(/^"[^"]+"/,"function")),t=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||r.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!t)return n;for(var a,t=t[1],s=new RegExp("(\\\\n|\\W)"+g(t)+p,"g");a=s.exec(r);)"dll-reference"!==a[3]&&n[i].push(a[3]);for(s=new RegExp("\\("+g(t)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+p,"g");a=s.exec(r);)e[a[2]]||(n[i].push(a[1]),e[a[2]]=h(a[1]).m),n[a[2]]=n[a[2]]||[],n[a[2]].push(a[4]);for(var o,l=Object.keys(n),u=0;u<l.length;u++)for(var c=0;c<n[l[u]].length;c++)o=n[l[u]][c],isNaN(+o)||(n[l[u]][c]=+n[l[u]][c]);return n}(e,e[s][o],s),u=Object.keys(l),c=0;c<u.length;c++)t[u[c]]=t[u[c]]||[],t[u[c]]=t[u[c]].concat(l[u[c]])}}return i}(i),r="",e=(Object.keys(n).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;n[e][t];)t++;n[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+e+" = ("+a(n,i,t,modules)+")();\n"}),r=r+"new (("+a(n,i,d,"main")+")())(self);",new window.Blob([r],{type:"text/javascript"})),e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(e),t=new window.Worker(e);return t.objectURL=e,t}});var r=function(){function n(e){var t=r[e];if(void 0!==t)return t.exports;t=r[e]={exports:{}};return i[e].call(t.exports,t,t.exports,n),t.exports}var i=ENTRY_MODULE,r={},e=(n.m=i,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(ENTRY_MODULE));return e.default||e}.toString().split("ENTRY_MODULE"),f="[\\.|\\-|\\+|\\w|/|@]+",p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+f+").*?\\)";function g(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e,t,i,n){e=e[n].map(function(e){return'"'+e+'": '+t[n][e].toString().replace(/^"[^"]+"/,"function")}).join(",");return r[0]+"{"+e+"}"+r[1]+'"'+i+'"'+r[2]}},"./src/errors.ts":(e,t,i)=>{var n,r;i.r(t),i.d(t,{ErrorDetails:()=>r,ErrorTypes:()=>n}),(i=n=n||{}).NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",(t=r=r||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"},"./src/events.ts":(e,t,i)=>{var n;i.r(t),i.d(t,{Events:()=>n}),(i=n=n||{}).MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached"},"./src/hls.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var r=i("./node_modules/url-toolkit/src/url-toolkit.js"),d=i("./src/loader/playlist-loader.ts"),h=i("./src/loader/key-loader.ts"),f=i("./src/controller/id3-track-controller.ts"),p=i("./src/controller/latency-controller.ts"),g=i("./src/controller/level-controller.ts"),v=i("./src/controller/fragment-tracker.ts"),m=i("./src/controller/stream-controller.ts"),n=i("./src/is-supported.ts"),y=i("./src/utils/logger.ts"),A=i("./src/config.ts"),E=i("./node_modules/eventemitter3/index.js"),a=i("./src/events.ts"),s=i("./src/errors.ts");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}T.isSupported=function(){return(0,n.isSupported)()},(t=T.prototype).createController=function(e,t,i){return e?(t=t?new e(this,t):new e(this),i&&i.push(t),t):null},t.on=function(e,t,i){this._emitter.on(e,t,i=void 0===i?this:i)},t.once=function(e,t,i){this._emitter.once(e,t,i=void 0===i?this:i)},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},t.off=function(e,t,i,n){this._emitter.off(e,t,i=void 0===i?this:i,n)},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,i){return this._emitter.emit(e,t,i)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){y.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(a.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){y.logger.log("destroy"),this.trigger(a.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0},t.attachMedia=function(e){y.logger.log("attachMedia"),this._media=e,this.trigger(a.Events.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){y.logger.log("detachMedia"),this.trigger(a.Events.MEDIA_DETACHING,void 0),this._media=null},t.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,n=this.url=r.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});y.logger.log("loadSource:"+n),t&&i&&i!==n&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(a.Events.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),y.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){y.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){y.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){y.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},t=[{key:"version",get:function(){return"1.2.9"}},{key:"Events",get:function(){return a.Events}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return T.defaultConfig||A.hlsDefaultConfig},set:function(e){T.defaultConfig=e}}],o((i=T).prototype,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){y.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){y.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){y.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){y.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){y.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(y.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var i=e.length,n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}]),o(i,t),Object.defineProperty(i,"prototype",{writable:!1});var l=T;function T(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new E.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var t=this.config=(0,A.mergeConfig)(T.DefaultConfig,e),e=(this.userConfig=e,(0,y.enableLogs)(t.debug,"Hls instance"),this._autoLevelCapping=-1,t.progressive&&(0,A.enableStreamingMode)(t),t.abrController),i=t.bufferController,n=t.capLevelController,r=t.fpsController,e=this.abrController=new e(this),i=this.bufferController=new i(this),n=this.capLevelController=new n(this),r=new r(this),a=new d.default(this),s=new h.default(this),o=new f.default(this),l=this.levelController=new g.default(this),u=new v.FragmentTracker(this),c=this.streamController=new m.default(this,u),a=(n.setStreamController(c),r.setStreamController(c),[a,s,l,c]),s=(this.networkControllers=a,[e,i,n,r,o,u]);this.audioTrackController=this.createController(t.audioTrackController,null,a),this.createController(t.audioStreamController,u,a),this.subtitleTrackController=this.createController(t.subtitleTrackController,null,a),this.createController(t.subtitleStreamController,u,a),this.createController(t.timelineController,null,s),this.emeController=this.createController(t.emeController,null,s),this.cmcdController=this.createController(t.cmcdController,null,s),this.latencyController=this.createController(p.default,null,s),this.coreComponents=s}l.defaultConfig=void 0},"./src/is-supported.ts":(e,t,i)=>{i.r(t),i.d(t,{changeTypeSupported:()=>function(){var e=r();return"function"==typeof(null==e||null==(e=e.prototype)?void 0:e.changeType)},isSupported:()=>function(){var e=(0,n.getMediaSource)();if(!e)return!1;var t=r(),e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t}});var n=i("./src/utils/mediasource-helper.ts");function r(){return self.SourceBuffer||self.WebKitSourceBuffer}},"./src/loader/date-range.ts":(e,t,i)=>{i.r(t),i.d(t,{DateRange:()=>u,DateRangeAttribute:()=>r});var r,a=i("./src/polyfills/number.ts"),s=i("./src/utils/attr-list.ts"),o=i("./src/utils/logger.ts");function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t=r=r||{}).ID="ID",t.CLASS="CLASS",t.START_DATE="START-DATE",t.DURATION="DURATION",t.END_DATE="END-DATE",t.END_ON_NEXT="END-ON-NEXT",t.PLANNED_DURATION="PLANNED-DURATION",t.SCTE35_OUT="SCTE35-OUT",t.SCTE35_IN="SCTE35-IN";n((i=c).prototype,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if(r.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(r.DURATION);if((0,a.isFiniteNumber)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return r.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(r.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(r.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,a.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]),Object.defineProperty(i,"prototype",{writable:!1});var u=c;function c(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var i,n=t.attr;for(i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){o.logger.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=i;break}e=l(new s.AttrList({}),n,e)}if(this.attr=e,this._startDate=new Date(e[r.START_DATE]),r.END_DATE in this.attr){t=new Date(this.attr[r.END_DATE]);(0,a.isFiniteNumber)(t.getTime())&&(this._endDate=t)}}},"./src/loader/fragment-loader.ts":(e,t,i)=>{i.r(t),i.d(t,{LoadError:()=>g,default:()=>l});var n=i("./src/polyfills/number.ts"),h=i("./src/errors.ts");function r(e){var i="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return a(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)})(e)}function a(e,t,i){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}()?Reflect.construct.bind():function(e,t,i){var n=[null],t=(n.push.apply(n,t),new(Function.bind.apply(e,n)));return i&&s(t,i.prototype),t}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Math.pow(2,17),l=((t=u.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(s,o){var l=this,e=s.url;if(!e)return Promise.reject(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:s,networkDetails:null},"Fragment does not have a "+(e?"part list":"url")));this.abort();var i=this.config,u=i.fLoader,c=i.loader;return new Promise(function(r,n){l.loader&&l.loader.destroy();var a=l.loader=s.loader=new(u||c)(i),e=p(s),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===s.sn?1/0:f};s.stats=a.stats,a.load(e,t,{onSuccess:function(e,t,i,n){l.resetLoader(s,a),r({frag:s,part:null,payload:e.data,networkDetails:n})},onError:function(e,t,i){l.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:s,response:e,networkDetails:i}))},onAbort:function(e,t,i){l.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:s,networkDetails:i}))},onTimeout:function(e,t,i){l.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s,networkDetails:i}))},onProgress:function(e,t,i,n){o&&o({frag:s,part:null,payload:i,networkDetails:n})}})})},t.loadPart=function(s,o,l){var u=this,i=(this.abort(),this.config),c=i.fLoader,d=i.loader;return new Promise(function(r,n){u.loader&&u.loader.destroy();var a=u.loader=s.loader=new(c||d)(i),e=p(s,o),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:f};o.stats=a.stats,a.load(e,t,{onSuccess:function(e,t,i,n){u.resetLoader(s,a),u.updateStatsFromPart(s,o);e={frag:s,part:o,payload:e.data,networkDetails:n};l(e),r(e)},onError:function(e,t,i){u.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:s,part:o,response:e,networkDetails:i}))},onAbort:function(e,t,i){s.stats.aborted=o.stats.aborted,u.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:s,part:o,networkDetails:i}))},onTimeout:function(e,t,i){u.resetLoader(s,a),n(new g({type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s,part:o,networkDetails:i}))}})})},t.updateStatsFromPart=function(e,t){var i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){e=Math.round(e.duration/t.duration),t=Math.min(Math.round(i.loaded/r),e),r=(e-t)*Math.round(i.loaded/t);i.total=i.loaded+r}else i.total=Math.max(i.loaded,i.total);e=i.loading,t=n.loading;e.start?e.first+=t.first-t.start:(e.start=t.start,e.first=t.first),e.end=t.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},u);function u(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function p(e,t){var i=(t=void 0===t?null:t)||e,e={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},t=i.byteRangeStartOffset,i=i.byteRangeEndOffset;return(0,n.isFiniteNumber)(t)&&(0,n.isFiniteNumber)(i)&&(e.rangeStart=t,e.rangeEnd=i),e}c=r(Error),i=c,(t=d).prototype=Object.create(i.prototype),s(t.prototype.constructor=t,i);var c,g=d;function d(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t=c.call.apply(c,[this].concat(n))||this).data=void 0,t.data=e,t}},"./src/loader/fragment.ts":(e,t,i)=>{i.r(t),i.d(t,{BaseSegment:()=>g,ElementaryStreamTypes:()=>n,Fragment:()=>v,Part:()=>m});var n,r=i("./src/polyfills/number.ts"),a=i("./node_modules/url-toolkit/src/url-toolkit.js"),s=i("./src/utils/logger.ts"),o=i("./src/loader/level-key.ts"),l=i("./src/loader/load-stats.ts");function u(e,t){e.prototype=Object.create(t.prototype),c(e.prototype.constructor=e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){t&&d(e.prototype,t),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(t=n=n||{}).AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo";E.prototype.setByteRange=function(e,t){var e=e.split("@",2),i=[];1===e.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(e[1]),i[1]=parseInt(e[0])+i[0],this._byteRange=i},h(E,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]);var f,p,g=E,v=(u(A,p=g),(i=A.prototype).createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},i.setDecryptDataFromLevelKey=function(e,t){var i=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((i=o.LevelKey.fromURI(e.uri)).method=e.method,i.iv=this.createInitializationVector(t),i.keyFormat="identity"),i},i.setElementaryStreamInfo=function(e,t,i,n,r,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,i),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,r)):s[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:a}},i.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[n.AUDIO]=null,e[n.VIDEO]=null,e[n.AUDIOVIDEO]=null},h(A,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!(0,r.isFiniteNumber)(this.programDateTime))return null;var e=(0,r.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null==(e=this.decryptdata)||!e.keyFormat||!this.decryptdata.uri)}}]),A),m=(u(y,f=g),h(y,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),y);function y(e,t,i,n,r){(i=f.call(this,i)||this).fragOffset=0,i.duration=0,i.gap=!1,i.independent=!1,i.relurl=void 0,i.fragment=void 0,i.index=void 0,i.stats=new l.LoadStats,i.duration=e.decimalFloatingPoint("DURATION"),i.gap=e.bool("GAP"),i.independent=e.bool("INDEPENDENT"),i.relurl=e.enumeratedString("URI"),i.fragment=t,i.index=n;t=e.enumeratedString("BYTERANGE");return t&&i.setByteRange(t,r),r&&(i.fragOffset=r.fragOffset+r.duration),i}function A(e,t){return(t=p.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkey=void 0,t.type=void 0,t.loader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.appendedPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new l.LoadStats,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.type=e,t}function E(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[n.AUDIO]=null,t[n.VIDEO]=null,t[n.AUDIOVIDEO]=null,t),this.baseurl=e}},"./src/loader/key-loader.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var s=i("./src/events.ts"),n=i("./src/errors.ts"),o=i("./src/utils/logger.ts"),r=((t=a.prototype).startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){this.hls.on(s.Events.KEY_LOADING,this.onKeyLoading,this)},t.unregisterListeners=function(){this.hls.off(s.Events.KEY_LOADING,this.onKeyLoading)},t.destroyInternalLoaders=function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onKeyLoading=function(e,t){var t=t.frag,i=t.type,n=this.loaders[i];if(t.decryptdata){var r=t.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(n&&(o.logger.warn("abort previous key loader for type:"+i),n.abort()),r){n=a.loader,i=t.loader=this.loaders[i]=new n(a),n=(this.decrypturl=r,this.decryptkey=null,{url:r,frag:t,responseType:"arraybuffer"}),r={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:0},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.load(n,r,a)}else o.logger.warn("key uri is falsy")}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(s.Events.KEY_LOADED,{frag:t}))}else o.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,i){i=i.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(s.Events.KEY_LOADED,{frag:i})):o.logger.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var t=t.frag,i=t.loader;i&&i.abort(),delete this.loaders[t.type],this.hls.trigger(s.Events.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:t,response:e})},t.loadtimeout=function(e,t){var t=t.frag,i=t.loader;i&&i.abort(),delete this.loaders[t.type],this.hls.trigger(s.Events.ERROR,{type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:t})},a);function a(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this.registerListeners()}},"./src/loader/level-details.ts":(e,t,i)=>{i.r(t),i.d(t,{LevelDetails:()=>a});var n=i("./src/polyfills/number.ts");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},r((t=s).prototype,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,n.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Object.defineProperty(t,"prototype",{writable:!1});var a=s;function s(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=e}},"./src/loader/level-key.ts":(e,t,i)=>{i.r(t),i.d(t,{LevelKey:()=>a});var n=i("./node_modules/url-toolkit/src/url-toolkit.js");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s.fromURL=function(e,t){return new s(e,t)},s.fromURI=function(e){return new s(e)},r((t=s).prototype,[{key:"uri",get:function(){return this._uri}}]),Object.defineProperty(t,"prototype",{writable:!1});var a=s;function s(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?(0,n.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}},"./src/loader/load-stats.ts":(e,t,i)=>{i.r(t),i.d(t,{LoadStats:()=>n});var n=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var B=i("./src/polyfills/number.ts"),U=i("./node_modules/url-toolkit/src/url-toolkit.js"),G=i("./src/loader/date-range.ts"),V=i("./src/loader/fragment.ts"),K=i("./src/loader/level-details.ts"),j=i("./src/loader/level-key.ts"),H=i("./src/utils/attr-list.ts"),Y=i("./src/utils/logger.ts"),c=i("./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,l=/#EXT-X-MEDIA:(.*)/g,W=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),$=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|"0.5.0"): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),z=/\.(mp4|m4s|m4v|m4a)$/i,n=(h.findGroup=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}},h.convertAVC1ToAVCOTI=function(e){var t,i=e.split(".");return 2<i.length?(t=i.shift()+".",(t+=parseInt(i.shift()).toString(16))+("000"+parseInt(i.shift()).toString(16)).slice(-4)):e},h.resolve=function(e,t){return U.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},h.parseMasterPlaylist=function(e,t){var i,n=[],r=[],a={},s=!1;for(d.lastIndex=0;null!=(i=d.exec(e));)if(i[1]){var o=new H.AttrList(i[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:h.resolve(i[2],t)},u=o.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),function(n,r){["video","audio","text"].forEach(function(t){var i=n.filter(function(e){return(0,c.isCodecType)(e,t)});if(i.length){var e=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});r[t+"Codec"]=(0<e.length?e:i)[0],n=n.filter(function(e){return-1===i.indexOf(e)})}}),r.unknownCodecs=n}((o.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=h.convertAVC1ToAVCOTI(l.videoCodec)),null!=(u=l.unknownCodecs)&&u.length||r.push(l),n.push(l)}else if(i[3]){o=new H.AttrList(i[3]);o["DATA-ID"]&&(s=!0,a[o["DATA-ID"]]=o)}return{levels:0<r.length&&r.length<n.length?r:n,sessionData:s?a:null}},h.parseMasterPlaylistMedia=function(e,t,i,n){void 0===n&&(n=[]);var r=[],a=0;for(l.lastIndex=0;null!==(s=l.exec(e));){var s=new H.AttrList(s[1]);if(s.TYPE===i){s={attrs:s,bitrate:0,id:a++,groupId:s["GROUP-ID"],instreamId:s["INSTREAM-ID"],name:s.NAME||s.LANGUAGE||"",type:i,default:s.bool("DEFAULT"),autoselect:s.bool("AUTOSELECT"),forced:s.bool("FORCED"),lang:s.LANGUAGE,url:s.URI?h.resolve(s.URI,t):""};if(n.length){var o=h.findGroup(n,s.groupId)||n[0];u(s,o,"audioCodec"),u(s,o,"textCodec")}r.push(s)}}return r},h.parseLevelPlaylist=function(e,t,i,n,F){var r,a,s,o=new K.LevelDetails(t),l=o.fragments,u=null,c=0,d=0,h=0,f=0,p=null,g=new V.Fragment(n,t),v=-1,m=!1;for(W.lastIndex=0,o.m3u8=e;null!==(r=W.exec(e));){m&&(m=!1,(g=new V.Fragment(n,t)).start=h,g.sn=c,g.cc=f,g.level=i,u&&(g.initSegment=u,g.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null));var y=r[1];if(y){g.duration=parseFloat(y);var A=(" "+r[2]).slice(1);g.title=A||null,g.tagList.push(A?["INF",y,A]:["INF",y])}else if(r[3])(0,B.isFiniteNumber)(g.duration)&&(g.start=h,s&&(g.levelkey=s),g.sn=c,g.level=i,g.cc=f,g.urlId=F,l.push(g),g.relurl=(" "+r[3]).slice(1),q(g,p),h+=(p=g).duration,c++,m=!(d=0));else if(r[4]){A=(" "+r[4]).slice(1);p?g.setByteRange(A,p):g.setByteRange(A)}else if(r[5])g.rawProgramDateTime=(" "+r[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),-1===v&&(v=l.length);else if(r=r[0].match($)){for(a=1;a<r.length&&void 0===r[a];a++);var E=(" "+r[a]).slice(1),T=(" "+r[a+1]).slice(1),b=r[a+2]?(" "+r[a+2]).slice(1):"";switch(E){case"PLAYLIST-TYPE":o.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":c=o.startSN=parseInt(T);break;case"SKIP":var k=new H.AttrList(T),S=k.decimalInteger("SKIPPED-SEGMENTS");if((0,B.isFiniteNumber)(S)){for(var M=o.skippedSegments=S;M--;)l.unshift(null);c+=S}S=k.enumeratedString("RECENTLY-REMOVED-DATERANGES");S&&(o.recentlyRemovedDateranges=S.split("\t"));break;case"TARGETDURATION":o.targetduration=parseFloat(T);break;case'"0.5.0"':o.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(T||b)&&g.tagList.push(b?[T,b]:[T]);break;case"DISCONTINUITY":f++,g.tagList.push(["DIS"]);break;case"GAP":g.tagList.push([E]);break;case"BITRATE":g.tagList.push([E,T]);break;case"DATERANGE":k=new H.AttrList(T),S=new G.DateRange(k,o.dateRanges[k.ID]);S.isValid||o.skippedSegments?o.dateRanges[S.id]=S:Y.logger.warn('Ignoring invalid DATERANGE tag: "'+T+'"'),g.tagList.push(["EXT-X-DATERANGE",T]);break;case"DISCONTINUITY-SEQUENCE":f=parseInt(T);break;case"KEY":var _=new H.AttrList(T),C=_.enumeratedString("METHOD"),L=_.URI,D=_.hexadecimalInteger("IV"),R=_.enumeratedString("KEYFORMATVERSIONS"),I=_.enumeratedString("KEYID"),_=null!=(_=_.enumeratedString("KEYFORMAT"))?_:"identity";if(-1<["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(_)){Y.logger.warn("Keyformat "+_+" is not supported from the manifest");continue}if("identity"!==_)continue;C&&(s=j.LevelKey.fromURL(t,L),L&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(C)&&(s.method=C,s.keyFormat=_,I&&(s.keyID=I),R&&(s.keyFormatVersions=R),s.iv=D));break;case"START":L=new H.AttrList(T).decimalFloatingPoint("TIME-OFFSET");(0,B.isFiniteNumber)(L)&&(o.startTimeOffset=L);break;case"MAP":C=new H.AttrList(T);if(g.duration){_=new V.Fragment(n,t);X(_,C,i,s),(g.initSegment=u=_).rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=u.rawProgramDateTime)}else X(g,C,i,s),u=g,m=!0;break;case"SERVER-CONTROL":I=new H.AttrList(T);o.canBlockReload=I.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=I.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=0<o.canSkipUntil&&I.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=I.optionalFloat("PART-HOLD-BACK",0),o.holdBack=I.optionalFloat("HOLD-BACK",0);break;case"PART-INF":R=new H.AttrList(T);o.partTarget=R.decimalFloatingPoint("PART-TARGET");break;case"PART":var D=(D=o.partList)||(o.partList=[]),O=0<d?D[D.length-1]:void 0,w=d++,w=new V.Part(new H.AttrList(T),g,t,w,O);D.push(w),g.duration+=w.duration;break;case"PRELOAD-HINT":O=new H.AttrList(T);o.preloadHint=O;break;case"RENDITION-REPORT":w=new H.AttrList(T);o.renditionReports=o.renditionReports||[],o.renditionReports.push(w);break;default:Y.logger.warn("line parsed but not handled: "+r)}}else Y.logger.warn("No matches on slow regex match for level playlist!")}p&&!p.relurl?(l.pop(),h-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(q(g,p),g.cc=f,o.fragmentHint=g);var P=l.length,x=l[0],N=l[P-1];if(0<(h+=o.skippedSegments*o.targetduration)&&P&&N){o.averagetargetduration=h/P;P=N.sn;o.endSN="initSegment"!==P?P:0,x&&(o.startCC=x.cc,x.initSegment||o.fragments.every(function(e){return e.relurl&&(e=e.relurl,z.test(null!=(e=null==(e=U.parseURL(e))?void 0:e.path)?e:""))})&&(Y.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new V.Fragment(n,t)).relurl=N.relurl,g.level=i,g.sn="initSegment",x.initSegment=g,o.needSidxRanges=!0))}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(h+=o.fragmentHint.duration),o.totalduration=h,o.endCC=f,0<v&&function(e,t){for(var i=e[t],n=t;n--;){var r=e[n];if(!r)return;r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(l,v),o},h);function h(){}function u(e,t,i){t=t[i];t&&(e[i]=t)}function q(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),(0,B.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function X(e,t,i,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",n&&(e.levelkey=n),e.initSegment=null}},"./src/loader/playlist-loader.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var h=i("./src/polyfills/number.ts"),f=i("./src/events.ts"),p=i("./src/errors.ts"),d=i("./src/utils/logger.ts"),r=i("./src/utils/mp4-tools.ts"),g=i("./src/loader/m3u8-parser.ts"),v=i("./src/types/loader.ts"),m=i("./src/utils/attr-list.ts");function y(e,t){e=e.url;return e=void 0!==e&&0!==e.indexOf("data:")?e:t.url}(t=n.prototype).startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(f.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(f.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(f.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(f.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(f.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(f.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,n=t.loader,i=new(i||n)(t);return e.loader=i,this.loaders[e.type]=i},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){t=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:v.PlaylistContextType.MANIFEST,url:t,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:null,level:n,responseType:"text",type:v.PlaylistContextType.LEVEL,url:r,deliveryDirectives:t})},t.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:v.PlaylistContextType.AUDIO_TRACK,url:r,deliveryDirectives:t})},t.onSubtitleTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:v.PlaylistContextType.SUBTITLE_TRACK,url:r,deliveryDirectives:t})},t.load=function(e){var t,i,n,r,a=this.hls.config,s=this.getInternalLoader(e);if(s){var o=s.context;if(o&&o.url===e.url)return void d.logger.trace("[playlist-loader]: playlist request ongoing");d.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case v.PlaylistContextType.MANIFEST:t=a.manifestLoadingMaxRetry,i=a.manifestLoadingTimeOut,n=a.manifestLoadingRetryDelay,r=a.manifestLoadingMaxRetryTimeout;break;case v.PlaylistContextType.LEVEL:case v.PlaylistContextType.AUDIO_TRACK:case v.PlaylistContextType.SUBTITLE_TRACK:t=0,i=a.levelLoadingTimeOut;break;default:t=a.levelLoadingMaxRetry,i=a.levelLoadingTimeOut,n=a.levelLoadingRetryDelay,r=a.levelLoadingMaxRetryTimeout}if(s=this.createInternalLoader(e),null!=(o=e.deliveryDirectives)&&o.part&&(e.type===v.PlaylistContextType.LEVEL&&null!==e.level?l=this.hls.levels[e.level].details:e.type===v.PlaylistContextType.AUDIO_TRACK&&null!==e.id?l=this.hls.audioTracks[e.id].details:e.type===v.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(l=this.hls.subtitleTracks[e.id].details),l)){var o=l.partTarget,l=l.targetduration;o&&l&&(i=Math.min(1e3*Math.max(3*o,.8*l),i))}o={timeout:i,maxRetry:t,retryDelay:n,maxRetryDelay:r,highWaterMark:0},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};s.load(e,o,l)},t.loadsuccess=function(e,t,i,n){if(void 0===n&&(n=null),i.isSidxRequest)return this.handleSidxRequest(e,i),void this.handlePlaylistLoaded(e,t,i,n);this.resetInternalLoader(i.type);var r=e.data;0===r.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),0<r.indexOf("#EXTINF:")||0<r.indexOf("#EXT-X-TARGETDURATION:")?this.handleTrackOrLevelPlaylist(e,t,i,n):this.handleMasterPlaylist(e,t,i,n)):this.handleManifestParsingError(e,i,"no EXTM3U delimiter",n)},t.loaderror=function(e,t,i){this.handleNetworkError(t,i=void 0===i?null:i,!1,e)},t.loadtimeout=function(e,t,i){this.handleNetworkError(t,i=void 0===i?null:i,!0)},t.handleMasterPlaylist=function(e,t,i,n){var r=this.hls,a=e.data,s=y(e,i),o=g.default.parseMasterPlaylist(a,s),l=o.levels,o=o.sessionData;if(l.length){var u=l.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),c=l.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),u=g.default.parseMasterPlaylistMedia(a,s,"AUDIO",u),c=g.default.parseMasterPlaylistMedia(a,s,"SUBTITLES",c),a=g.default.parseMasterPlaylistMedia(a,s,"CLOSED-CAPTIONS");u.length&&!u.some(function(e){return!e.url})&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(d.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new m.AttrList({}),bitrate:0,url:""})),r.trigger(f.Events.MANIFEST_LOADED,{levels:l,audioTracks:u,subtitles:c,captions:a,url:s,stats:t,networkDetails:n,sessionData:o})}else this.handleManifestParsingError(e,i,"no level found in manifest",n)},t.handleTrackOrLevelPlaylist=function(e,t,i,n){var r=this.hls,a=i.id,s=i.level,o=i.type,l=y(e,i),u=(0,h.isFiniteNumber)(a)?a:0,c=(0,h.isFiniteNumber)(s)?s:u,d=function(){switch(i.type){case v.PlaylistContextType.AUDIO_TRACK:return v.PlaylistLevelType.AUDIO;case v.PlaylistContextType.SUBTITLE_TRACK:return v.PlaylistLevelType.SUBTITLE;default:return v.PlaylistLevelType.MAIN}}(),c=g.default.parseLevelPlaylist(e.data,l,c,d,u);if(c.fragments.length){if(o===v.PlaylistContextType.MANIFEST){d={attrs:new m.AttrList({}),bitrate:0,details:c,name:"",url:l};r.trigger(f.Events.MANIFEST_LOADED,{levels:[d],audioTracks:[],url:l,stats:t,networkDetails:n,sessionData:null})}if(t.parsing.end=performance.now(),c.needSidxRanges){d=null==(u=c.fragments[0].initSegment)?void 0:u.url;this.load({url:d,isSidxRequest:!0,type:o,level:s,levelDetails:c,id:a,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else i.levelDetails=c,this.handlePlaylistLoaded(e,t,i,n)}else r.trigger(f.Events.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0})},t.handleSidxRequest=function(e,t){var i=new Uint8Array(e.data),e=(0,r.findBox)(i,["sidx"])[0];if(e){e=(0,r.parseSegmentIndex)(e);if(e){var e=e.references,n=t.levelDetails;e.forEach(function(e,t){e=e.info,t=n.fragments[t];if(0===t.byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start)),t.initSegment){e=(0,r.findBox)(i,["moov"])[0],e=e?e.length:null;t.initSegment.setByteRange(String(e)+"@0")}})}}},t.handleManifestParsingError=function(e,t,i,n){this.hls.trigger(f.Events.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===v.PlaylistContextType.MANIFEST,url:e.url,reason:i,response:e,context:t,networkDetails:n})},t.handleNetworkError=function(e,t,i,n){d.logger.warn("[playlist-loader]: A network "+((i=void 0===i?!1:i)?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var r=p.ErrorDetails.UNKNOWN,a=!1,s=this.getInternalLoader(e);switch(e.type){case v.PlaylistContextType.MANIFEST:r=i?p.ErrorDetails.MANIFEST_LOAD_TIMEOUT:p.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case v.PlaylistContextType.LEVEL:r=i?p.ErrorDetails.LEVEL_LOAD_TIMEOUT:p.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case v.PlaylistContextType.AUDIO_TRACK:r=i?p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case v.PlaylistContextType.SUBTITLE_TRACK:r=i?p.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:p.ErrorDetails.SUBTITLE_LOAD_ERROR,a=!1}s&&this.resetInternalLoader(e.type);s={type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:a,url:e.url,loader:s,context:e,networkDetails:t};n&&(s.response=n),this.hls.trigger(f.Events.ERROR,s)},t.handlePlaylistLoaded=function(e,t,i,n){var r=i.type,a=i.level,s=i.id,o=i.groupId,l=i.loader,u=i.levelDetails,c=i.deliveryDirectives;if(null!=u&&u.targetduration){if(l)switch(u.live&&(l.getCacheAge&&(u.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(u.ageHeader)||(u.ageHeader=0)),r){case v.PlaylistContextType.MANIFEST:case v.PlaylistContextType.LEVEL:this.hls.trigger(f.Events.LEVEL_LOADED,{details:u,level:a||0,id:s||0,stats:t,networkDetails:n,deliveryDirectives:c});break;case v.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(f.Events.AUDIO_TRACK_LOADED,{details:u,id:s||0,groupId:o||"",stats:t,networkDetails:n,deliveryDirectives:c});break;case v.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(f.Events.SUBTITLE_TRACK_LOADED,{details:u,id:s||0,groupId:o||"",stats:t,networkDetails:n,deliveryDirectives:c})}}else this.handleManifestParsingError(e,i,"invalid target duration",n)};function n(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}const a=n},"./src/polyfills/number.ts":(e,t,i)=>{i.r(t),i.d(t,{MAX_SAFE_INTEGER:()=>r,isFiniteNumber:()=>n});var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});r.getSilentFrame=function(e,t){return"mp4a.40.2"===e?1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0};const n=r;function r(){}},"./src/remux/mp4-generator.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var a=Math.pow(2,32)-1,i=(d.init=function(){for(var e in d.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})d.types.hasOwnProperty(e)&&(d.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t=(d.HDLR_TYPES={video:t,audio:i},new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),i=new Uint8Array([0,0,0,0,0,0,0,0]),i=(d.STTS=d.STSC=d.STCO=i,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),new Uint8Array([105,115,111,109])),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,i,r,i,n),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,t))},d.box=function(e){for(var t=8,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=n.length,s=a;a--;)t+=n[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(n[a],t),t+=n[a].byteLength;return o},d.hdlr=function(e){return d.box(d.types.hdlr,d.HDLR_TYPES[e])},d.mdat=function(e){return d.box(d.types.mdat,e)},d.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},d.mdia=function(e){return d.box(d.types.mdia,d.mdhd(e.timescale,e.duration),d.hdlr(e.type),d.minf(e))},d.mfhd=function(e){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},d.minf=function(e){return"audio"===e.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(e)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(e))},d.moof=function(e,t,i){return d.box(d.types.moof,d.mfhd(e),d.traf(i,t))},d.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=d.trak(e[t]);return d.box.apply(null,[d.types.moov,d.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(d.mvex(e)))},d.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=d.trex(e[t]);return d.box.apply(null,[d.types.mvex].concat(i))},d.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+a)),t=Math.floor(t%(1+a)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,e)},d.sdtp=function(e){for(var t,i=e.samples||[],n=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,n[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return d.box(d.types.sdtp,n)},d.stbl=function(e){return d.box(d.types.stbl,d.stsd(e),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))},d.avc1=function(e){for(var t,i,n=[],r=[],a=0;a<e.sps.length;a++)i=(t=e.sps[a]).byteLength,n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)i=(t=e.pps[a]).byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(t));var s=d.box(d.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),o=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},d.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},d.mp4a=function(e){var t=e.samplerate;return d.box(d.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),d.box(d.types.esds,d.esds(e)))},d.mp3=function(e){var t=e.samplerate;return d.box(d.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},d.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?d.box(d.types.stsd,d.STSD,d.mp3(e)):d.box(d.types.stsd,d.STSD,d.mp4a(e)):d.box(d.types.stsd,d.STSD,d.avc1(e))},d.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,n=e.width,e=e.height,r=Math.floor(i/(1+a)),i=Math.floor(i%(1+a));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,e>>8&255,255&e,0,0]))},d.traf=function(e,t){var i=d.sdtp(e),n=e.id,r=Math.floor(t/(1+a)),t=Math.floor(t%(1+a));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),d.trun(e,i.length+16+20+8+16+8+8),i)},d.trak=function(e){return e.duration=e.duration||4294967295,d.box(d.types.trak,d.tkhd(e),d.mdia(e))},d.trex=function(e){e=e.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},d.trun=function(e,t){var i,n,r,a,s,o=e.samples||[],l=o.length,u=12+16*l,c=new Uint8Array(u);for(c.set(["video"===e.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+u)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<l;i++)n=(s=o[i]).duration,r=s.size,a=s.flags,s=s.cts,c.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*i);return d.box(d.types.trun,c)},d.initSegment=function(e){d.types||d.init();var e=d.moov(e),t=new Uint8Array(d.FTYP.byteLength+e.byteLength);return t.set(d.FTYP),t.set(e,d.FTYP.byteLength),t},d);function d(){}i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0;const n=i},"./src/remux/mp4-remuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n,flushTextTrackMetadataCueSamples:()=>k,flushTextTrackUserdataCueSamples:()=>S,normalizePts:()=>oe});var h=i("./src/polyfills/number.ts"),M=i("./src/remux/aac-helper.ts"),J=i("./src/remux/mp4-generator.ts"),ee=i("./src/events.ts"),te=i("./src/errors.ts"),ie=i("./src/utils/logger.ts"),b=i("./src/types/loader.ts"),ne=i("./src/utils/timescale-conversion.ts");function re(){return(re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ae=null,se=null,n=((t=r.prototype).destroy=function(){},t.resetTimeStamp=function(e){ie.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){ie.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){ie.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var n=!1,e=e.reduce(function(e,t){var i=t.pts-e;return i<-4294967296?(n=!0,oe(e,t.pts)):0<i?e:t.pts},e[0].pts);return n&&ie.logger.debug("PTS rollover detected"),e},t.remux=function(e,t,i,n,r,a,s,o){var l,u,c,d,h,f,p=r,g=r,v=-1<e.pid,m=-1<t.pid,y=t.samples.length,A=0<e.samples.length,E=s&&0<y||1<y;if((!v||A)&&(!m||E)||this.ISGenerated||s){this.ISGenerated||(c=this.generateIS(e,t,r));v=this.isVideoContiguous,s=-1;if(E&&(s=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!v&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,0<s){ie.logger.warn("[mp4-remuxer]: Dropped "+s+" out of "+y+" video samples due to a missing keyframe");var T=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,T=g+=(t.samples[0].pts-T)/t.inputTimeScale}else-1===s&&(ie.logger.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(A&&E){y=this.getVideoStartPts(t.samples),y=(oe(e.samples[0].pts,y)-y)/t.inputTimeScale;p+=Math.max(0,y),g+=Math.max(0,-y)}if(A){if(e.samplerate||(ie.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r)),u=this.remuxAudio(e,p,this.isAudioContiguous,a,m||E||o===b.PlaylistLevelType.AUDIO?g:void 0),E){y=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(ie.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r)),l=this.remuxVideo(t,g,v,y)}}else E&&(l=this.remuxVideo(t,g,v,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=T)}}return this.ISGenerated&&(i.samples.length&&(h=k(i,r,this._initPTS,this._initDTS)),n.samples.length&&(d=S(n,r,this._initPTS))),{audio:u,video:l,initSegment:c,independent:f,text:d,id3:h}},t.generateIS=function(e,t,i){var n,r,a,s=e.samples,o=t.samples,l=this.typeSupported,u={},c=!(0,h.isFiniteNumber)(this._initPTS),d="audio/mp4";(c&&(a=r=1/0),e.config&&s.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(l.mpeg?(d="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),u.audio={id:"audio",container:d,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&l.mpeg?new Uint8Array(0):J.default.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(n=e.inputTimeScale,a=r=s[0].pts-Math.round(n*i))),t.sps&&t.pps&&o.length&&(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:J.default.initSegment([t]),metadata:{width:t.width,height:t.height}},c))&&(n=t.inputTimeScale,d=this.getVideoStartPts(o),l=Math.round(n*i),r=Math.min(r,oe(o[0].dts,d)-l),a=Math.min(a,d-l));if(Object.keys(u).length)return this.ISGenerated=!0,c&&(this._initPTS=a,this._initDTS=r),{tracks:u,initPTS:a,timescale:n}},t.remuxVideo=function(e,t,i,F){var n=e.inputTimeScale,r=e.samples,a=[],s=r.length,M=this._initPTS,o=this.nextAvcDts,l=8,u=this.videoSampleDuration,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,B=!1;i&&null!==o||(o=t*n-(r[0].pts-oe(r[0].dts,r[0].pts)));for(var h=0;h<s;h++){var f=r[h];f.pts=oe(f.pts-M,o),f.dts=oe(f.dts-M,o),f.dts<r[0<h?h-1:h].dts&&(B=!0)}B&&r.sort(function(e,t){var i=e.dts-t.dts,e=e.pts-t.pts;return i||e}),v=r[0].dts;var t=r[r.length-1].dts-v,p=t?Math.round(t/(s-1)):u||e.inputTimeScale/30;if(i){var t=v-o,i=p<t,g=t<-1;if((i||g)&&(i?ie.logger.warn("AVC: "+(0,ne.toMsFromMpegTsClock)(t,!0)+" ms ("+t+"dts) hole between fragments detected, filling it"):ie.logger.warn("AVC: "+(0,ne.toMsFromMpegTsClock)(-t,!0)+" ms ("+t+"dts) overlapping between fragments detected"),!g||o>r[0].pts)){var v=o,i=r[0].pts-t;r[0].dts=v,r[0].pts=i,ie.logger.log("Video: First PTS/DTS adjusted: "+(0,ne.toMsFromMpegTsClock)(i,!0)+"/"+(0,ne.toMsFromMpegTsClock)(v,!0)+", delta: "+(0,ne.toMsFromMpegTsClock)(t,!0)+" ms")}}v=Math.max(0,v);for(var U=0,G=0,m=0;m<s;m++){for(var y=r[m],V=y.units,K=V.length,A=0,E=0;E<K;E++)A+=V[E].data.length;G+=A,U+=K,y.length=A,y.dts=Math.max(y.dts,v),c=Math.min(y.pts,c),d=Math.max(y.pts,d)}var T,g=r[s-1].dts,i=G+4*U+8;try{T=new Uint8Array(i)}catch(e){return void this.observer.emit(ee.Events.ERROR,ee.Events.ERROR,{type:te.ErrorTypes.MUX_ERROR,details:te.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:i,reason:"fail allocating video mdat "+i})}var j=new DataView(T.buffer);j.setUint32(0,i),T.set(J.default.types.mdat,4);for(var H=!1,b=Number.POSITIVE_INFINITY,k=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY,C=0;C<s;C++){for(var L=r[C],Y=L.units,W=0,D=0,$=Y.length;D<$;D++){var R=Y[D],z=R.data,R=R.data.byteLength;j.setUint32(l,R),l+=4,T.set(z,l),l+=R,W+=4+R}var I=void 0;if(C<s-1)u=r[C+1].dts-L.dts,I=r[C+1].pts-L.pts;else{var O=this.config,w=0<C?L.dts-r[C-1].dts:p,I=0<C?L.pts-r[C-1].pts:p;if(O.stretchShortVideoTrack&&null!==this.nextAudioPts){var O=Math.floor(O.maxBufferHole*n),P=(F?c+F*n:this.nextAudioPts)-L.pts;O<P?((u=P-w)<0?u=w:H=!0,ie.logger.log("[mp4-remuxer]: It is approximately "+P/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=w}else u=w}O=Math.round(L.pts-L.dts),b=Math.min(b,u),S=Math.max(S,u),k=Math.min(k,I),_=Math.max(_,I);a.push(new le(L.key,u,W,O))}if(a.length)if(ae){if(ae<70){t=a[0].flags;t.dependsOn=2,t.isNonSync=0}}else if(se&&_-k<S-b&&p/S<.025&&0===a[0].cts){ie.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var x=v,N=0,q=a.length;N<q;N++){var X=x+a[N].duration,Z=x+a[N].cts;if(N<q-1){var Q=X+a[N+1].cts;a[N].duration=Q-Z}else a[N].duration=N?a[N-1].duration:p;a[N].cts=0,x=X}}this.nextAvcDts=o=g+(u=H||!u?p:u),this.videoSampleDuration=u,this.isVideoContiguous=!0;i={data1:J.default.moof(e.sequenceNumber++,v,re({},e,{samples:a})),data2:T,startPTS:c/n,endPTS:(d+u)/n,startDTS:v/n,endDTS:o/n,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,i},t.remuxAudio=function(e,t,i,n,r){var a=e.inputTimeScale,s=a/(e.samplerate||a),o="aac"===e.segmentCodec?1024:1152,l=o*s,u=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==r,f=e.samples,p=c?0:8,g=this.nextAudioPts||-1,v=t*a;if(this.isAudioContiguous=i=i||f.length&&0<g&&(n&&Math.abs(v-g)<9e3||Math.abs(oe(f[0].pts-u,v)-g)<20*l),f.forEach(function(e){e.pts=oe(e.pts-u,v)}),!i||g<0){if(!(f=f.filter(function(e){return 0<=e.pts})).length)return;g=0===r?0:n&&!h?Math.max(0,v):f[0].pts}if("aac"===e.segmentCodec)for(var m=this.config.maxAudioFramesDrift,y=0,A=g;y<f.length;y++){var E=f[y],T=E.pts,b=T-A,k=Math.abs(1e3*b/a);if(b<=-m*l&&h)0===y&&(ie.logger.warn("Audio frame @ "+(T/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*b/a)+" ms."),this.nextAudioPts=g=A=T);else if(m*l<=b&&k<1e4&&h){var S=Math.round(b/l);(A=T-S*l)<0&&(S--,A+=l),0===y&&(this.nextAudioPts=g=A),ie.logger.warn("[mp4-remuxer]: Injecting "+S+" audio frame @ "+(A/a).toFixed(3)+"s due to "+Math.round(1e3*b/a)+" ms gap.");for(var _=0;_<S;_++){var C=Math.max(A,0),L=M.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);L||(ie.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),L=E.unit.subarray()),f.splice(y,0,{unit:L,pts:C}),A+=l,y++}}E.pts=A,A+=l}for(var D,R=null,I=null,O=0,w=f.length;w--;)O+=f[w].unit.byteLength;for(var P=0,F=f.length;P<F;P++){var x=f[P],N=x.unit,x=x.pts;if(null!==I)d[P-1].duration=Math.round((x-I)/s);else{if(R=x=i&&"aac"===e.segmentCodec?g:x,!(0<O))return;O+=p;try{D=new Uint8Array(O)}catch(e){return void this.observer.emit(ee.Events.ERROR,ee.Events.ERROR,{type:te.ErrorTypes.MUX_ERROR,details:te.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating audio mdat "+O})}c||(new DataView(D.buffer).setUint32(0,O),D.set(J.default.types.mdat,4))}D.set(N,p);N=N.byteLength;p+=N,d.push(new le(!0,o,N,0)),I=x}t=d.length;if(t)return r=d[d.length-1],this.nextAudioPts=g=I+s*r.duration,n={data1:c?new Uint8Array(0):J.default.moof(e.sequenceNumber++,R/s,re({},e,{samples:d})),data2:D,startPTS:n=R/a,endPTS:r=g/a,startDTS:n,endDTS:r,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t},this.isAudioContiguous=!0,n},t.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,a=r/(e.samplerate||r),s=this.nextAudioPts,o=(null!==s?s:n.startDTS*r)+this._initDTS,s=n.endDTS*r+this._initDTS,l=1024*a,u=Math.ceil((s-o)/l),c=M.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(ie.logger.warn("[mp4-remuxer]: remux empty Audio"),c){for(var d=[],h=0;h<u;h++){var f=o+h*l;d.push({unit:c,pts:f,dts:f})}return e.samples=d,this.remuxAudio(e,t,i,!1)}ie.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},r);function r(e,t,i,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===ae){e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ae=e?parseInt(e[1]):0}if(null===se){t=navigator.userAgent.match(/Safari\/(\d+)/i);se=t?parseInt(t[1]):0}}function oe(e,t){var i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e}function k(e,t,i,n){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,s=0;s<r;s++){var o=e.samples[s];o.pts=oe(o.pts-i,t*a)/a,o.dts=oe(o.dts-n,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function S(e,t,i){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=0;a<n;a++){var s=e.samples[a];s.pts=oe(s.pts-i,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts});var o=e.samples;return e.samples=[],{samples:o}}}var le=function(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags=new a(e)},a=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var h=i("./src/polyfills/number.ts"),f=i("./src/remux/mp4-remuxer.ts"),p=i("./src/utils/mp4-tools.ts"),a=i("./src/loader/fragment.ts"),g=i("./src/utils/logger.ts");function s(e,t){e=null==e?void 0:e.codec;return e&&4<e.length?e:"hvc1"===e||"hev1"===e?"hvc1.1.c.L120.90":"av01"===e?"av01.0.04M.08":"avc1"===e||t===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}(t=r.prototype).destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,i){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=(0,p.parseInitSegment)(e),t=t||s(n.audio,a.ElementaryStreamTypes.AUDIO),i=i||s(n.video,a.ElementaryStreamTypes.VIDEO),r={};n.audio&&n.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:n.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:g.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,i,n,r){var a=this.initPTS,s=this.lastEndTime,o={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0},t=((0,h.isFiniteNumber)(s)||(s=this.lastEndTime=r||0),t.samples);if(!t||!t.length)return o;var l={initPTS:void 0,timescale:1},u=this.initData;if(u&&u.length||(this.generateInitSegment(t),u=this.initData),!u||!u.length)return g.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),o;this.emitInitSegment&&(l.tracks=this.initTracks,this.emitInitSegment=!1);var c=(0,p.getStartDTS)(u,t),d=((0,h.isFiniteNumber)(a)||(this.initPTS=l.initPTS=a=c-r),(0,p.getDuration)(t,u)),e=e?c-a:s,c=e+d,s=((0,p.offsetStartDTS)(u,t,a),0<d?this.lastEndTime=c:(g.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),!!u.audio),a=!!u.video,d="",u=(s&&(d+="audio"),a&&(d+="video"),{data1:t,startPTS:e,startDTS:e,endPTS:c,endDTS:c,type:d,hasAudio:s,hasVideo:a,nb:1,dropped:0}),e=(o.audio="audio"===u.type?u:void 0,o.video="audio"!==u.type?u:void 0,o.initSegment=l,null!=(t=this.initPTS)?t:0);return o.id3=(0,f.flushTextTrackMetadataCueSamples)(i,r,e,e),n.samples.length&&(o.text=(0,f.flushTextTrackUserdataCueSamples)(n,r,e)),o};const n=r;function r(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}},"./src/task-loop.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});(i=r.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.onHandlerDestroyed=function(){},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},i.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},i.doTick=function(){};var n=r;function r(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}},"./src/types/cmcd.ts":(e,t,i)=>{i.r(t),i.d(t,{CMCDObjectType:()=>n,CMCDStreamType:()=>a,CMCDStreamingFormat:()=>r,CMCDVersion:()=>s});var n,r,a,s=1;(i=n=n||{}).MANIFEST="m",i.AUDIO="a",i.VIDEO="v",i.MUXED="av",i.INIT="i",i.CAPTION="c",i.TIMED_TEXT="tt",i.KEY="k",i.OTHER="o",(t=r=r||{}).DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o",(i=a=a||{}).VOD="v",i.LIVE="l"},"./src/types/demuxer.ts":(e,t,i)=>{var n;i.r(t),i.d(t,{MetadataSchema:()=>n}),(i=n=n||{}).audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3"},"./src/types/level.ts":(e,t,i)=>{function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r;i.r(t),i.d(t,{HlsSkip:()=>r,HlsUrlParameters:()=>a,Level:()=>s,getSkipValue:()=>function(e,t){var i=e.canSkipUntil,n=e.canSkipDateRanges,e=e.endSN;return i&&(void 0!==t?t-e:0)<i?n?r.v2:r.Yes:r.No}}),(i=r=r||{}).No="",i.Yes="YES",i.v2="v2";l.prototype.addDirectives=function(e){e=new self.URL(e);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()};var a=l,s=(n((t=o).prototype,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}]),Object.defineProperty(t,"prototype",{writable:!1}),o);function o(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}function l(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}},"./src/types/loader.ts":(e,t,i)=>{var n,r;i.r(t),i.d(t,{PlaylistContextType:()=>n,PlaylistLevelType:()=>r}),(i=n=n||{}).MANIFEST="manifest",i.LEVEL="level",i.AUDIO_TRACK="audioTrack",i.SUBTITLE_TRACK="subtitleTrack",(t=r=r||{}).MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"},"./src/types/transmuxer.ts":(e,t,i)=>{i.r(t),i.d(t,{ChunkMetadata:()=>n});var n=function(e,t,i,n,r,a){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=a}},"./src/utils/attr-list.ts":(e,t,i)=>{i.r(t),i.d(t,{AttrList:()=>a});var n=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=((i=s.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},i.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},i.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},i.decimalFloatingPoint=function(e){return parseFloat(this[e])},i.optionalFloat=function(e,t){e=this[e];return e?parseFloat(e):t},i.enumeratedString=function(e){return this[e]},i.bool=function(e){return"YES"===this[e]},i.decimalResolution=function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},s.parseAttrList=function(e){var t,i={};for(r.lastIndex=0;null!==(t=r.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1]]=n}return i},s);function s(e){for(var t in e="string"==typeof e?s.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}},"./src/utils/binary-search.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});const n={search:function(e,t){for(var i,n,r=0,a=e.length-1;r<=a;){var s=t(n=e[i=(r+a)/2|0]);if(0<s)r=1+i;else{if(!(s<0))return n;a=i-1}}return null}}},"./src/utils/buffer-helper.ts":(e,t,i)=>{i.r(t),i.d(t,{BufferHelper:()=>a});var n=i("./src/utils/logger.ts"),r={length:0,start:function(){return 0},end:function(){return 0}},a=(s.isBuffered=function(e,t){try{if(e)for(var i=s.getBuffered(e),n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},s.bufferInfo=function(e,t,i){try{if(e){for(var n=s.getBuffered(e),r=[],a=0;a<n.length;a++)r.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(r,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},s.bufferedInfo=function(e,t,i){t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});var n=[];if(i)for(var r=0;r<e.length;r++){var a=n.length;if(a){var s=n[a-1].end;e[r].start-s<i?e[r].end>s&&(n[a-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;for(var o,l=0,u=t,c=t,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(h<=t+i&&t<f)u=h,l=(c=f)-t;else if(t+i<h){o=h;break}}return{len:l,start:u||0,end:c||0,nextStart:o}},s.getBuffered=function(e){try{return e.buffered}catch(e){return n.logger.log("failed to get media.buffered",e),r}},s);function s(){}},"./src/utils/cea-608-parser.ts":(e,t,i)=>{i.r(t),i.d(t,{CaptionScreen:()=>A,Row:()=>y,default:()=>I});function a(e){var t=e;return r.hasOwnProperty(e)&&(t=r[e]),String.fromCharCode(t)}function l(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t}var u,n=i("./src/utils/logger.ts"),r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=15,s=100,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g=((t=u=u||{})[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA",L.prototype.log=function(e,t){this.verboseLevel>=e&&n.logger.log(this.time+" ["+e+"] "+t)},L),v=((i=C.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},i.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},i.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},i.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},i.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},i.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},C),m=((t=_.prototype).reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},_),y=((i=S.prototype).equals=function(e){for(var t=!0,i=0;i<s;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t},i.copy=function(e){for(var t=0;t<s;t++)this.chars[t].copy(e.chars[t])},i.isEmpty=function(){for(var e=!0,t=0;t<s;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},i.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(u.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>s&&(this.logger.log(u.DEBUG,"Too large cursor position "+this.pos),this.pos=s)},i.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},i.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},i.insertChar=function(e){144<=e&&this.backSpace();var t=a(e);this.pos>=s?this.logger.log(u.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},i.clearFromPos=function(e){for(var t=e;t<s;t++)this.chars[t].reset()},i.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},i.clearToEndOfRow=function(){this.clearFromPos(this.pos)},i.getTextString=function(){for(var e=[],t=!0,i=0;i<s;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},i.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},S),A=((t=k.prototype).reset=function(){for(var e=0;e<c;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,i=0;i<c;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<c;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<c;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(u.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(u.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;i<c;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[n].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[n+o])}}this.currRow=t;a=this.rows[this.currRow];if(null!==e.indent){s=e.indent,s=Math.max(s-1,0);a.setCursor(e.indent),e.color=a.chars[s].penState.foreground}a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},t.setBkgData=function(e){this.logger.log(u.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(u.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(e,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(u.INFO,"Rolling up")}else this.logger.log(u.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],i="",n=0;n<c;n++){var r=this.rows[n].getTextString();r&&(e?t.push("Row "+(n+1)+": '"+r+"'"):t.push(r.trim()))}return i=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):i},t.getTextAndFormat=function(){return this.rows},k),E=((i=b.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},i.getHandler=function(){return this.outputFilter},i.setHandler=function(e){this.outputFilter=e},i.setPAC=function(e){this.writeScreen.setPAC(e)},i.setBkgData=function(e){this.writeScreen.setBkgData(e)},i.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(u.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},i.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(u.INFO,i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(u.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},i.ccRCL=function(){this.logger.log(u.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},i.ccBS=function(){this.logger.log(u.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},i.ccAOF=function(){},i.ccAON=function(){},i.ccDER=function(){this.logger.log(u.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},i.ccRU=function(e){this.logger.log(u.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},i.ccFON=function(){this.logger.log(u.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},i.ccRDC=function(){this.logger.log(u.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},i.ccTR=function(){this.logger.log(u.INFO,"TR"),this.setMode("MODE_TEXT")},i.ccRTD=function(){this.logger.log(u.INFO,"RTD"),this.setMode("MODE_TEXT")},i.ccEDM=function(){this.logger.log(u.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},i.ccCR=function(){this.logger.log(u.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},i.ccENM=function(){this.logger.log(u.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},i.ccEOC=function(){if(this.logger.log(u.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(u.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},i.ccTO=function(e){this.logger.log(u.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},i.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{e=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]}this.logger.log(u.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},i.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},i.cueSplitAtTime=function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},b);(t=T.prototype).getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var i,n,r,a=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(n=127&t[s],r=127&t[s+1],0!=n||0!=r){if(this.logger.log(u.DATA,"["+l([t[s],t[s+1]])+"] -> ("+l([n,r])+")"),!(i=(i=(i=(i=this.parseCmd(n,r))?i:this.parseMidrow(n,r))||this.parsePAC(n,r))||this.parseBackgroundAttributes(n,r))&&(a=this.parseChars(n,r))){var o=this.currentChannel;o&&0<o?this.channels[o].insertChars(a):this.logger.log(u.WARNING,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(u.WARNING,"Couldn't parse cleaned data "+l([n,r])+" orig: "+l([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var i=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(R(e,t,i))return D(null,null,i),this.logger.log(u.DEBUG,"Repeated command ("+l([e,t])+") is dropped"),!0;var n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),D(e,t,i),this.currentChannel=n,!0},t.parseMidrow=function(e,t){if((17===e||25===e)&&32<=t&&t<=47){if((i=17===e?1:2)!==this.currentChannel)return this.logger.log(u.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[i];return!!i&&(i.ccMIDROW(t),this.logger.log(u.DEBUG,"MIDROW ("+l([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var i=this.cmdHistory;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(R(e,t,i))return D(null,null,i),!0;var n=e<=23?1:2,r=this.channels[n];return!!r&&(r.setPAC(this.interpretPAC((64<=t&&t<=95?1==n?o:h:1==n?d:f)[e],t)),D(e,t,i),this.currentChannel=n,!0)},t.interpretPAC=function(e,t){e={color:null,italics:!1,indent:null,underline:!1,row:e},t=95<t?t-96:t-64;return e.underline=1==(1&t),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},t.parseChars=function(e,t){var i=null,n=null;if(17<=(n=25<=e?(r=2,e-8):(r=1,e))&&n<=19?(this.logger.log(u.INFO,"Special char '"+a(n=17===n?t+80:18===n?t+112:t+144)+"' in channel "+r),i=[n]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i){var r=l(i);this.logger.log(u.DEBUG,"Char codes =  "+r.join(",")),D(e,t,this.cmdHistory)}return i},t.parseBackgroundAttributes=function(e,t){var i;if(!((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47))return!1;var n={};16===e||24===e?(i=Math.floor((t-32)/2),n.background=p[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));return this.channels[e<=23?1:2].setBkgData(n),D(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var i=this.channels[t];i&&i.cueSplitAtTime(e)}};function T(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new g;this.channels=[null,new E(e,t,n),new E(e+1,i,n)],this.cmdHistory={a:null,b:null},this.logger=n}function b(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new A(i),this.nonDisplayedMemory=new A(i),this.lastOutputScreen=new A(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}function k(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<c;t++)this.rows.push(new y(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}function S(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<s;t++)this.chars.push(new m);this.logger=e,this.pos=0,this.currPenState=new v}function _(e,t,i,n,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new v(t,i,n,r,a)}function C(e,t,i,n,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=n||"black",this.flash=r||!1}function L(){this.time=null,this.verboseLevel=u.ERROR}function D(e,t,i){i.a=e,i.b=t}function R(e,t,i){return i.a===e&&i.b===t}const I=T},"./src/utils/codecs.ts":(e,t,i)=>{i.r(t),i.d(t,{isCodecSupportedInMp4:()=>function(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')},isCodecType:()=>function(e,t){t=n[t];return!!t&&!0===t[e.slice(0,4)]}});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}}},"./src/utils/cues.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var p=i("./src/utils/vttparser.ts"),g=i("./src/utils/webvtt-parser.ts"),v=i("./src/utils/texttrack-utils.ts"),m=/\s/;const n={newCue:function(t,e,i,n){for(var r,a,s,o,l=[],u=self.VTTCue||self.TextTrackCue,c=0;c<n.rows.length;c++)if(a=!0,s=0,o="",!(r=n.rows[c]).isEmpty()){for(var d=0;d<r.chars.length;d++)m.test(r.chars[d].uchar)&&a?s++:(o+=r.chars[d].uchar,a=!1);(r.cueStartTime=e)===i&&(i+=1e-4),16<=s?s--:s++;var h=(0,p.fixLineBreaks)(o.trim()),f=(0,g.generateCueId)(e,i,h);t&&t.cues&&t.cues.getCueById(f)||((h=new u(e,i,h)).id=f,h.line=c+1,h.align="left",h.position=10+Math.min(80,10*Math.floor(8*s/32)),l.push(h))}return t&&l.length&&(l.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line}),l.forEach(function(e){return(0,v.addCueToTrack)(t,e)})),l}}},"./src/utils/discontinuities.ts":(e,t,i)=>{i.r(t),i.d(t,{adjustSlidingStart:()=>h,alignMediaPlaylistByPDT:()=>function(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var i=e.fragments,t=t.fragments;if(i.length&&t.length){var t=t[Math.round(t.length/2)-1],i=l(i,t.cc)||i[Math.round(i.length/2)-1],n=t.programDateTime,r=i.programDateTime;null!==n&&null!==r&&h((r-n)/1e3-(i.start-t.start),e)}}},alignPDT:()=>f,alignStream:()=>function(e,t,i){if(t){var n=i,r=t;if(u(e,r,n)){e=c(r.details,n);e&&(0,a.isFiniteNumber)(e.start)&&(s.logger.log("Adjusting PTS using last level due to CC increase within current level "+n.url),h(e.start,n))}!i.alignedSliding&&t.details&&f(i,t.details),i.alignedSliding||!t.details||i.skippedSegments||(0,o.adjustSliding)(t.details,i)}},findDiscontinuousReferenceFrag:()=>c,findFirstFragWithCC:()=>l,shouldAlignOnDiscontinuities:()=>u});var a=i("./src/polyfills/number.ts"),s=i("./src/utils/logger.ts"),o=i("./src/controller/level-helper.ts");function l(e,t){for(var i=null,n=0,r=e.length;n<r;n++){var a=e[n];if(a&&a.cc===t){i=a;break}}return i}function u(e,t,i){return!(!t.details||!(i.endCC>i.startCC||e&&e.cc<i.startCC))}function c(e,t,i){e=e.fragments,t=t.fragments;if(t.length&&e.length){e=l(e,t[0].cc);if(e&&(!e||e.startPTS))return e;s.logger.log("No frag in previous level to align on")}else s.logger.log("No fragments to align")}function d(e,t){if(e){t=e.start+t;e.start=e.startPTS=t,e.endPTS=t+e.duration}}function h(e,t){for(var i=t.fragments,n=0,r=i.length;n<r;n++)d(i[n],e);t.fragmentHint&&d(t.fragmentHint,e),t.alignedSliding=!0}function f(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var i=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,t=(n-i)/1e3+t.fragments[0].start;t&&(0,a.isFiniteNumber)(t)&&(s.logger.log("Adjusting PTS using programDateTime delta "+(n-i)+"ms, sliding:"+t.toFixed(3)+" "+e.url+" "),h(t,e))}}},"./src/utils/ewma-bandwidth-estimator.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var r=i("./src/utils/ewma.ts");(t=a.prototype).update=function(e,t){var i=this.slow_,n=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new r.default(e,i.getEstimate(),i.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new r.default(t,n.getEstimate(),n.getTotalWeight()))},t.sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){};const n=a;function a(e,t,i){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(e),this.fast_=new r.default(t)}},"./src/utils/ewma.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});(i=r.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_};const n=r;function r(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}},"./src/utils/fetch-loader.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>m,fetchSupported:()=>function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}});var d=i("./src/polyfills/number.ts"),n=i("./src/loader/load-stats.ts"),u=i("./src/demux/chunk-cache.ts");function r(e){var i="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return a(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)})(e)}function a(e,t,i){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}()?Reflect.construct.bind():function(e,t,i){var n=[null],t=(n.push.apply(n,t),new(Function.bind.apply(e,n)));return i&&s(t,i.prototype),t}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}(t=l.prototype).destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(n,r,a){var s=this,o=this.stats;if(o.loading.start)throw new Error("Loader can only be used once.");o.loading.start=self.performance.now();var e=function(e,t){t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(h({},e.headers))};return e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(n,this.controller.signal),l=a.onProgress,u="arraybuffer"===n.responseType,c=u?"byteLength":"length";this.context=n,this.config=r,this.callbacks=a,this.request=this.fetchSetup(n,e),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){s.abortInternal(),a.onTimeout(o,n,s.response)},r.timeout),self.fetch(this.request).then(function(e){var t,i;if((s.response=s.loader=e).ok)return o.loading.first=Math.max(self.performance.now(),o.loading.start),o.total=parseInt(e.headers.get("Content-Length")||"0"),l&&(0,d.isFiniteNumber)(r.highWaterMark)?s.loadProgressively(e,o,n,r.highWaterMark,l):u?e.arrayBuffer():e.text();throw t=e.status,i=e.statusText,new g(i||"fetch, bad network response",t,e)}).then(function(e){var t=s.response,i=(self.clearTimeout(s.requestTimeout),o.loading.end=Math.max(self.performance.now(),o.loading.first),e[c]),i=(i&&(o.loaded=o.total=i),{url:t.url,data:e});l&&!(0,d.isFiniteNumber)(r.highWaterMark)&&l(o,n,e,t),a.onSuccess(i,o,n,t)}).catch(function(e){if(self.clearTimeout(s.requestTimeout),!o.aborted){var t=e&&e.code||0,i=e?e.message:null;a.onError({code:t,text:i},n,e?e.details:null)}})},t.getCacheAge=function(){var e,t=null;return t=this.response?(e=this.response.headers.get("age"))?parseFloat(e):null:t},t.loadProgressively=function(n,r,a,s,o){void 0===s&&(s=0);var l=new u.default,e=n.body.getReader();return function i(){return e.read().then(function(e){if(e.done)return l.dataLength&&o(r,a,l.flush(),n),Promise.resolve(new ArrayBuffer(0));var e=e.value,t=e.length;return r.loaded+=t,t<s||l.dataLength?(l.push(e),l.dataLength>=s&&o(r,a,l.flush(),n)):o(r,a,e,n),i()}).catch(function(){return Promise.reject()})}()};i=l;function l(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||c,this.controller=new self.AbortController,this.stats=new n.LoadStats}function c(e,t){return new self.Request(e.url,t)}f=r(Error),t=f,(p=v).prototype=Object.create(t.prototype),s(p.prototype.constructor=p,t);var f,p,g=v;function v(e,t,i){return(e=f.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=i,e}const m=i},"./src/utils/imsc1-ttml-parser.ts":(e,t,i)=>{i.r(t),i.d(t,{IMSC1_CODEC:()=>n,parseIMSC1:()=>function(e,t,i,n,r){var a=(0,o.findBox)(new Uint8Array(e),["mdat"]);if(0!==a.length){var a=a.map(function(e){return(0,l.utf8ArrayToStr)(e)}),s=(0,u.toTimescaleFromScale)(t,1,i);try{a.forEach(function(e){return n(function(e,u){var i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},c=Object.keys(n).reduce(function(e,t){return e[t]=i.getAttribute("ttp:"+t)||n[t],e},{}),d="preserve"!==i.getAttribute("xml:space"),h=A(y(i,"styling","style")),f=A(y(i,"layout","region")),e=y(i,"body","[begin]");return[].map.call(e,function(e){var t=function n(e,r){return[].slice.call(e.childNodes).reduce(function(e,t,i){return"br"===t.nodeName&&i?e+"\n":null!=(i=t.childNodes)&&i.length?n(t,r):r?e+t.textContent.trim().replace(/\s+/g," "):e+t.textContent},"")}(e,d);if(!t||!e.hasAttribute("begin"))return null;var i=b(e.getAttribute("begin"),c),n=b(e.getAttribute("dur"),c),r=b(e.getAttribute("end"),c);if(null===i)throw T(e);if(null===r){if(null===n)throw T(e);r=i+n}var a,s,o,l,n=new p.default(i-u,r-u,t),i=(n.id=(0,g.generateCueId)(n.startTime,n.endTime,n.text),f[e.getAttribute("region")]),r=h[e.getAttribute("style")],r=(n.position=10,n.size=80,s=r,t=h,o="http://www.w3.org/ns/ttml#styling",(e=(l=null)!=(a=i)&&a.hasAttribute("style")?a.getAttribute("style"):null)&&t.hasOwnProperty(e)&&(l=t[e]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(e,t){var i=E(s,o,t)||E(a,o,t)||E(l,o,t);return i&&(e[t]=i),e},{})),i=r.textAlign;if(i){t=m[i];t&&(n.lineAlign=t),n.align=i}return v(n,r),n}).filter(function(e){return null!==e})}(e,s))})}catch(e){r(e)}}else r(new Error("Could not parse IMSC1 mdat"))}});var o=i("./src/utils/mp4-tools.ts"),s=i("./src/utils/vttparser.ts"),p=i("./src/utils/vttcue.ts"),l=i("./src/demux/id3.ts"),u=i("./src/utils/timescale-conversion.ts"),g=i("./src/utils/webvtt-parser.ts");function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var n="stpp.ttml.im1t",c=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,d=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,m={left:"start",center:"center",right:"end",start:"start",end:"end"};function y(e,t,i){e=e.getElementsByTagName(t)[0];return e?[].slice.call(e.querySelectorAll(i)):[]}function A(e){return e.reduce(function(e,t){var i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function E(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function T(e){return new Error("Could not parse ttml timestamp "+e)}function b(n,e){if(!n)return null;var t,i,r,a=(0,s.parseTimeStamp)(n);return null===a&&(c.test(n)?a=(t=e,i=c.exec(n),r=(0|i[4])+(0|i[5])/t.subFrameRate,3600*(0|i[1])+60*(0|i[2])+(0|i[3])+r/t.frameRate):d.test(n)&&(a=function(e){var t=d.exec(n),i=Number(t[1]);switch(t[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(e))),a}},"./src/utils/logger.ts":(e,t,i)=>{i.r(t),i.d(t,{enableLogs:()=>function(e,t){if(self.console&&!0===e||"object"==typeof e){!function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];t.forEach(function(e){a[e]=i[e]?i[e].bind(i):(e=e,(t=self.console[e])?t.bind(self.console,"["+e+"] >"):r);var t})}(e,"debug","log","info","warn","error");try{a.log('Debug logs enabled for "'+t+'"')}catch(e){a=n}}else a=n},logger:()=>s});function r(){}var n={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=n;var s=n},"./src/utils/mediakeys-helper.ts":(e,t,i)=>{i.r(t),i.d(t,{KeySystems:()=>n,requestMediaKeySystemAccess:()=>r}),(i=n=n||{}).WIDEVINE="com.widevine.alpha",i.PLAYREADY="com.microsoft.playready";var n,r="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":(e,t,i)=>{i.r(t),i.d(t,{getMediaSource:()=>function(){return self.MediaSource||self.WebKitMediaSource}})},"./src/utils/mp4-tools.ts":(e,t,i)=>{i.r(t),i.d(t,{RemuxerTrackIdConfig:()=>r,appendUint8Array:()=>function(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i},bin2str:()=>d,computeRawDurationFromSamples:()=>T,discardEPB:()=>_,findBox:()=>R,getDuration:()=>function(e,t){for(var i=0,n=0,r=0,a=R(e,["moof","traf"]),s=0;s<a.length;s++){var o=a[s],l=R(o,["tfhd"])[0],u=t[L(l,4)];if(u){var c=u.default,d=L(l,0)|(null==c?void 0:c.flags),h=null==c?void 0:c.duration;8&d&&(h=L(l,2&d?12:8));for(var f=u.timescale||9e4,p=R(o,["trun"]),g=0;g<p.length;g++)!(i=T(p[g]))&&h&&(i=h*L(p[g],4)),u.type===C.ElementaryStreamTypes.VIDEO?n+=i/f:u.type===C.ElementaryStreamTypes.AUDIO&&(r+=i/f)}}if(0!==n||0!==r)return n||r;for(var v=0,m=R(e,["sidx"]),y=0;y<m.length;y++){var A=E(m[y]);null!=A&&A.references&&(v+=A.references.reduce(function(e,t){return e+t.info.duration||0},0))}return v},getStartDTS:()=>function(a,e){return R(e,["moof","traf"]).reduce(function(e,t){var n=R(t,["tfdt"])[0],r=n[0],t=R(t,["tfhd"]).reduce(function(e,t){t=L(t,4),t=a[t];if(t){var i=L(n,4),i=(i=1===r?(i*=Math.pow(2,32))+L(n,8):i)/(t.timescale||9e4);if(isFinite(i)&&(null===e||i<e))return i}return e},null);return null!==t&&isFinite(t)&&(null===e||t<e)?t:e},null)||0},offsetStartDTS:()=>function(i,e,r){R(e,["moof","traf"]).forEach(function(t){R(t,["tfhd"]).forEach(function(e){e=L(e,4),e=i[e];if(e){var n=e.timescale||9e4;R(t,["tfdt"]).forEach(function(e){var t=e[0],i=L(e,4);if(0===t)i-=r*n,s(e,4,i=Math.max(i,0));else{i=(i=(i*=Math.pow(2,32))+L(e,8))-r*n;i=Math.max(i,0),t=Math.floor(i/(a+1)),i=Math.floor(i%(a+1));s(e,4,t),s(e,8,i)}})}})})},parseEmsg:()=>function(e){var t=e[0],i="",n="",r=0,a=0,s=0,o=0,l=0,u=0;if(0===t){for(;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;for(i+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;n+=d(e.subarray(u,u+1)),u+=1,r=L(e,12),a=L(e,16),o=L(e,20),l=L(e,24),u=28}else if(1===t){r=L(e,u+=4);var t=L(e,u+=4),c=L(e,u+=4);for(u+=4,s=Math.pow(2,32)*t+c,Number.isSafeInteger(s)||(s=Number.MAX_SAFE_INTEGER),o=L(e,u),l=L(e,u+=4),u+=4;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;for(i+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;n+=d(e.subarray(u,u+1)),u+=1}return{schemeIdUri:i,value:n,timeScale:r,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(u,e.byteLength)}},parseInitSegment:()=>function(e){for(var i=[],t=R(e,["moov","trak"]),n=0;n<t.length;n++){var r=t[n],a=R(r,["tkhd"])[0];if(a){var s=a[0],a=L(a,0===s?12:20),o=R(r,["mdia","mdhd"])[0];if(o){o=L(o,0===(s=o[0])?12:20),s=R(r,["mdia","hdlr"])[0];if(s){s=d(s.subarray(8,12)),s={soun:C.ElementaryStreamTypes.AUDIO,vide:C.ElementaryStreamTypes.VIDEO}[s];if(s){var r=R(r,["mdia","minf","stbl","stsd"])[0],l=void 0;r&&(l=d(r.subarray(12,16))),i[a]={timescale:o,type:s},i[s]={timescale:o,id:a,codec:l}}}}}}return R(e,["moov","mvex","trex"]).forEach(function(e){var t=L(e,4),t=i[t];t&&(t.default={duration:L(e,12),flags:L(e,20)})}),i},parseSEIMessageFromNALu:()=>I,parseSamples:()=>function(E,T){var b=[],k=T.samples,S=T.timescale,a=T.id,_=!1;return R(k,["moof"]).map(function(e){var A=e.byteOffset-8;R(e,["traf"]).map(function(r){var e=R(r,["tfdt"]).map(function(e){var t=e[0],i=L(e,4);return(i=1===t?(i*=Math.pow(2,32))+L(e,8):i)/S})[0];return void 0!==e&&(E=e),R(r,["tfhd"]).map(function(e){var t=L(e,4),i=16777215&L(e,0),m=0,y=0,n=8;t===a&&(0!=(1&i)&&(n+=8),0!=(2&i)&&(n+=4),0!=(8&i)&&(m=L(e,n),n+=4),0!=(16&i)&&(y=L(e,n),n+=4),0!=(32&i)&&(n+=4),"video"===T.type&&(_=function(e){if(!e)return!1;var t=e.indexOf("."),e=t<0?e:e.substring(0,t);return"hvc1"===e||"hev1"===e||"dvh1"===e||"dvhe"===e}(T.codec)),R(r,["trun"]).map(function(e){var t=e[0],i=16777215&L(e,0),n=0,r=0!=(256&i),a=0,s=0!=(512&i),o=0,l=0!=(1024&i),u=0!=(2048&i),c=0,d=L(e,4),h=8;0!=(1&i)&&(n=L(e,h),h+=4),0!=(4&i)&&(h+=4);for(var f=n+A,p=0;p<d;p++){if(r?(a=L(e,h),h+=4):a=m,s?(o=L(e,h),h+=4):o=y,l&&(h+=4),u&&(c=(0===t?L:D)(e,h),h+=4),T.type===C.ElementaryStreamTypes.VIDEO)for(var g=0;g<o;){var v=L(k,f);!function(e,t){if(e)return 39==(e=t>>1&63)||40==e;return 6==(31&t)}(_,k[f+=4])||I(k.subarray(f,f+v),_?2:1,E+c/S,b),f+=v,g+=v+4}E+=a/S}}))})})}),b},parseSegmentIndex:()=>E,readSint32:()=>D,readUint16:()=>S,readUint32:()=>L,segmentValidRange:()=>function(e){var t={valid:null,remainder:null},i=R(e,["moof"]);if(!i)return t;if(i.length<2)return t.remainder=e,t;i=i[i.length-1];return t.valid=(0,n.sliceUint8)(e,0,i.byteOffset-8),t.remainder=(0,n.sliceUint8)(e,i.byteOffset-8),t},writeUint32:()=>s});var n=i("./src/utils/typed-array.ts"),C=i("./src/loader/fragment.ts"),k=i("./src/demux/id3.ts"),a=Math.pow(2,32)-1,o=[].push,r={video:1,audio:2,id3:3,text:4};function d(e){return String.fromCharCode.apply(null,e)}function S(e,t){e=e[t]<<8|e[t+1];return e<0?65536+e:e}function L(e,t){e=D(e,t);return e<0?4294967296+e:e}function D(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function s(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function R(e,t){var i=[];if(!t.length)return i;for(var n=e.byteLength,r=0;r<n;){var a=L(e,r),a=1<a?r+a:n;if(d(e.subarray(r+4,r+8))===t[0])if(1===t.length)i.push(e.subarray(r+8,a));else{var s=R(e.subarray(r+8,a),t.slice(1));s.length&&o.apply(i,s)}r=a}return i}function E(e){var t=[],i=e[0],n=8,r=L(e,n),a=e.length+0,s=S(e,n=(n+=4)+(0===i?8:16)+2);n+=2;for(var o=0;o<s;o++){var l=n,u=L(e,l),c=2147483647&u;if(1==(2147483648&u)>>>31)return null;u=L(e,l+=4);l+=4,t.push({referenceSize:c,subsegmentDuration:u,info:{duration:u/r,start:a,end:a+c-1}}),a+=c,n=l+=4}return{earliestPresentationTime:0,timescale:r,version:i,referencesCount:s,references:t}}function T(e){var t=L(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var n=0,r=L(e,4),a=0;a<r;a++)256&t&&(n+=L(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}function I(e,t,i,n){var r=_(e),a=0;a+=t;for(var s=0,o=0,l=!1,u=0;a<r.length;){s=0;for(;!(a>=r.length)&&(s+=u=r[a++],255===u););o=0;for(;!(a>=r.length)&&(o+=u=r[a++],255===u););var c=r.length-a;if(!l&&4===s&&a<r.length){if(l=!0,181===r[a++]){var d=S(r,a);if(a+=2,49===d){d=L(r,a);if(a+=4,1195456820===d){d=r[a++];if(3===d){var h=r[a++],f=64&h,p=f?2+3*(31&h):0,g=new Uint8Array(p);if(f){g[0]=h;for(var v=1;v<p;v++)g[v]=r[a++]}n.push({type:d,payloadType:s,pts:i,bytes:g})}}}}}else if(5===s&&o<c){if(l=!0,16<o){for(var m=[],y=0;y<16;y++){var A=r[a++].toString(16);m.push(1==A.length?"0"+A:A),3!==y&&5!==y&&7!==y&&9!==y||m.push("-")}for(var E=o-16,T=new Uint8Array(E),b=0;b<E;b++)T[b]=r[a++];n.push({payloadType:s,pts:i,uuid:m.join(""),userData:(0,k.utf8ArrayToStr)(T),userDataBytes:T})}}else if(o<c)a+=o;else if(c<o)break}}function _(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,a=new Uint8Array(r),s=0,n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a}},"./src/utils/output-filter.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});(i=r.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},i.newCue=function(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},i.reset=function(){this.cueRanges=[],this.startTime=null};var n=r;function r(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}},"./src/utils/texttrack-utils.ts":(e,t,i)=>{i.r(t),i.d(t,{addCueToTrack:()=>function(e,t){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(i){r.logger.debug("[texttrack-utils]: "+i);var n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}"disabled"===i&&(e.mode=i)},clearCurrentCues:()=>function(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)},getCuesInRange:()=>o,removeCuesInRange:()=>function(e,t,i,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=o(e.cues,t,i),s=0;s<a.length;s++)n&&!n(a[s])||e.removeCue(a[s]);"disabled"===r&&(e.mode=r)},sendAddTrackEvent:()=>function(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}});var r=i("./src/utils/logger.ts");function o(e,t,i){var n=[],r=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var n=0,r=i;n<=r;){var a=Math.floor((r+n)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&n<i))return a;n=a+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(-1<r)for(var a=r,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=i)n.push(o);else if(o.startTime>i)return n}return n}},"./src/utils/time-ranges.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});const n={toString:function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":(e,t,i)=>{function r(e,t,i,n){e=e*t*(i=void 0===i?1:i);return(n=void 0===n?!1:n)?Math.round(e):e}i.r(t),i.d(t,{toMpegTsClockFromTimescale:()=>function(e,t){return r(e,9e4,1/(t=void 0===t?1:t))},toMsFromMpegTsClock:()=>function(e,t){return r(e,1e3,1/9e4,t=void 0===t?!1:t)},toTimescaleFromBase:()=>r,toTimescaleFromScale:()=>function(e,t,i,n){return r(e,t,1/(i=void 0===i?1:i),n=void 0===n?!1:n)}})},"./src/utils/typed-array.ts":(e,t,i)=>{i.r(t),i.d(t,{sliceUint8:()=>function(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}})},"./src/utils/vttcue.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});const n=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var A=["","lr","rl"],t=["start","middle","end","left","right"];function E(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;t=t.toLowerCase();return!!~e.indexOf(t)&&t}function T(e){return E(t,e)}function b(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=1;r<arguments.length;r++){var a,s=arguments[r];for(a in s)e[a]=s[a]}return e}function e(e,t,i){var n=this,r={enumerable:!0},a=(n.hasBeenReset=!1,""),s=!1,o=e,l=t,u=i,c=null,d="",h=!0,f="auto",p="start",g=50,v="middle",m=50,y="middle";Object.defineProperty(n,"id",b({},r,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(n,"pauseOnExit",b({},r,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(n,"startTime",b({},r,{get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",b({},r,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",b({},r,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",b({},r,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",b({},r,{get:function(){return d},set:function(e){e=E(A,e);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",b({},r,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",b({},r,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",b({},r,{get:function(){return p},set:function(e){e=T(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",b({},r,{get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",b({},r,{get:function(){return v},set:function(e){e=T(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",b({},r,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",b({},r,{get:function(){return y},set:function(e){e=T(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),n.displayState=void 0}return e.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},e}()},"./src/utils/vttparser.ts":(e,t,i)=>{i.r(t),i.d(t,{VTTParser:()=>s,fixLineBreaks:()=>f,parseTimeStamp:()=>l});var o=i("./src/utils/vttcue.ts"),n=(r.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},r);function r(){}function l(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(n||0)}e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return e?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}(t=a.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){t=parseFloat(t);if(0<=t&&t<=100)return this.set(e,t),!0}return!1};var u=a;function a(){this.values=Object.create(null)}function c(e,t,i,n){var r,a=n?e.split(n):[e];for(r in a)if("string"==typeof a[r]){var s=a[r].split(i);2===s.length&&t(s[0],s[1])}}var d=new o.default(0,0,""),h="middle"===d.align?"middle":"center";function f(e){return e.replace(/<br(?: \/)?>/gi,"\n")}(i=p.prototype).parse=function(e){var n=this;function t(){for(var e=0,t=f(t=n.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.slice(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.slice(e),i}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r=(i=t()).match(/^(\uEF\uBB\uBF)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:i=t(),n.state){case"HEADER":/:/.test(i)?c(i,function(e,t){},/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new o.default(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{!function(t,e,r){var i,a,n=t;function s(){var e=l(t);if(null===e)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.slice(3),o(),e.endTime=s(),o(),i=t,e=e,a=new u,c(i,function(e,t){var i;switch(e){case"region":for(var n=r.length-1;0<=n;n--)if(r[n].id===t){a.set(e,r[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),a.integer(e,i[0]),a.percent(e,i[0])&&a.set("snapToLines",!1),a.alt(e,i[0],["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",h,"end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",h,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",h,"end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),"auto"===(i=a.get("line","auto"))&&-1===d.line&&(i=-1),e.line=i,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",h),"auto"===(i=a.get("position","auto"))&&50===d.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(i,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(null===n.cue)continue;n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID")}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},i.flush=function(){var t=this;try{if(!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this};var s=p;function p(){this.state="INITIAL",this.buffer="",this.decoder=new n,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}},"./src/utils/webvtt-parser.ts":(e,t,i)=>{i.r(t),i.d(t,{generateCueId:()=>k,parseWebVTT:()=>function(e,t,i,r,a,s,n,o){var l,u=new m.VTTParser,e=(0,y.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(T,"\n").split("\n"),c=[],d=(0,A.toMpegTsClockFromTimescale)(t,i),h="00:00.000",f=0,p=0,g=!0;u.oncue=function(e){var t=r[a],i=r.ccOffset,n=(f-d)/9e4,t=(null!=t&&t.new&&(void 0!==p?i=r.ccOffset=t.start:function(e,t){var i,n=e[a],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,n.new=!1;for(;null!=(i=r)&&i.new;)e.ccOffset+=n.start-r.start,n.new=!1,r=e[(n=r).prevCC];e.presentationOffset=t}(r,n)),n&&(i=n-r.presentationOffset),e.endTime-e.startTime),n=(0,E.normalizePts)(9e4*(e.startTime+i-p),9e4*s)/9e4,i=(e.startTime=Math.max(n,0),e.endTime=Math.max(n+t,0),e.text.trim());e.text=decodeURIComponent(encodeURIComponent(i)),e.id||(e.id=k(e.startTime,e.endTime,i)),0<e.endTime&&c.push(e)},u.onparsingerror=function(e){l=e},u.onflush=function(){l?o(l):n(c)},e.forEach(function(e){if(g){if(b(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach(function(e){b(e,"LOCAL:")?h=e.slice(6):b(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))});try{p=function(e){var t=parseInt(e.slice(-3)),i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),r=9<e.length?parseInt(e.substring(0,e.indexOf(":"))):0;if((0,v.isFiniteNumber)(t)&&(0,v.isFiniteNumber)(i)&&(0,v.isFiniteNumber)(n)&&(0,v.isFiniteNumber)(r))return t+1e3*i+6e4*n+36e5*r;throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e)}(h)/1e3}catch(e){l=e}return}""===e&&(g=!1)}u.parse(e+"\n")}),u.flush()}});var v=i("./src/polyfills/number.ts"),m=i("./src/utils/vttparser.ts"),y=i("./src/demux/id3.ts"),A=i("./src/utils/timescale-conversion.ts"),E=i("./src/remux/mp4-remuxer.ts"),T=/\r\n|\n\r|\n|\r/g,b=function(e,t,i){return e.slice(i=void 0===i?0:i,i+t.length)===t},n=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function k(e,t,i){return n(e.toString())+n(t.toString())+n(i)}},"./src/utils/xhr-loader.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});var o=i("./src/utils/logger.ts"),n=i("./src/loader/load-stats.ts"),r=/^age:\s*[\d.]+\s*$/m;(t=s.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,n=this.stats,n=(n.loading.first=0,n.loaded=0,this.xhrSetup);try{if(n)try{n(i,t.url)}catch(e){i.open("GET",t.url,!0),n(i,t.url)}i.readyState||i.open("GET",t.url,!0);var r=this.context.headers;if(r)for(var a in r)i.setRequestHeader(a,r[a])}catch(e){return void this.callbacks.onError({code:i.status,text:e.message},t,i)}t.rangeEnd&&i.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),i.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,i=this.stats;if(e&&t){var n=t.readyState,r=this.config;if(!i.aborted&&2<=n)if(self.clearTimeout(this.requestTimeout),0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start)),4===n){t.onreadystatechange=null,t.onprogress=null;var a,n=t.status,s="arraybuffer"===t.responseType;if(200<=n&&n<300&&(s&&t.response||null!==t.responseText)){if(i.loading.end=Math.max(self.performance.now(),i.loading.first),s=s?(a=t.response).byteLength:(a=t.responseText).length,i.loaded=i.total=s,this.callbacks){s=this.callbacks.onProgress;if(s&&s(i,e,a,t),this.callbacks){s={url:t.responseURL,data:a};this.callbacks.onSuccess(s,i,e,t)}}}else i.retry>=r.maxRetry||400<=n&&n<499?(o.logger.error(n+" while loading "+e.url),this.callbacks.onError({code:n,text:t.statusText},e,t)):(o.logger.warn(n+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),i.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout)}},t.loadtimeout=function(){o.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e,t=null;return t=this.loader&&r.test(this.loader.getAllResponseHeaders())?(e=this.loader.getResponseHeader("age"))?parseFloat(e):null:t};const a=s;function s(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new n.LoadStats,this.retryDelay=0}},"./node_modules/eventemitter3/index.js":e=>{var n=Object.prototype.hasOwnProperty,f="~";function i(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");i=new a(i,n||e,r),n=f?f+t:t;return e._events[n]?e._events[n].fn?e._events[n]=[e._events[n],i]:e._events[n].push(i):(e._events[n]=i,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(f=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,r=new Array(n);i<n;i++)r[i]=t[i].fn;return r},t.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},t.prototype.emit=function(e,t,i,n,r,a){var s=f?f+e:e;if(!this._events[s])return!1;var o,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,a),!0}for(h=1,o=new Array(u-1);h<u;h++)o[h-1]=arguments[h];l.fn.apply(l.context,o)}else for(var c,d=l.length,h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),u){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,i);break;case 4:l[h].fn.call(l[h].context,t,i,n);break;default:if(!o)for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];l[h].fn.apply(l[h].context,o)}return!0},t.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){e=f?f+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var r=this._events[e];if(r.fn)r.fn!==t||n&&!r.once||i&&r.context!==i||l(this,e);else{for(var a=0,s=[],o=r.length;a<o;a++)(r[a].fn!==t||n&&!r[a].once||i&&r[a].context!==i)&&s.push(r[a]);s.length?this._events[e]=1===s.length?s[0]:s:l(this,e)}return this},t.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=f,e.exports=t.EventEmitter=t},"./node_modules/url-toolkit/src/url-toolkit.js":function(e){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,a=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=s.parseURL(e);if(n)return n.path=s.normalizePath(n.path),s.buildURLFromParts(n);throw new Error("Error trying to parse base URL.")}n=s.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");if(!t.netLoc&&t.path&&"/"!==t.path[0]){e=a.exec(t.path);t.netLoc=e[1],t.path=e[2]}t.netLoc&&!t.path&&(t.path="/");e={scheme:t.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(e.netLoc=t.netLoc,"/"!==n.path[0]))if(n.path){var r=t.path,r=r.substring(0,r.lastIndexOf("/")+1)+n.path;e.path=s.normalizePath(r)}else e.path=t.path,n.params||(e.params=t.params,n.query||(e.query=t.query));return null===e.path&&(e.path=i.alwaysNormalize?s.normalizePath(n.path):n.path),s.buildURLFromParts(e)},parseURL:function(e){e=t.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return i[e].call(t.exports,t,t.exports,r),t.exports}r.m=i,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var e=r("./src/hls.ts");return e.default})()),(rn=Rn.exports)&&rn.__esModule&&Object.prototype.hasOwnProperty.call(rn,"default")?rn.default:rn),$r=e.now,zr=e.assign,qr=e.listContainsIgnoreCase,a=(y.register("PLAYBACK_FRAGMENT_CHANGED"),y.register("PLAYBACK_FRAGMENT_PARSING_METADATA"),function(){var e=s,t=L;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t);var a=jr(s);function s(){var e=this,t=s;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).options.playback=Ur(Ur({},e.options),e.options.playback),e.options.hlsPlayback=Ur(Ur({},e.defaultOptions),e.options.hlsPlayback),e._minDvrSize=void 0===e.options.hlsMinimumDvrSize?60:e.options.hlsMinimumDvrSize,e._extrapolatedWindowNumSegments=e.options.playback&&void 0!==e.options.playback.extrapolatedWindowNumSegments?e.options.playback.extrapolatedWindowNumSegments:2,e._playbackType=_.VOD,e._lastTimeUpdate={current:0,total:0},e._lastDuration=null,e._playableRegionStartTime=0,e._localStartTimeCorrelation=null,e._localEndTimeCorrelation=null,e._playableRegionDuration=0,e._programDateTime=0,e._durationExcludesAfterLiveSyncPoint=!1,e._segmentTargetDuration=null,e._playlistType=null,e._recoverAttemptsRemaining=e.options.hlsRecoverAttempts||16,e}return e=[{key:"HLSJS",get:function(){return N}}],Gr((t=s).prototype,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel},set:function(e){this._currentLevel=e,this.trigger(y.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===_.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return $r()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,e=(e.remote+t)/1e3;return Math.min(e,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,i=this._now-t.local,t=(t.remote+i)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(t,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function(){return{preload:!0}}},{key:"customListeners",get:function(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"_setup",value:function(){var i=this;this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new N(zr({},this.options.playback.hlsjsConfig)),this._hls.once(N.Events.MEDIA_ATTACHED,function(){i.options.hlsPlayback.preload&&i._hls.loadSource(i.options.src)}),this._hls.on(N.Events.MANIFEST_PARSED,function(){return i._manifestParsed=!0}),this._hls.on(N.Events.LEVEL_LOADED,function(e,t){return i._updatePlaybackType(e,t)}),this._hls.on(N.Events.LEVEL_UPDATED,function(e,t){return i._onLevelUpdated(e,t)}),this._hls.on(N.Events.LEVEL_SWITCHING,function(e,t){return i._onLevelSwitch(e,t)}),this._hls.on(N.Events.FRAG_CHANGED,function(e,t){return i._onFragmentChanged(e,t)}),this._hls.on(N.Events.FRAG_LOADED,function(e,t){return i._onFragmentLoaded(e,t)}),this._hls.on(N.Events.FRAG_PARSING_METADATA,function(e,t){return i._onFragmentParsingMetadata(e,t)}),this._hls.on(N.Events.ERROR,function(e,t){return i._onHLSJSError(e,t)}),this._hls.on(N.Events.SUBTITLE_TRACK_LOADED,function(e,t){return i._onSubtitleLoaded(e,t)}),this._hls.on(N.Events.SUBTITLE_TRACKS_UPDATED,function(){return i._ccTracksUpdated=!0}),this.bindCustomListeners(),this._hls.attachMedia(this.el)}},{key:"bindCustomListeners",value:function(){var n=this;this.customListeners.forEach(function(e){var t=e.eventName,i=e.once?"once":"on";t&&n._hls["".concat(i)](t,e.callback)})}},{key:"unbindCustomListeners",value:function(){var i=this;this.customListeners.forEach(function(e){var t=e.eventName;t&&i._hls.off(t,e.callback)})}},{key:"_onFragmentParsingMetadata",value:function(e,t){this.trigger(y.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:e,data:t})}},{key:"render",value:function(){return this._ready(),Hr(Vr(s.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState||(this._hls||this._setup(),this._isReadyState=!0,this.trigger(y.PLAYBACK_READY,this.name))}},{key:"_recover",value:function(e,t,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){m.error("hlsjs: failed to recover",{evt:e,data:t}),i.level=b.Levels.FATAL;e=this.createError(i);this.trigger(y.PLAYBACK_ERROR,e),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval(function(){e._onDurationChange(),e._onTimeUpdate()},100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;0<e&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(e){e<0&&(m.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this._startTime,this.el.currentTime=e}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(e){this.trigger(y.PLAYBACK_DVR,e),this.trigger(y.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"_updateSettings",value:function(){this._playbackType===_.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(y.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(e,t){var i,n={code:"".concat(t.type,"_").concat(t.details),description:"".concat(this.name," error: type: ").concat(t.type,", details: ").concat(t.details),raw:t};if(t.response&&(n.description+=", response: ".concat(JSON.stringify(t.response))),t.fatal)if(0<this._recoverAttemptsRemaining)switch(--this._recoverAttemptsRemaining,t.type){case N.ErrorTypes.NETWORK_ERROR:switch(t.details){case N.ErrorDetails.MANIFEST_LOAD_ERROR:case N.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case N.ErrorDetails.MANIFEST_PARSING_ERROR:case N.ErrorDetails.LEVEL_LOAD_ERROR:case N.ErrorDetails.LEVEL_LOAD_TIMEOUT:m.error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),i=this.createError(n),this.trigger(y.PLAYBACK_ERROR,i),this.stop();break;default:m.warn("hlsjs: trying to recover from network error.",{evt:e,data:t}),n.level=b.Levels.WARN,this._hls.startLoad()}break;case N.ErrorTypes.MEDIA_ERROR:m.warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),n.level=b.Levels.WARN,this._recover(e,t,n);break;default:m.error("hlsjs: could not recover from error.",{evt:e,data:t}),i=this.createError(n),this.trigger(y.PLAYBACK_ERROR,i),this.stop()}else m.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:e,data:t}),i=this.createError(n),this.trigger(y.PLAYBACK_ERROR,i),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(t))return m.error("hlsjs: could not load decrypt key.",{evt:e,data:t}),i=this.createError(n),this.trigger(y.PLAYBACK_ERROR,i),void this.stop();n.level=b.Levels.WARN,m.warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}}},{key:"_keyIsDenied",value:function(e){return e.type===N.ErrorTypes.NETWORK_ERROR&&e.details===N.ErrorDetails.KEY_LOAD_ERROR&&e.response&&400<=e.response.code}},{key:"_onTimeUpdate",value:function(){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(y.PLAYBACK_TIMEUPDATE,e,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,Hr(Vr(s.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,i=0;i<this.el.buffered.length;i++)e=[].concat(function(e){if(Array.isArray(e))return Yr(e)}(r=e)||function(){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}()||function(e){if(e){if("string"==typeof e)return Yr(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Yr(e,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);var n={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(y.PLAYBACK_PROGRESS,n,e)}var r}},{key:"play",value:function(){this._hls||this._setup(),this._manifestParsed||this.options.hlsPlayback.preload||this._hls.loadSource(this.options.src),Hr(Vr(s.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(Hr(Vr(s.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),Hr(Vr(s.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(e,t){this._playbackType=t.details.live?_.LIVE:_.VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===_.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map(function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}}),this.trigger(y.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(e,t){this._segmentTargetDuration=t.details.targetduration,this._playlistType=t.details.type||null;var i=!1,n=!1,r=t.details.fragments,a=this._playableRegionStartTime,s=this._playableRegionDuration;if(0!==r.length){if(r[0].rawProgramDateTime&&(this._programDateTime=r[0].rawProgramDateTime),this._playableRegionStartTime!==r[0].start&&(i=!0,this._playableRegionStartTime=r[0].start),i)if(this._localStartTimeCorrelation){var o=this._localStartTimeCorrelation,l=this._now-o.local,o=(o.remote+l)/1e3;o<r[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*r[0].start}:o>a+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(r[0].start,a+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(r[0].start+this._extrapolatedWindowDuration/2)};l=t.details.totalduration;if(this._playbackType===_.LIVE){o=t.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||N.DefaultConfig.liveSyncDurationCount);o<=l?(l-=o,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}l!==this._playableRegionDuration&&(n=!0,this._playableRegionDuration=l);t=r[0].start+l,o=a+s;if(t!==o)if(this._localEndTimeCorrelation){r=this._localEndTimeCorrelation,l=this._now-r.local,a=(r.remote+l)/1e3;t<a?this._localEndTimeCorrelation={local:this._now,remote:1e3*t}:a<t-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(t-this._extrapolatedWindowDuration)}:o<a&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*o})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*t};n&&this._onDurationChange(),i&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(e,t){this.trigger(y.Custom.PLAYBACK_FRAGMENT_CHANGED,t)}},{key:"_onFragmentLoaded",value:function(e,t){this.trigger(y.PLAYBACK_FRAGMENT_LOADED,t)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(y.PLAYBACK_SUBTITLE_AVAILABLE);var e=this._playbackType===_.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(e,t){this.levels.length||this._fillLevels(),this.trigger(y.PLAYBACK_LEVEL_SWITCH_END),this.trigger(y.PLAYBACK_LEVEL_SWITCH,t);var i=this._hls.levels[t.level];i&&(this.highDefinition=720<=i.height||2e3<=i.bitrate/1e3,this.trigger(y.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(y.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:t.level}))}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===_.LIVE}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===_.VOD||this.dvrEnabled}}]),Gr(t,e),Object.defineProperty(t,"prototype",{writable:!1}),s}());return a.canPlay=function(e,t){e=e.split("?")[0].match(/.*\.(.*)$/)||[],e=1<e.length&&"m3u8"===e[1].toLowerCase()||qr(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!N.isSupported()||!e)},Pn.Loader.registerPlayback(a),M(M({},Pn),{},{HLS:a})}();</script><nav class="navbar navbar-expand-lg navbar-expand-xl navbar-dark"><div class="container px-4 px-lg-5" rel="1"><a class="navbar-brand fs-4 fw-bold" id="webname" rel="2"></a> <button class="navbar-toggler" id="navt" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-c" aria-controls="navbar-c" aria-expanded="false" aria-label="Toggle navigation" rel="3"><span class="navbar-toggler-icon" rel="4"></span></button><div class="collapse navbar-collapse" id="navbar-c" rel="5"><ul id="menu" class="navbar-nav me-auto mb-lg-0 ms-lg-4" rel="6"></ul></div></div></nav><section><div class="container mt-3" rel="7"><div class="d-flex no-gutters row" rel="8"><div class="nopadding" rel="9"><div class="alert alert-warning hidden" role="alert" rel="n"><span id="notice" rel="o"></span></div><div class="alert alert-warning" role="alert" rel="a"><div class="hstack float-end" rel="p"><a id="btn-reload" type="button" class="btn btn-success" href="javascript:" onclick="window.location.reload()" rel="b">&#x66F4;&#x6362;&#x8282;&#x70B9;</a> <a id="btn-install" type="button" class="btn btn-success" href="javascript:" target="_blank" rel="c">&#x6DFB;&#x52A0;&#x5230;&#x684C;&#x9762;</a></div><div id="current-node" class="hstack"><div class="caption" rel="d">&#x5F53;&#x524D;&#x8282;&#x70B9;&#xFF1A;</div><div class="spinner-border spinner-border-sm text-success" id="loading" role="status" rel="q"></div><div id="node" class="link" rel="e"></div></div></div></div></div><div id="preload" class="hidden row row-cols-1 row-cols-md-2 row-cols-xl-3" rel="f"></div><div id="content" class="hidden row row-cols-1 row-cols-md-2 row-cols-xl-3" rel="g"></div></div><div class="container mb-3 hidden" rel="h" id="tuicont"><div class="d-flex no-gutters row" rel="i"><div class="nopadding card" rel="j"><h4 rel="k"></h4><iframe src="about:blank" scrolling="yes" allowfullscreen="" rel="l" id="iframe0" name="iframe0"></iframe></div></div></div></section><img src="" class="hidden" id="c" rel="https://d1rul4desjm6a8.cloudfront.net;11;1;" nov="0" pwa="1" jsonp=""><div id="qrcode"></div><div id="custom"></div><iframe src="about:blank" id="iframe1" name="iframe1" class="hidden"></iframe><footer class="bg-classic text-center text-white" id="copyright" rel="m"></footer><script>var a0_0x51be4d=a0_0x2571;function a0_0x2571(t,e){var n=a0_0x67e6();return(a0_0x2571=function(t,e){return n[t-=345]})(t,e)}function a0_0x67e6(){var t=["YoHOVz","ledby=","transi","ols-md","JOrUXt","VICWgZ","IIRBi0"," dropd",'ole="d',"szqUFJ","oswd0r","Lco4ag",'ayer" ',"applic","szmj",'"modal',"n-item","7N2DMG","odal","mobile","isDefa","H/UfY/","YGWgC1","IxRIA1","omElem","HRZmOF","value","U1Gl52","right-","trigge","NTNui8","FQHGvC","fEFWoz","K1l81p","AOIrJl","rCase","A4NGqA","ple.mp","av-ite","r-scre","_scrol","AAAAQH","dQ+BEn","AGUAAL","Sfb3P6","cK5o4w","MAqz1s","button","t01qmj","hYGDbg","n89b29","0Bp99f","<li cl","ainer ","AEyzsW","//////","/LLXhh","NGiJog","/npm/c","R5prgU","","EDI5wG","UQAhPM","uBhG1n","lpromp","/4+u+J","r-c",'"dropd',"aria-h","YBgFA4","Q1Gwwn","_setEs","CgDOA0","J+VGOK","t59JAK","5c7dKX","YXJlAE","zagSLu","Pg7xjY","dCRH2I","H1n0vg","sort"," row-c",'" targ','gle" t',"dg7egb","Gw1Dj1","-borde","nCi/wx","</span","FNwK9p","s/ntd.","empty","MAgpzR","IPAai9","g0beVo","lbarWi","charCo","3h90Wn","Fhihiw","7+FkdU",'t" hre',"u1N1qS","+FACYA","khRUNs","QjxMTQ","2P2+vx","call","Lx+Adk","dding ","ntdtNM","_eleme","own-to","atio-1","rD74vF","ifest.","7zZPtS",'="sche',"8U/dRR","role","IAGHzf","1RUOuu","BP+aRD","ud/yUA","CGaHwe","ekKwQg","mgDALD","KsqK/Q","v+PaIv","MwILf9","functi","TAfwIZ","#navba","pow","//AP//","mentBy","X0Pjm+","Item","6FHepKT"," aria-",'"icon.',"biMBAI","UM6FHS","</a></","gt;&gt","XVCaAv","","x2Owhj","tn-sm ","1Qgs6J","NITTZM","O6x49e","6nMAnh","/Eio3n","ntaine","aIClqi","A8uSbw","I5dEwz","G4ma75","ndSite","eBackd","m_orde","192x19","site_t","div><d","class","ExVYHk","AWzLg/","AMAAAA","BhRUJ/","OArEVE","5alikz","d0kC4y","hidden","UG1xat","http-e","lement","YIWb/r","UAQWRv",'s="mod',".fixed","TFDnMe","/l2G/q","r19qAu","Gg14ax","4unqqV","aria-l","paddin","_setRe",'"navba',"</p></","LZQ3oQ","fOyehv","5hwESg","l4DI5Z","IA9F8/","6/X6pU",'3x2"><',"v><a c","tTarge",'"_blan',"rjBGMF","w alig","DXVT0A","r:#999","right","+cMyMo","BdGsB5","bottom","ypPfyD","before","alog-c","w88j5j","62YHXx","drZB+c","BKRMUj","huYWqH","/t/Ovt","hide.b","AKDdri","Bl7hMe","innerW","ofUmWq","iSuTOs","acemen","pPT374","displa","7W2tne","#tuico","KkQ/xe","AsLL+8","uFs2hs","eader","lable","C8tKXz","wn-tog","m1bmGX","YwrG3x","/kgDEm","n clas","CwGCJ0","text-c","cE8Kfz","X1kC9Y","9/nM4H","custom","iner","ansiti","ws2nif","DGXSUl","APP","iyEheL","-4 col","V4Wm1x","#conte","aria-m","Scroll","s;</sp","gCAauV","dalAle","_addEv","5aNOiF","Gp3QGr","QqA3SL",'ass="s',"PkAzQU","uYPqAN","Ns/VFd","s-cent","3Z+L4x","lA/RZQ","U+CuAP","RzulO9","iODTkz","/Akfo3","j33eVj","nodeTy","handle","g-righ","aLnKgF","hcUjor",'tyle="',"idden",'eos"><',"AOxSgq","CYoAuD","push","llqlfU","MdDuQd","ZTVhq5","index=","btn bt","dkG6MI","uMN//K","gOqM4G",'href="',"-alert","overfl","WWPcAA","tWindo","aAAFym",'dy"></',"D7Shyk","gAMgQ/","dary b","ACo68E","5wa1oy","UOb7B0","span>","Gf+Nmc","appins","AAAoLQ","  ","6ZmwxA","image","romEle","Ox2Rdu","client","TmpgW5","down-i","#webqr","xqA+ig","en__re","odal-m","JUHyBQ","hwdmJt","YRb7IU","7UeG6g","y0CFld","nDurat","<ul","prVaQE","BZUzVx","  </bu","web-ap","pRxCKp","Right","fBfKOw","Trm2K9","SwSOdO","oXiKAI","getIte","2lu3LQ","wDKkKM","Before","/div><","modalP","uuT+wL","AaCil5","#modal","b+87Tu","WBkERw","wcOyrW","K9Mh69","nter","0j+523","#B2842","prompt","-title","<span>","ITzP46","er tex","rYxTAE","EwRZHw","xZo9uY",'enter"','="colo',"hv11t9","M011WT","v84Vr4","LGxx9B","PKnKXE","_menu","backdr","012345","8DIDXa","TooJDq","YGdKJ",'lank"',"oKgNfX","JJDxr4","DggOHM",'pe="bu',"sSkxG/","bq8HAN","AAAAvk","94qrj2","JCdpSV","xsIf8h","kQBAda","al-tit","log-ce","HscgC+","6ST4YG",'itle">','"btn b',"kEEQvU","XVv4EW","RTXS+W","fJOGUI","","66AtVp","pathna","y+oZ2r","ceitPU","zlZnUc","IASNm4","WHx+rE","8yj/mQ"," targe","nO//xr","snDggA","file:/","NE3wl9","length","A06Ew6","/vt+yo",'dby="n',"dXhbzK","OnP0iD","2OrUPn","Ugh8jq","27f53e","play","_detec","-start","m7IJ7/","    <b","0x3S9S","EJxzaZ","l9jnlR","UGPcck","AANIRb","AAAAlw",'vid="v',"disabl","dal-pl","x-icon","kJBLCn",".dropd",'bqr" c',"list","5WIw1C","FoundT","oNJZTG","WQvh++","tabind","tzfHn0","bG9PYd","M6ALVE","vQwYQ","GYWXIo","kciLhB","okgIk+","icon.p","5gEEK1","xHgms8","LGq+wp","Wm66yP","swYXud","ntered","UGMLi/",".activ","atio r","tQpwU","zgDBEK","qrcode","KyxssZ","wtmCXw",'d" id=',"r57vLz","MOeMz1","#copyr","none","5cWsvH","pTCUJA","tTijxy","cVay0S","A5MNL2","1H8J0Z","AxxxMZ","ybwCQx","A1+l/w","qVP+Vc","hRQ7EB","t-titl","031r8B","bUZ0WV","RNE5TI","BVFziH","ChMwGY","F5gAT3","BSCwrw","de2","HERYw/","#fffff","100%","DdNDQ","bIjs4R","ysQOOK",".gif","BtxdJ","QOEf4U","aGMzUX","_nodes","e9KXei","","AwS8us","onLine","deAt","Zo0cPN","!","v clas","</ul><","off","leNzx","meZALJ","KTy02z","<li><a","gNAsAj","/QkuA4","vPi7qA","C9UP/i",'ex="-1',"mxG9Pv","pwa","nlfZzJ","rEHICm","50LC/w","led><s","vBTNRL","dlpHRj","UAtQRz","3xPHLr","vsadlM",'der" r',"SDXE5w","tart","join","CVJB8z","WBRdAS","PBvCUI","></div","media","rc/bY5","   dat","tn-sec","f-cent","getRes","div","_check","#node","OyTdP","_dialo","2WXrKg","rDropd","Mtd06/","!ios","title","sMbcjw","8ICNMF","PpjAAq","Pe8GgS","h1FvUz","em[rel","76ujqd","0JV+JK","0JTfuU","gXn8X4","7SJQFA","iD49QH","payEAj","html","UdLpim","#other","zqocTx","Ddz8VH",'tton" ',"mQZdzZ","qRmqgd","cf86J2","To6cfD","OCGIAc"," class","S7bc0H","5wDA2V","cIbEQj","QLKiLp","6w9k86","#ifram","AP","oxGfA4","e']","80P8/+",'dden="',"u-righ","entDat","-menu","/GhDmd","WaBREo","8WEAA8",'ref="f','" alt=','id="we',"hH02Ih","LGDw9k","files","q9O7nI","_hideM","SON","-1 sma",".min.j","E1eN+I","offset","sG7Zch","fset","d.bs.m","3vqSDn","fromCh","8/jW6P","D86Yzk","qZFS4H","Hlk64U","then",'dule">',".navba","ACp6gQ","Pq4TWO","6uZ5oc",'="dial',"2y99UK",'ass="b',"#prelo","KFvX0a","dispos","JuYVhR",'ss="im',"fU8cux","ype","pyqBGF","  aria","VEVYUz","a7kJLj","LtLz9w","each","nsitio","7KX6Kg","m40tnz","WdWSAc","bgWb8t","bs-tog","debug","buLjAC","bwd6jk","BTywrk","ackdro",'e "',"PLAYBA","link-d","ript","jHPs8O",'false"','tem" r',"Az/Rno","8FmIgv","jDjXjz","regist","9S8AAE","auto","pids","HDzpUB","var fe","localh","QaDKmI","jYyrme","t2wgAA","l-cont","RUAQAA","0jn4pJ","#loadi","localS","WXa24g","U0zUtT","><h4","ZWhGnj","stop",'dal" a',"GBEAat","hv1xk3","5d8MiW","hB4zL4","RjNjeT","2nLua5","T8BE8g",'"Close',"zdivVn","isLand","DebGtZ","<p>","Class","vdmdBg","TJFAlX","//cdn.","_getCo","xUZbk","ent dr","WNJzPB","add","u7WnjO","ader","keyboa","9OV/82","en__ti","q=0.8","></met","OboIgE","gkpPYn","MGAXS7","4HR+aU","scroll","YmUgRm","en__me","HAepQA"," conte","XVeLjJ",'="drop',"_getPa","rWidth","FW1Ws1","7neLET","mB/dzD","x8vsff","LNf86u","xl-3",'miss="',"4L6xQ3","dth","Y2GTrX","GBbuiI","eckCon","userCh","uf8IAM","RgIA0O","-keybo","ZA/0gC","contai",".modal","QuQJCa","1AIDaA","desc","/li>","fQfwD+","round","PV/VAs","click","ugPe0X","ist","E8d0Hv","qwHMR","status","//+VnG","pCX2nZ","Hc68Tw","$heade","eFEMAF","OAUQpm","C13p1K","abXm5A","dQqpNT","tseiOc","Event","OjlID","Z6cW9Z","abcdef","HaOtAk","yODce9","uU3nX9","0pawSO","d+hX/Q","wKoCSs","Z2NGkY",'rame1"',"odw9HQ","hcKSxx","9/xDME","Z9TGmI","HgXzoH","c0j66v",'="true',"fAB+3c","68Kc4w","jZOhhm","ndingC","v><div","","ify","7OJ/rv","iypTdI","KMFXSX","electo","erBack","EACgu4","t-Type","kr7gGR","O1wh5X","0KGgoA","234zDv",'="text','ner" i',"4I/3jL","C7H7gF","QqxL+j","hi4IYK","O9YvsD","dFlYcH","Copyri","gpd3QS","AhxoxJ",'"-1" r',"clappr","Qs0iwH","</but","anbwz9","ener",'id="mo',"arget=","77p85K","class ","Da1eBj","3jzgE7","hasOwn","mhpcGP","qYJr+a","URrWLs",'n="tru',"4U/gAA","androi","video","csS95K","ned","MXy3vB","constr","04cAIP","iVBORw","vXqIBG","jsChzW","BgnnzJ","QR62Wj","NnBiQA","sowAAB","ZWE700","9vycY7","YLrneF","TqY5Tw","RSTlP/","nPI225",'l-xl">',"owoR","RJ4RAA","UmHX1Q","prop","w-cols","<p cla","IyNWhk","G3xheT","GygwNK","yiXoOX","rict","","+Pw1Pp","UNPqDB","showMo","_backd","y2UDAL","09hNSb","setIte","havemo","26nNJz"," imgit",'ole="b',"er-bor","UnnrBq","16TG1G","</a><u","ert-wa","host","a5pkra","boolea","vloIwx","Proper","+sKvXn","-secon",'re"',"c5v0nl","DEDMET","media-","MAQBaT","ponseH","KA9O4b","fGi9M1","dO678t","ect","n4Hl/s","AUL+gI","kBwMDE","wIcHiy","CSAZB6","d0xXNX","NB3mqh","MQxr1l","8AAAAc","7ohbXy","6dCCvC","catch","wxvgG3","ShowCo",'show" ',"UOrLwC","div>","vAQNKj","MgApFq","AoCuNu","P87/b2","XhAHV9","fRedN",">&#263","userAg","fzbL8R","aNA1pf","/a></d","static","OpOJFS","2cij2i","AAnYG9","nKx0DD","ionFro","tLevel","DIIC//","cMNkAO","bsTran","pple-m","mrhIAu","BJEiGD","mMMdgJ","dropTr","sAqg4F","M1cWMy","usathC","WRUp","tDefau","></h4>","719677WsKhyZ","PVItMt","+ACZBA","esvSl","2tZu7+","ing)","domain","AoBonD","BP115d","left","Dw9+ff","rel"," .play","o2wuoO","_remov","gn-sel","GBB+gv","hwdAcD","source","Tfhhp","  <div","TG+ecg","T7kXcv","SBYpAR","+DRNro","1otHCO","bar-me","FsyGam","Nl8bOM","string","4H/y6n","und!","Pi509q","slice","protot","ript:;","modalA","Gygji+","erHS1A"," d-md-","ZQAwNi",'ref="','rel="m',"OkpNjK","9vfxS6","gg+P/U","n78meN",'quiv="',"pQsAzv","ZioWLo","shuffl","i0rusM","lert","eD7kc2","hcXqss","#custo","load s","arCode","8BYNIZ","TRANSI","1AWfHy","VOpBL","2MTKsG","QxoduX","HYKVUu","get","odyxmM",'d="vid',"v4Ap9D","","1YII0C","ropdow","OAHDK3","Qy5tTq","UZyN/0","uwsJtN","dary s","shift","l clas","Z0K4k4","yTCj0w","Jh71lZ","8KZNfK","VqYWwD","1elMvl","IGH+Mn",'se" da',"r-erro","t-Secu","match","FoundM","dal-bo","5aIlui","ACAsjO","BB4Y7r","gRvisC","AxWeSw","B2qRNq","fQLgsE","KovHM5","GBQgXO","cl93pC","i8st+5","sectio","ntElem","dialog","Q08B8G","_getMe","fKMnXR","Xzmp2S","FwBIQ1","Pho4ju","IbM10J","XNejgY","xNRiLP","top","n0PG+5","Hpn3C8","Events","DIPH8M","2+slz/","1u/Mgl","#qrcod","HCdfew","rop","m_data","zm4d30","Pal5yK","TYguMq","ACqg0D",'down"]',"<a cla","76nHsh",'utton"',"schedu","1uU/SL","v+nOGg","bo/Bks","0ohAGh","Update","UAnfy","tdfyX","-foote","https:","Mgs8GX","TwxYl9","dKaYE2","owAmeN","tAgRpS","_getSc",'lass="',"","oVg1yr",".bs.mo","g6S4oC","zvS/u8","tle","T0tNBP","/3pSfQ",'-lg" t',"iv cla","50 mb-","wsYkxT","gRight","A/CdOU",'mb-3">',"Y3k1am","XB+AeW","PGqGVW","TION_E","uiop","Attrib","6N0eH3","nYBCZs","5u0VEL","5JbrzR","Plef2X","Conten","8ChkA1","Height","hDck/l","4exrl8","hide","50px",'"text-','lse" a',"ratio-","FixOgc","okPnAj","AQrA3v","Rs3mIF","rkbKfh","L9ZyKH","rkEyly","5/TgCr","ria-hi","zR5VDG","vsEKcG","p6QUGu","Active","gGZpcf","BCAAMI","4njiBF","INfZUw","G1LN+7","n.dism","Modal ","QfE4E4","li>",'lank">',"target",'none">','tatic"',"QURdHc","4H/quw","fycDQO","J8o4We","7iGzwz","","HwD2mn","AZbQ3D","/xGMja","ent","iframe",'" but ',"dal-di","4eAB2b",'t">',"ion","_isBod","dLmTRK","RM9bV0","0QGmgt","XdpEO","ikgXAw","2QInAs","6789","9AfoTs","LeAI27","egurl","videos","Gk3IOb","Byrp+i","m, .is","OFeeyN",'al"]',"tton>","P3BiMO","olsJy1","ZnTnc","5S7iF7","$foote","doNNIK","U4OfQm","80TUl6","CxIB0t","m30EJI","Sjivna","ios","AAANSU","p-titl","a =","open","kfF55P","B3wEQN","c2S9o5","src","Fx9/7e","split","width","MY8ODd",'blank"',"EUV2S0","g0av+K","YUhSMG","EAJYhj","fyeA1/","XVWizS","ADATA","PWh7ji","rqQEGS","SFAODQ","ntdtv","19It69","lyZXdv","een__c","bDBMbk","KmEPs6","JUl0X5","seMeiU","q1aLfb","meta[n","90vLOo","wu0bdE","ssage","j+abVa","RjLBs","cAaFIA","llNEPg","0yC2M2","HaZ3HV","nfig","P8h56U","JY9A/E","m/2Wzu","D5dnJX","er ali","x/kaVh","mmwv8u","PSdQWp","own-it","r not ","tionen","Player","HGJMZl","MBuMyC","e7FF6Y","-playe","AaxW4G","yOverf","getAtt","K1jHfW","VfcE8P","AF5ILD","cMCBzn","rMVFqL","6I0ZrQ","DpAGPA","png","p8qzFc","DQ4dGc","block","u+rOkL","PTqytM",'nu"></',"b_data","c2++v7","webm","L59JOW","found!","onTUcX","oSlj2h","expect","VDAMlM","8u1ta1","8/f/6C","getSel","allbac","log","WldGem","kJdDXp","iiItV","SGbz30","1CoMr4","druAoj","eeHAEr","fig","3V79+X","K62JTf","TqvImA",'n">',"MCmJQW","Data","je543J","CK_LOA","hmsz3+","sERBCy","uXWAcw","Ps0B8p","QkkCnD","bsgUN+","tkwCcj","kFV4rq",'ll">',"fuE+tD","f3/PNO","tion-d","_showE","#notic","ip/5xl","-label","7mt/1o","Dl49jl","ing bt","YhBAsH","VGeDF","jJxIOJ","tn btn","B1ZzNu","8PZKQE","++bBrM","n a","v8YJ9J","nO1lPV","9omATx","a-back","JVMAJh","2Ml9rw"," style","n0yf2A","ute","playli","lowing","nq5mCg","ajMrHB","+1ZyZd","IPzy1d","szcach","Kkh43f","lientR","OkDNya","tOy3CB","n aria","vN3d3d","rollba","EKOQDK","><div ","VTnsoU","j/BREM","DMQmcz","t-cent","jsonp","d-none","uySAb4","KTQnWU","+VHoYK","CAEr4H","margin",'ole="s','ype="b',"-hidde","text","balbKH","_showB","68y4gV","header","typeCh","FDQSvA",'" role',"rg4qEI","tui","iZIueG","OsqjZ",'ss="ro',"zDhc","vkGAW2","8+oCe9","<a tar","QblcF0","M+Pi/i","AIBA3k","ub2PMg","BAmxES","y/W6DU","MEw9Tw","2IpUDL",'e"></s',"[data-","R0YwWV","sTbW9v","/TRan5","CVpl5e","dQ6/k7","cBUFMs","T3FTc3","pan cl","enu dr","DJD3BX","TlKq/F","-cols-","796tV9","cuXiy","nrUMDF","g2qyAi","fz61+A","MI4d/A","2Lw9LF","abelle","aSCZyH","getBou","R2Fcu6","196540CkRhlm","+r19UD","tpkeAD","B8OmX3","4qdbEd","hasCla"," disab","b0vAok",'down">',"  <but","ua1Ebi","AJVmR9","1b9rP8","gVielT","8af9cm","HzQH1n","which","create","0ayHEN","gXABzn","CVZhM5",'d="btn',"r-cont","protoc","ark st","AQCHcp","DSPl34","Width","nstall","Fullsc","RrzrgH","uClAB7","iZYR3c","class=","IvMbEg","0Q7Y+w","kKHFco","zcMaHC","uestHe","test","iiLbz2","z9a/3/","ions","2QcgRB","css","oA4ynY","dEVYdF","lWAgoN","329852IKKRRj","indexO","dT3Xpi","","oIsBgD","e8rBLf","6p7FJC","json","_isTra","c6breH","hOmdY7","s/cLeQ","gg==","ADRNyS","YXRpb2","ul>","cis8El","-heade","AAaNDb","charAt","ation","img sr","9TAAAA","jqdV32","","xDheSI","0b4B3p","pT6NeF","0x0Jt7","fw-bol","JHAnBN","-touch","gBHgI","/KECIH","TEbiSq",'drop="',"ljHTqx","dismis","EYmNvs","4hMv3t","bovLKM","xl-4","SI168I","JQE0yz","addCla","kWdcUE","Z4cGzu","anifes","aQOMIK","ght &c","ha7VbJ","5ErkJg","tMDktU","DIZVYt","QRCode","QixO1V","</","er-err","queryS","QHTmN8","FYzHLZ","iBYqeL","Node","DCRGFU","cWvxCS","73R6j4","","bfoPwL","FLdJXR","RgEvZ2","4fw7ca","JV3Z7D","toUppe","G7e/kn","yX0YSo",'s="clo',"gP75l5",'="moda',"JlFhwt","nT+Iom","CNboB5","RzCtnF","utopX8","classL","+2Msn6","orient","Lb9pAA","pq4IaI","TcudA6","o2mLJh","hlbj6N","ahH+YQ","vSjrNK","Rv1IL/","ight","RU5Erk","A7PU9y","w4v2GG",'get="_',"VfohVJ","CVIjYN","vUrvw3","1imsZg","uVXIhx","WAhBM8","jFbJ8w","BrDdlp","ton cl","nxLwGQ","vOgWP","FZ5UWv","l-dial","c9Md45","Q5ANCh","</di","rAdgPp","wWxH+M","attr","F9G4Bj","gw3+KQ","DNJUA0","3dnlQw","T_NODE","IcmFNp",'le" id',"EESMHn",", .sti","HfnXU2","2XcUIk","/MvnjJ","ajax","LQBfXM","zhZgPm","kXs6i4","ided t","ame='a","player","p9TCTF","GCif1W","lwTwLX","video/",'" prov',"+iGxu4","ZYj5w3","U3rKhd","image/","4Udkg0","Bt/mbK","18oASR","lFSiMo","4MmCFl","wKPp4G","GUQmoe","ation/","rAll","tcEEDn","8dyhUNQ","66MVv2","*,*/*;","jDooUs","file","kHhY/F","DBxlxF","p5XH9Q","ZOMQ+5","EsPpH/","nEClKm","ZFebXl","#nov","cGfkd6","entere","l-play",'iner">',"1206cHQCxa","o8bRMW","k/oLzC","Y4dkEA","0S+ANJ","Cwqs7R","tJ8BQC","IyMHZa",'el="',"4HMfaT","show","ABZ0RV","MBTAZW","0TwPvh","cjxezh","ZjblJv","RW9aKj","7FIAvi","hqDnj7","_reset","edia","4555vtmIYM","n+Orpy","jMw6m6","substr","-end","muJMmc","AAug16","getEle","04MvtF",'ialog"',"mHT48J","s3Fenn","XGoXA2","sUVhCV","XObjec","ment","lofOWO","Ng4Zwi","Bo1rEt",'vid" i',"l5eXhY","sCqOh/","dH9k1x",'-tv" d',"uqjibb","m1Y/74","d moda","nt a.v","SwJYTf","3xj8Lz","/span>","+RDdBO","Yf34bt","96pMms","tType","w/wc",'lose">',"mousel","BYLqEC","7PpbH6","hadow ","n-sm s",'ow" id',"HrPS97","jzgAJ3","elemen","name","DqmsLB","TNkrU","body r","h0U29m","ZJSEhm","79/3+F","nov","click.","L1DwvE",'er" id',"XXGH5Q","nA3Rud",'og" ',"8Q9B5e","><",'" data',"zZOYnj",'modal"',"EBGCH3","opagat","kj3vO6","kzApiU","mousee","8YxD9+","nmqQb2","3Bijdc","rity-P","TEaJkz","GoBFlb","et2rB6","NotFou","ajQgNH","PISFOO","iss.bs","iv>","2mb9+O","data",": Opti","C8TxMC","q2ad8W","log mo","7LBrjo","ul_pro",'em"><d',"k10ghI","ceFocu","ShowLo","WTSVGh","685116RaozEE","/dist/","bnY549","avbarD","jkTGN","ggNKJq",""," href=","eTl6ZW","V3b3Jr","m3u8","-3 nop","    <d","gif","ABAAAA","WYMJgV","uEerQV","ZUMfSi","oks30A","F9HJBy","","Iclhpg",'"close',"ZnIAch","ssage,","JI9gNk","Q95iEB","site","href","opdown",'"><lin',"remove","Ty3IQ6","alert","bs.mod","IA8ooP",'k">',"</ul>","bVbNT","S8Ieej","rentFr","N+hyAL","tG/+bQ","+ff8hw","cJKjQc","kk4ARQ","al-dia","M9z8OR","webqr","K3ELCm","ert al","iHEMDk","+q9X+1","JLBXhz","retche","wMXj2A","5qG/Jp","v4yCVw","UFB3Jn","caches","oice","R749TR","wztRs","eTrans","4z8MGA","ainer","CuwS8T","0ZBIYd","gtHZA","VqYjIw","Xs8DX8","sition","hash",'s="dro',"16TFdG","BUBkK4","v8Lwio","lappr@","ative;","vrESLb","ANQlmk","body","0+c/P0","/svAHA","zMiL1c","tDialo","core",'f="man',"A+UDH5","owY","object","<a ","caVUG3","Qw6eil","grade-","TjZlbV","HEXJ4W","FhuJov","SYPt2d","koCRn","load","+3fCYE","mEleme","type","option","-6 ","1C3qeC","kMtAAq","1PfOWx","mszeVZ","f3ZmDq","rTkOR7","adding","one","Ooirnn","fade","rjLalw","rPESPJ","getTra","ation-","iss","AABJRU","modal",'et="_b',"classN","deFUCG","LXLMzM","F1d47Q","dMEmvQ","n0cEZw","vented","yILrc","wUyCBD","72hofF","#webna","floor","D64zGw","-right","8JbbQA","wAKp3S","lWZsCB",'" clas',"IFtNLN","oL/e3D","ure","xyKM/C","gLeft","getReg","rning ","AQCAMA","Ontiuy",'png">','"></di',"ed_dat","GAUz9U","foW4fG","ABx0RV","modal=","DDZdLP","IAhyCI","qoav9/","MeLE6g","dropup","3sx5Bz","docume","ments","3pCIAV","UATUOb","vr.net","RpjEyi","GABUIt","arget","A0aeql","s.moda","tainer","H3Npqj",'t" tab',"D9cIff","BAD1yD","v2lmMq","8wMi8y","1OTk3k","FRpxDM","<b","FxnSIB","/8vVUZ","+kDJdz","+lEGVx","stopPr","X3gbwp","FMdWO","hEUgAA","/xc8Mn","itle","yr2elY","row ro","l-aler","Frp0+n","eTl6TX","F1oB86","zSsk29","gFa58H","news","ribute","GODpc","script",'ank" h',"mcdjYU","E/wnh+","modal ","Oa1kqd","DQlsM","jL8y9L","Elemen","Yudd6C","vid","TdNi9E","utton ","T+8SJU","$body","fve5zE","style","XfXZzq","PmDwba","CqM3CQ","uTJzMa","smiss","hThrW",'et="if',"_setSc","undefi","pan></","W+qOsn","IrFzRh","_confi","Hy67wH","FyIE29","capeEv","d-link","pRFSMw","WGlO4E","eWorke","X4uz3z","eRPJvz","_adjus","label=","entLis","toggle","CIBj+A","kCzUBv","er-con","KYnu7P","uNjdWY","RyMMQ5","aQ4cqy","T2y9Xg","Jyq87c","-dialo","3aG510","PPDWNP",'b-3">',"/vEstM","_enfor","w1AAAA","qwerty","8Mfd3b","v><p>","X7N+KY","ode","-scrol","02izpn","Jr64bv","5vnGEF","oA0gDl","</bu","/rlyGI","gJAOhQ","5KSURB","Child","rx3cE1","fc7Tmi","    <s","MBmOio","AKwmpb","EQIoCv","9rY1n5","emulat","XlBmzD","dropdo","modal-","seek","evente","hZZ/Ng","+NmdeY","show.b","1+/AAA","FgcGir","NMlAc+","ADQehV",'ss="mo',"mbecPR","OjFpiC","DAcjyk","r2GW7G","ZMUGcF","<link ","KAUisN","eFvFrK","torage","4gVGlt","7FEhnk","t5ZLBz"," data-",'type="',"","ntList",'est" t',"<div c","_ignor","7ipJYd","rUYHO9","e7yyX9","gXAuKZ","YP62lR","Ly1t7t","    </",' vid" ',"u9bVY4","CJIigB","/jKEEY","-conta","iGTICn","UKBCAU","WnbgIw","ChbqWm","dal","ZRSiAB","preven","P</a><",">&time","KfrDMu","moused","insecu","jsdeli","zJjkgE","cky-to","ORDMwI","vnd.ap","replac","0Xd/hl","QICAjb","ost","ALEgAA","cyBDUz","WneXXp","shown.","EOIWYp","zmW5q7","gsxX41","Xv+51z",'s="vid',"nodes","kxaGND","-2 row","random","u/eecA","conten","own-me","IG4Rfb","KCTTNO","6rfhSJ","closes","ght","#navt","url","mp4","height","O1ZcmV","aTz8R/","ClQsQ6","aQByZJ","pHi2vi","active","_getPl","XUV9XG","B0tKnL","fDatx",'alse" ',"150296ZLAEwY","wOw8HB","xRAmeo","  </di","ratio ","gNb7YJ","c3zast","dDtaSU","YB/ofl","Hg8fnd","gcQABK","DYb3+I","zY1Dbi","Pdsu1y","18cz5q","owS014","P+W3Rl","QIgB/R","top-st","ame","addEve","nFZr9A","ebk/O+","reflow","zpcbOa","#menu","tkmpHt","ULVD1J","R3QsWr","sndTSG","o2YhQ4","ifufTs","vnQ3vy","ogerP","dZvuhK","servic","d/L4Sv","9BJeTl",'="nopa',"I96h","</div>","S5OkxM","XR0D3I","7cnlfJ","5aCwAW","itRLOM","SndiUq","owYUdW","idI1t6","PNeFc","getCur","fm5qEf","upVCw",'ass="m',"-3 row","RPzc3M","E0dctS","_isSho","uf5PxT","/cTDaH","iSs8b5","TZ7Nfv","SFlzAA","RBCoT",'6x9">',"rRa5B/","getFul","has","$title","HHasx9","kuMjMI","AeMEyn","an|str","Top","rDAC8b","h0Q3Jl","ri2QUY","xSEzdL","YchNgq","h9GRMl","ILMIcZ","append",'k" hre',"yfEkjF","extend",'nt="up',"b7Va23","mimeTy","ultPre","611PU8","utY2LN","RceJbI","toStri","QQZG5n",'rd="fa',"1OSWkD","xwedbH","Xh0nEj","gAEP5X","1661946aTdzdW","PiUdvv","KfFJkM","      ",'h-100"',"SHhiJ1","A3NCSV",'ard="f',"data-t","53Wkhr","positi","","<","v-link","6+QIns","ropCli","FZjPLy","+gRtBy","IEZpcm","eval","v333kh","p-1 mb","afBJOq","4BwCwR","1bne8q","7zo93v","FNFfI","OcAlEA","6+9vFY","29xvnH","8aDUUW","x4zAd4","717ILW","javasc","-decor","E+LHFI","postMe","03aSDG","ton ty","Yb++Ev","parseJ","ading",'bel="C',"links","NvZnR3","YzI5dQ",'e">&ti',"sizeEv","AABlAp","ig3YdC","c2xFu1","IQB7gi","Hz9GFw","Mg33yJ","b_orde","elay",'"apple',"or-scr","CILYDk","a83jBH","ning","SSAjMI",' id="',"bar","AOhOqc","0AAiTV","QKtcAv","egt9ZT","6Jt0Xg","jR+j4+","IVzaPk","GwbWrJ","rentTi","istrat","ASVfsu","0PkrSk","own-co","gA6Wt3","J7Vtl7","gfXPu","idden=","errCal","xYiQxW","parent","Aot1lC","m8wEKK","scsB+K","DtoDNZ","jcfKl9","RDMHlM","kH8hz8","BMhDNS","50AJXS","gOfbAh","zWH8e5","wn-men","trim","X7SWhS","5f1T8v","-body","DbQGKF","ZnFp+C","IABBuP","ZLFrSO","eTfEJR","ntent","use st","rwvecr","EKDM6U","3Q64x4",'ader">',"DACAMA","whgFNU",'json">',"AAgMgC","P/GQCr","dal sh","PWA","/div>","UIGQkQ",'"true"',";</a>","itionE","U6zaZA","T1Jn7Z","a7XLeo","0xTLX1","+A1Ij2","top-en","/cHIQg","FqPAoS","RyCMaq","focus","OvTBam","apply","/video","put","CHh7ub","r><a h","_win","talled","LZKXdm","#00000","rXjtuA","dy1KiQ","Pu6+jw","OCosPg","2nrSqV","zIGMV","  <spa","kFSibW","not fo","Be1Gr3","++wY9q","NnfrtF","9V4OxV","aaYYud","Wmlann","po30o7","RblPX3","xl-5","zc3dS7","!andro","dHdhcm","TIS23X","parse","hbD2KO","wAAwhW","focusi",'ss="al',".playe","head","-dismi","5rl3R0","myTMA1","Xz8InZ","it-pri","TGZB/Z","ysvRu6","teners","AlmKcn","JCZ94y","origin","ZGqaKn","FoundS","title_","kw/Sh/","2Jnpso","W5gqbS","_conta","drkK0a",'menu" ',"nFkYAX","http:/","","(boole","XVAgE3","4HurGf","/image","lJgTkr","OEbHWj","Yvc3EE","OnIyo4","XsawXB","5SVP7U","IpiXV","MbYRax","a5Ox0k","m4OA6f","Pzb4Cm","dropri","reen","dal-fo","Adjust","site_u","_trigg","q+ou5Q","ePPRQt","setAtt","9uBI18"," btn-s","ytHTU2","YIjCNF","R277Hr","mouseu","ucvnKI","clear","/QnHTm","HxuUxd","ZkIu4w","n724oy","layer","OJ+dPf","concat","vfXwj","10DhWVYa","ondary","/gP3ZA","a-expa","AJV3k9","avicon","ZsjIVc"];return(a0_0x67e6=function(){return t})()}function showModalPlayer(t){var a=a0_0x51be4d;if(window[a(389)+"layer"])window[a(389)+a(2530)][a(466)](t);else{var i=a(1137)+a(745)+a(2155)+a(1980)+a(2599)+a(1889)+"latest"+a(1813)+a(862)+a(654)+"s",r=null,o=null,s=null,l=null,c=0,d="",e=null,n=null,u=null,f=null,h=null,v=null,A=null,p={isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i[a(1514)](navigator[a(969)+a(1216)]),isLandscape:90==window[a(1608)+a(1543)]};if(g=[a(2129)+a(1144)+a(2021)+a(959)+a(867)+a(479)+a(2553)+a(489)+a(566)+a(1432)+a(672)+a(1776),a(588)+a(1389)+a(1558)+"static"+a(1779)+a(786)+a(2306)+a(2199)+"aria-h"+a(2379)+a(2419)+" aria-"+a(1969)+'"true">',"   <di"+a(555)+a(2720)+"al-dia"+a(1804)+a(1219)+a(2752)+a(1693)+a(1743)+a(899),"      "+a(1014)+" class"+a(1600)+a(719)+a(748)+a(1841)+a(2142)+a(1695),a(2302)+a(2302)+a(2129)+a(1144)+a(2101)+a(1429)+'">',a(2302)+a(2302)+"    <s"+a(1459)+'ass="mask"><'+a(1747),a(2302)+"      "+a(2093)+a(1459)+a(2253)+a(366)+a(1460)+a(1841)+'">',a(2302)+a(2302)+a(2302)+a(1484)+a(1630)+a(674)+a(1381)+a(934)+a(347)+a(2689)+a(2100)+a(2776)+a(2625)+'ype="b'+a(1127)+" data-toggle"+a(768)+a(1483)+a(2086)+a(1240),a(2302)+a(2302)+a(2302)+"  <ul "+a(1508)+a(2608)+"own-me"+a(1328)+a(1538),a(2302)+a(2302)+"    </span>",a(2302)+"      "+a(2093)+a(1459)+'ass="modal-t'+a(437)+"</span>",a(2302)+a(2302)+a(470)+a(2029)+a(2125)+a(2588)+'" clas'+a(1598)+a(1080)+"ta-dis"+a(777)+a(1781)+a(2680)+a(2057)+a(737)+'">',a(2302)+a(2302)+a(2302)+a(2448)+a(1406)+a(1424)+a(877)+a(2345)+"mes;</"+a(351),a(2302)+a(2302)+"    </"+a(2588)+">","      "+a(2302)+"</div>",a(2302)+a(2302)+a(2129)+a(1144)+a(2101)+a(1766)+a(506)+a(2654)+a(2264),"      "+a(2302)+a(1824)+a(1154)+a(1437)+a(2743)+a(2557)+a(2809)+a(1300)+a(1009)+a(590)+a(404)+a(1414)+a(1773)+a(1600)+a(1694)+a(2062)+a(1986)+'">',a(2302)+a(2302)+a(2302)+a(1014)+a(1410)+a(1508)+'"spinn'+a(923)+a(578)+a(1422)+'tatus" aria-'+a(2714)+a(831)+a(1964)+a(2078)+"..."+a(2731)+a(961),a(2302)+a(2302)+a(2137)+a(961),a(2302)+a(2302)+a(2240),a(2302)+a(2203)+"v>","    </"+a(961),"</div>"][a(581)](""),0==$(a(392)+"-player")[a(457)]&&$(a(1893))[a(2281)](g),a(2042)+"ned"==typeof Modal)throw a(1200)+a(870)+a(2450)+a(1025);var g=document[a(1724)+a(2676)+"Id"](a(2101)+a(1659));if(!g)throw a(392)+a(1311)+a(1305)+a(1333);r=new Modal(g,{keyboard:!1}),e=$(a(789)+a(1540)+"r",g),n=$(a(789)+a(401),g),u=$(a(789)+a(2069)+"g",g),f=$(a(789)+a(640),g),h=$(".dropd"+a(2179)+"nu",f),u.bind({mousemove:function(){x()},click:function(){x()},touch:function(){x()}}),g[a(2220)+"ntList"+a(866)](a(2759)+a(1985)+"l",function(t){o&&o[a(728)](),m()}),y(t),window[a(389)+a(2530)]={play:y}}function x(){d&&(n.text(d),e.show(),A&&clearTimeout(A),A=setTimeout(function(){clearTimeout(A),A=null,m()},3e3))}function m(){e[a(1176)]()}function w(t){var e=a;$(e(392)+e(1311)+e(1497)+e(1877)).html(e(905)+'ss="text-danger">'+t+"</p>")}function b(){var n=a,t=$(n(392)+n(1311)+n(1497)+n(1877));0==t[n(457)]&&w(n(392)+n(1311)+n(1497)+n(2594)+n(2450)+n(1025)),t[n(1843)+n(742)]()[n(2633)](),o=new(Clappr[n(1307)])({parentId:n(392)+n(1311)+n(1497)+n(1877),width:n(539),height:n(539),autoPlay:!0,preload:"metadata",maxBufferLength:30,baseUrl:i[n(2160)+"e"](/\/[^\/]+$/,""),disableVideoTagContextMenu:!0,disableErrorScreen:!1,exitFullscreenOnEnd:!1,events:{onReady:function(){var t=n;15<c&&o?o.core[t(2194)+"Playback"].once(Clappr[t(1112)][t(700)+t(1358)+t(937)+t(1272)],function(){o[t(2102)](c)}):p.isMobile&&p[t(739)+"scape"]&&o&&!o[t(1898)].isFullscreen()&&o[t(1898)][t(2059)+t(1504)+t(2510)]()},onError:function(t){var e=n;e(540)===e(2233)?(_0x2deeee=_0x5d3734.href.replace(/#.*$/,""),_0x1498eb&&(_0x465f03+="#nov")):(15<(c=o[e(2250)+e(2371)+"me"]())&&(c-=3),!function(){var t=a;return s[t(649)]&&s[t(649)][t(457)]>l+1&&_(l+1)}()&&($(e(2469)+e(1081)+e(2580)+e(755)+"tle")[e(615)](e(2687)+e(549)),$(".playe"+e(1081)+e(2580)+e(764)+e(1836)+e(1006)+e(1580)+e(2356)+e(1279)+e(2080))[e(1843)](),$(e(2469)+e(1081)+e(2580)+e(365)+e(1050)+"vg")[e(1519)]({width:e(1177),height:e(1177)})))},onEnded:function(){!function(){var t=a;s[t(1395)+"st"]&&s[t(1395)+"st"].length>l+1&&_(l+1)}()}}})}function _(t){var e=a,n=null;if(s[e(1683)])n=s[e(1683)],d=o.options[e(601)];else if(s[e(649)]&&s[e(649)][e(457)]>t)n=s[e(649)][t],d=o[e(1916)+"s"].title;else{if(!(s[e(1395)+"st"]&&s[e(1395)+"st"][e(457)]>t))return!1;n=s[e(1395)+"st"][t][e(1683)];var i=s[e(1395)+"st"][t][e(601)];d=s[e(601)]+(i?" -- "+i:""),$(e(505)+"e",h)[e(1843)+"Class"](e(2194)),$(e(482)+e(1304)+e(607)+'="'+t+'"]',h)[e(1567)+"ss"](e(2194))}return x(),l=t,i=n[e(1083)](/^([^#]+)#(\d+)$/),c=i?(n=i[1],parseInt(i[2])):0,o[e(1912)](n,s[e(2287)+"pe"]),!0}function y(t){var e=a;if(l=0,(s=t)[e(2287)+"pe"]=s[e(2287)+"pe"]||function(t){var e=a;switch(t){case e(2187):return e(1663)+e(2187);case e(1331):return e(1663)+"webm";case"m3u8":return e(2554)+e(1676)+e(2159)+e(2578)+e(1233);default:return e(1663)+e(2187)}}(s[e(1915)])||e(1663)+e(2187),s[e(1683)])s.files=null,s[e(1395)+"st"]=null;else if(s[e(649)]&&0<s.files[e(457)])s[e(1395)+"st"]=null;else{if(!(s[e(1395)+"st"]&&0<s.playlist[e(457)]))return!1;s[e(649)]=null}if(function(){var i=a;if(h[i(2633)](),s[i(1395)+"st"]){var r=[];if($[i(687)](s[i(1395)+"st"],function(t,e){var n=i;r[n(2827)](n(561)+" class"+n(768)+n(362)+n(705)+n(1704)+t+'">'+e[n(601)]+"</a></"+n(1202))}),h[i(615)](r[i(581)]("")),f[i(1706)](),window.Dropdown&&!v)if("Nyflh"!==i(1765)){var t=$("[data-"+i(2059)+i(768)+i(1124),f)[i(1059)](0);v=new Dropdown(t,{keyboard:!1})}else _0x1a40cf=_0x1fcc65[i(1640)](i(1005)),_0x55d049&&_0xc36673[i(1083)](/^https?:\/\//)?(_0x22fa3d=_0x180f61,_0x29d244[i(1425)](_0x9f3852)):_0xbfabdf&&"/"==_0x5b876b[i(1720)](0,1)?(_0x4b9529=_0x5a61e5+_0x29e3a4,_0x4cc4a1[i(1425)](_0x4e83fe)):_0x54e2fe=_0x50ee13?_0x4a6452+i(2694):_0x58a989+i(2004);$(i(482)+i(1304)+"em",h).on("click",function(){var t=i;if("zVfhE"===t(2263)){var e=_0x2749bf(_0x253956[t(2186)]);_0x2eca03[t(486)+"ui"]?_0x395655[t(486)+"ui"](e):(_0x2a01e7("h4",_0x2e3803)[t(615)](_0x2fc174[t(1763)]),_0x135f9f[t(1260)]=e,_0x50fe91[t(1843)+t(742)](t(2714)))}else _(parseInt($(this)[t(1640)](t(1005))))})}else f[i(1176)]()}(),!r)throw"modal "+e(2450)+e(1025);if(r.show(),!s.isUncss){var n={title:s[e(601)]||"",mimeType:s[e(2287)+"pe"],poster:s[e(357)]||""};!function(t){var e=a;e(2042)+e(882)==typeof Clappr?$[e(1653)]({url:i,dataType:e(2017),success:function(){b(),t()},error:function(){var t=e;if(t(1013)===t(1134))return _0x42faae["fromCh"+t(1051)]((_0x56f9a1<="Z"?90:122)>=(_0x2c7728=_0x11f290["charCo"+t(552)](0)+13)?_0x2d32e6:_0x27d023-26);w(t(2126)+t(1063)+t(554))}}):(o||b(),t())}(function(){o["config"+e(1956)](n),_(0)})}}}function showModalAlert(t,e,n){var i=a0_0x51be4d;if(window[i(1030)+i(1046)])o=window[i(1030)+i(1046)];else if("gqmpV"!==i(1345)){var r=document[i(1724)+i(2676)+"Id"]("modal-"+i(1845));if(!r){var a=["    <d"+i(1154)+'ss="mo'+i(2415)+i(1759)+'="moda'+i(2008)+i(1988)+i(2831)+i(861)+i(2549)+i(1726)+" ","      "+i(683)+i(1374)+i(2542)+i(2556)+i(2837)+i(401)+i(1779)+'-backdrop="s'+i(1206)+" data-"+i(753)+i(2294)+i(1179)+i(1189)+i(637)+'true" aria-modal="true">',i(2302)+i(1014)+i(626)+'="moda'+i(1634)+"og mod"+i(1858)+i(434)+i(503)+'">',i(2302)+i(2302)+i(2129)+i(1144)+i(2101)+i(2178)+i(1221),i(2302)+"      "+i(1824)+i(1154)+i(2111)+"dal-he"+i(2409),i(2302)+i(2302)+i(2302)+"  <spa"+i(2780)+i(2720)+i(433)+i(1647)+i(1600)+i(2008)+i(528)+i(1450)+"pan>","      "+i(2302)+i(2302)+i(1484)+i(2337)+i(425)+i(620)+"class="+i(1834)+i(1779)+i(2471)+i(2111)+i(729)+"ria-la"+i(2341)+i(1753),"      "+i(2302)+i(2302)+i(2302)+"<span "+i(2609)+'idden="true"'+i(2151)+i(2798)+"an>",i(2302)+i(2302)+i(2302)+i(376)+i(1240),i(2302)+"      "+i(2137)+"div>",i(2302)+"      "+i(1824)+i(1154)+i(2111)+i(1085)+i(2842)+"div>",i(2302)+i(2302)+i(1824)+"iv cla"+i(2111)+i(2511)+'oter">',i(2302)+i(2302)+"      "+i(1484)+i(2337)+'pe="bu'+i(620)+i(1508)+i(438)+i(589)+i(2535)+i(1779)+i(2471)+i(2111)+'dal">'+i(864)+"ton>",i(2302)+i(2302)+i(2137)+"div>",i(2302)+"      </div>","        </div>",i(2137)+i(961)][i(581)]("");$(i(1893)).append(a),r=document[i(1724)+i(2676)+"Id"](i(2101)+"alert")}var o=new Modal(r,{keyboard:!1});o.$title=$(i(789)+"-title",r),o[i(2031)]=$(i(789)+i(2398),r),o[i(806)+"r"]=$(".modal"+i(1540)+"r",r),o[i(1245)+"r"]=$(i(789)+i(1136)+"r",r),window[i(1030)+i(1046)]=o}else _0x292b8b[i(2827)](_0x48cb97({title:_0x51540d[i(2704)+i(2005)],title_url:_0x1e57ee[i(2513)+"rl"],list:_0x2847c4(_0x155de5[i(1425)])})),delete _0x541760[i(2014)][_0x5a283b];t?o[i(806)+"r"][i(1706)]():o.$header[i(1176)](),n?o.$footer[i(1706)]():o[i(1245)+"r"][i(1176)](),o[i(2268)][i(615)](t),o[i(2031)][i(615)](e),o[i(1706)]()}(function(t,e){for(var n=a0_0x2571,i=a0_0x67e6();;)try{if(248759==-parseInt(n(2200))/1+-parseInt(n(1475))/2*(parseInt(n(2679))/3)+parseInt(n(1523))/4+parseInt(n(1717))/5*(parseInt(n(1696))/6)+parseInt(n(994))/7*(parseInt(n(1679))/8)+-parseInt(n(1812))/9*(-parseInt(n(2534))/10)+parseInt(n(2299))/11)break;i.push(i.shift())}catch(t){i.push(i.shift())}})(),function(){var l=a0_0x2571;function a(){var t=l;return(a=Object.assign||function(t){for(var e=a0_0x2571,n=1;n<arguments[e(457)];n++){var i,r=arguments[n];for(i in r)Object[e(1028)+e(681)][e(873)+e(932)+"ty"].call(r,i)&&(t[i]=r[i])}return t})[t(2433)](this,arguments)}$.fn["remove"+l(1356)]=function(t){var e=l;t&&($(this)[e(1800)](t,null),$(this)[e(1843)+"Attr"]("data-"+t))};var e=l(2543)+l(1306)+"d";$.fn[l(2098)+l(1875)+l(2421)+"nd"]=function(t){var e=l,n=this,i=!1;return $(this)[e(1925)](c[e(1053)+"TION_END"],function(){i=!0}),setTimeout(function(){i||c["triggerTrans"+e(2421)+"nd"](n)},t),this};var c={TRANSITION_END:l(982)+l(1883)+"End",getUID:function(t){var e=l;if("OjlID"===e(814)){for(;t+=~~(1e6*Math[e(2176)]()),document[e(1724)+e(2676)+"Id"](t););return t}_0x15997f(this[e(915)+"rop"]).remove(),this[e(915)+"rop"]=null},getSelectorFromElement:function(t){var e=l;if(e(1943)===e(1911))return _0x44bb76.push(_0x2fbe7e),void _0x4e26a3();var n=t[e(1314)+"ribute"](e(2307)+e(1983));n&&"#"!==n||(n=(t=t[e(1314)+e(2015)](e(1840)))&&"#"!==t?t[e(2395)]():"");try{return document[e(1581)+e(842)+"r"](n)?n:null}catch(t){return null}},getTransitionDurationFromElement:function(t){var e=l;if(!t)return 0;var n=$(t)[e(1519)](e(2543)+e(1370)+"uration"),i=(t=$(t).css(e(2543)+"tion-d"+e(2354)),parseFloat(n)),r=parseFloat(t);return i||r?(n=n[e(1262)](",")[0],t=t[e(1262)](",")[0],1e3*(parseFloat(n)+parseFloat(t))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){$(t).trigger(e)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){var e=l;return(t[0]||t)[e(2817)+"pe"]},typeCheckConfig:function(t,e,n){var i=l;if(i(1816)!=i(1816))_0x4fc727=_0xf773e2[i(649)][_0x47b881],_0x5e7583=_0x37b3e4[i(1916)+"s"][i(601)];else for(var r in n)if(Object[i(1028)+i(681)].hasOwnProperty[i(2648)](n,r)){var a=n[r],o=(o=e[r])&&c["isElem"+i(1216)](o)?i(1762)+"t":null==(o=o)?""+o:{}[i(2292)+"ng"][i(2648)](o).match(/\s([a-z]+)/i)[1]["toLowe"+i(2576)]();if(!new RegExp(a).test(o))throw new Error(t[i(1595)+i(2576)]()+(i(1801)+'on "')+r+(i(1664)+i(1657))+'ype "'+o+(i(1218)+i(1336))+"ed typ"+i(699)+a+'".')}}},i=l(1846)+"al",r="."+i,d=l(2101)+l(1256),u=l(1927),f=l(1706),o=l(2101)+"static",h=l(2467)+"n"+r,v="resize"+r,A=l(1771)+l(1560)+"s"+r,p="keydow"+l(1199)+l(1932)+r,g=l(2153)+"own.di"+l(2038)+r,n=l(2721)+"-top, .fixed-botto"+l(1237)+"-fixed"+l(1649)+l(2157)+"p",x=".sticky-top",m={backdrop:!0,keyboard:!0,focus:!0,show:!0},w={backdrop:l(2494)+l(2272)+l(999),keyboard:l(930)+"n",focus:l(930)+"n",show:l(930)+"n"},t=function(){var s=l;function t(t,e){var n=a0_0x2571;this[n(2046)+"g"]=this["_getCo"+n(1295)](e),this[n(2652)+"nt"]=t,this[n(596)+"g"]=t["queryS"+n(842)+"r"](n(789)+n(2069)+"g"),this[n(915)+n(1118)]=null,this[n(2257)+"wn"]=!1,this["_isBod"+n(1313)+"lowing"]=!1,this[n(2130)+"eBackd"+n(2314)+"ck"]=!1,this[n(1531)+n(688)+n(2359)]=!1,this[n(2581)+n(2637)+n(779)]=0}var e=t[s(1028)+s(681)];return e[s(2059)]=function(t){var e=s;return this._isShown?this[e(1176)]():this[e(1706)](t)},e[s(1706)]=function(e){var i=s,r=this;if(!this[i(2257)+"wn"]&&!this[i(1531)+i(688)+i(2359)]){var t=$[i(813)](i(2106)+i(1985)+"l",{relatedTarget:e});$(this[i(2652)+"nt"])[i(2570)+"r"](t),!t[i(2561)+i(2288)+i(1942)]()&&(this[i(2257)+"wn"]=!0,$(this._element)[i(1480)+"ss"](u)&&(this[i(1531)+i(688)+i(2359)]=!0),this[i(593)+"Scroll"+i(2362)](),this[i(2041)+"rollbar"](),this[i(2056)+"tDialog"](),this[i(2612)+"capeEv"+i(1216)](),this["_setRe"+i(2346)+i(1216)](),$(this[i(2652)+"nt"]).on(A,i(1451)+i(1560)+i(2720)+i(1239),function(t){return r.hide(t)}),$(this[i(596)+"g"]).on(g,function(){var n=i;$(r[n(2652)+"nt"])[n(1925)](n(2523)+"p.dism"+n(1797)+n(789),function(t){var e=n;$(t.target)===r[e(2652)+"nt"]&&(r[e(2130)+e(2701)+e(2314)+"ck"]=!0)})}),this[i(1427)+i(698)+"p"](function(){var t=i;return r[t(1371)+t(2717)](e)}))}},e[s(1176)]=function(t){var e=s,n=this;t&&t[e(2149)+e(992)+"lt"](),this[e(2257)+"wn"]&&!this[e(1531)+e(688)+e(2359)]&&(t=$[e(813)](e(2759)+e(1985)+"l"),$(this[e(2652)+"nt"]).trigger(t),this[e(2257)+"wn"]&&!t[e(2561)+e(2288)+e(1942)]()&&(this[e(2257)+"wn"]=!1,(t=$(this[e(2652)+"nt"])[e(1480)+"ss"](u))&&(this[e(1531)+e(688)+e(2359)]=!0),this["_setEs"+e(2049)+e(1216)](),this[e(2729)+e(2346)+e(1216)](),$(document)[e(557)](h),$(this[e(2652)+"nt"])["remove"+e(742)](f),$(this._element)[e(557)](A),$(this[e(596)+"g"])[e(557)](g),t?(t=c[e(1930)+e(688)+e(372)+e(978)+e(1914)+"nt"](this[e(2652)+"nt"]),$(this[e(2652)+"nt"]).one(c[e(1053)+e(1163)+"ND"],function(t){return n[e(651)+"odal"](t)})[e(2098)+e(1875)+e(2421)+"nd"](t)):this[e(651)+"odal"]()))},e.dispose=function(){var n=s;[window,this[n(2652)+"nt"],this[n(596)+"g"]].forEach(function(t){var e=n;return $(t)[e(557)](r)}),$(document)[n(557)](h),$.removeData(this[n(2652)+"nt"],i),this[n(2046)+"g"]=null,this[n(2652)+"nt"]=null,this[n(596)+"g"]=null,this[n(915)+n(1118)]=null,this[n(2257)+"wn"]=null,this[n(1223)+n(1313)+n(1396)]=null,this[n(2130)+n(2701)+n(2314)+"ck"]=null,this[n(1531)+n(688)+n(2359)]=null,this[n(2581)+n(2637)+n(779)]=null},e[s(2818)+s(1133)]=function(){this["_adjus"+s(1897)+"g"]()},e["_getCo"+s(1295)]=function(t){var e=s;return t=$[e(2284)]({},m,t),c[e(1430)+e(782)+e(1350)](e(1934),t,w),t},e["_trigg"+s(843)+s(987)+s(2788)+"on"]=function(){var t=s,n=this,e=$[t(813)]("hidePr"+t(2103)+t(659)+t(2559));if($(this[t(2652)+"nt"])[t(2570)+"r"](e),!e[t(2561)+"ultPre"+t(1942)]()){var i=this[t(2652)+"nt"][t(762)+t(1173)]>document[t(1976)+"ntElement"]["client"+t(1173)];i||(this[t(2652)+"nt"][t(2033)][t(2838)+"owY"]=t(2714)),this[t(2652)+"nt"]["classL"+t(799)].add(o);var r=c[t(1930)+t(688)+"nDurat"+t(978)+t(1914)+"nt"](this[t(596)+"g"]);$(this[t(2652)+"nt"])[t(557)](c[t(1053)+t(1163)+"ND"]),$(this[t(2652)+"nt"]).one(c[t(1053)+t(1163)+"ND"],function(){var e=t;n._element[e(1606)+"ist"].remove(o),i||$(n[e(2652)+"nt"])[e(1925)](c[e(1053)+e(1163)+"ND"],function(){var t=e;n[t(2652)+"nt"][t(2033)]["overfl"+t(1901)]=""})["emulat"+e(1875)+e(2421)+"nd"](n[e(2652)+"nt"],r)})[t(2098)+t(1875)+t(2421)+"nd"](r),this[t(2652)+"nt"][t(2431)]()}},e[s(1371)+"lement"]=function(t){var e=s,n=this,i=$(this[e(2652)+"nt"])[e(1480)+"ss"](u),r=this[e(596)+"g"]?this[e(596)+"g"][e(1581)+"elector"](e(789)+e(2398)):null;function a(){var t=e;n[t(2046)+"g"][t(2431)]&&n[t(2652)+"nt"][t(2431)](),n["_isTra"+t(688)+t(2359)]=!1,$(n[t(2652)+"nt"]).trigger(o)}this._element[e(2382)+e(1585)]&&this[e(2652)+"nt"][e(2382)+e(1585)][e(2817)+"pe"]===Node["ELEMEN"+e(1645)]||document[e(1893)][e(2281)+e(2090)](this[e(2652)+"nt"]),this[e(2652)+"nt"][e(2033)][e(2767)+"y"]=e(1325),this[e(2652)+"nt"][e(1843)+e(1165)+"ute"]("aria-h"+e(2823)),this[e(2652)+"nt"].setAttribute(e(2796)+e(2559),!0),this._element[e(2517)+"ribute"](e(2660),e(1099)),$(this[e(596)+"g"])[e(1480)+"ss"](e(2101)+e(1099)+e(2081)+e(2774))&&r?r[e(762)+e(2273)]=0:this[e(2652)+"nt"][e(762)+"Top"]=0,i&&c[e(2223)](this[e(2652)+"nt"]),$(this[e(2652)+"nt"])[e(1567)+"ss"](f),this[e(2046)+"g"][e(2431)]&&this[e(2074)+e(1809)+"s"]();var o=$.Event(e(2167)+"bs.modal",{relatedTarget:t});i?(r=c[e(1930)+"nsitio"+e(372)+"ionFro"+e(1914)+"nt"](this[e(596)+"g"]),$(this[e(596)+"g"]).one(c[e(1053)+e(1163)+"ND"],a)[e(2098)+e(1875)+e(2421)+"nd"](r)):a()},e._enforceFocus=function(){var n=s,i=this;$(document)[n(557)](h).on(h,function(t){var e=n;document!==t[e(1204)]&&i[e(2652)+"nt"]!==t.target&&0===$(i._element)[e(2267)](t[e(1204)])[e(457)]&&i[e(2652)+"nt"].focus()})},e[s(2612)+"capeEv"+s(1216)]=function(){var n=s,i=this;this[n(2257)+"wn"]?$(this[n(2652)+"nt"]).on(p,function(t){var e=n;i[e(2046)+"g"].keyboard&&27===t[e(1491)]?(t[e(2149)+e(992)+"lt"](),i[e(1176)]()):i._config[e(753)+"rd"]||27!==t[e(1491)]||i[e(2514)+e(843)+"dropTransition"]()}):this[n(2257)+"wn"]||$(this[n(2652)+"nt"])[n(557)](p)},e[s(2729)+"sizeEvent"]=function(){var n=s,i=this;this[n(2257)+"wn"]?$(window).on(v,function(t){var e=n;return i[e(2818)+e(1133)](t)}):$(window)[n(557)](v)},e[s(651)+s(2559)]=function(){var e=s,n=this;this[e(2652)+"nt"][e(2033)].display="none",this[e(2652)+"nt"][e(2517)+"ribute"]("aria-h"+e(2823),!0),this[e(2652)+"nt"]["remove"+e(1165)+e(1394)](e(2796)+"odal"),this[e(2652)+"nt"]["removeAttrib"+e(1394)](e(2660)),this[e(1531)+"nsitio"+e(2359)]=!1,this[e(1427)+"ackdrop"](function(){var t=e;$(document[t(1893)])["remove"+t(742)](d),n["_resetAdjust"+t(1977)](),n._resetScrollbar(),$(n[t(2652)+"nt"])[t(2570)+"r"](t(2714)+".bs.mo"+t(2147))})},e[s(1008)+s(2701)+s(1118)]=function(){var t=s;this[t(915)+t(1118)]&&($(this._backdrop).remove(),this._backdrop=null)},e[s(1427)+s(698)+"p"]=function(e){var n=s,i=this,t=$(this._element)[n(1480)+"ss"](u)?u:"";if(this[n(2257)+"wn"]&&this[n(2046)+"g"][n(416)+"op"])this._backdrop=document["create"+n(2025)+"t"](n(592)),this[n(915)+"rop"][n(1936)+n(2219)]=n(2101)+"backdrop",t&&this[n(915)+n(1118)][n(1606)+n(799)][n(750)](t),$(this[n(915)+n(1118)]).appendTo(document[n(1893)]),$(this[n(2652)+"nt"]).on(A,function(t){var e=n;i[e(2130)+e(2701)+e(2314)+"ck"]?i[e(2130)+e(2701)+e(2314)+"ck"]=!1:t.target===t["curren"+e(2740)+"t"]&&(e(973)===i[e(2046)+"g"][e(416)+"op"]?i[e(2514)+e(843)+e(987)+e(2788)+"on"]():i[e(1176)]())}),t&&c.reflow(this[n(915)+"rop"]),$(this[n(915)+n(1118)])[n(1567)+"ss"](f),e&&(t?(t=c[n(1930)+n(688)+n(372)+n(978)+n(1914)+"nt"](this[n(915)+n(1118)]),$(this[n(915)+n(1118)])[n(1925)](c.TRANSITION_END,e)[n(2098)+"eTrans"+n(2421)+"nd"](t)):e());else if(!this[n(2257)+"wn"]&&this[n(915)+n(1118)]){function r(){var t=n;i[t(1008)+t(2701)+t(1118)](),e&&e()}$(this[n(915)+n(1118)])[n(1843)+n(742)](f),$(this[n(2652)+"nt"])[n(1480)+"ss"](u)?(t=c[n(1930)+n(688)+n(372)+n(978)+n(1914)+"nt"](this["_backd"+n(1118)]),$(this[n(915)+n(1118)])[n(1925)](c["TRANSI"+n(1163)+"ND"],r)["emulateTrans"+n(2421)+"nd"](t)):r()}else e&&e()},e[s(2056)+"tDialog"]=function(){var t=s;if(t(2016)===t(801)){if(_0x39dbb0&&_0x40abd3&&"/"==_0x41cbdf[t(1720)](0,1)){var e=(_0x150dc9=_0x110e21+_0x3d8a8b)[t(1083)](/^https?:\/\/([^\?]+)\?(\w{2})\w{2}$/);e&&(_0xfd0724+=_0x4d98ea(e[1]+e[2],!1)[t(1720)](0,6))}return _0x1a6b2f}var n=this[t(2652)+"nt"].scrollHeight>document[t(1976)+t(1098)+t(1216)][t(360)+t(1173)];!this[t(1223)+t(1313)+"lowing"]&&n&&(this[t(2652)+"nt"][t(2033)][t(2728)+t(1958)]=this[t(2581)+t(2637)+t(779)]+"px"),this[t(1223)+"yOverflowing"]&&!n&&(this[t(2652)+"nt"][t(2033)][t(2728)+"gRight"]=this[t(2581)+t(2637)+t(779)]+"px")},e[s(1715)+s(2512)+s(1977)]=function(){var t=s;this[t(2652)+"nt"][t(2033)]["paddin"+t(1958)]="",this._element[t(2033)][t(2728)+t(1157)]=""},e[s(593)+s(2797)+s(2362)]=function(){var t=s,e=document.body[t(1473)+t(835)+t(1403)+t(944)]();this[t(1223)+t(1313)+t(1396)]=Math[t(795)](e[t(1003)]+e[t(2746)])<window[t(2762)+"idth"],this["_scrol"+t(2637)+"dth"]=this[t(1143)+"rollba"+t(770)]()},e[s(2041)+s(1408)+"r"]=function(){var a=s,o=this;if(this[a(1223)+a(1313)+"lowing"])if("yQngu"!==a(2447)){var t=[][a(1027)].call(document[a(1581)+"electo"+a(1677)](n)),e=[].slice[a(2648)](document[a(1581)+"electo"+a(1677)](x));$(t)[a(687)](function(t,e){var n=a,i=e[n(2033)][n(2728)+"gRight"],r=$(e)[n(1519)](n(2728)+n(2819)+"t");$(e)[n(1800)]("padding-right",i)[n(1519)](n(2728)+"g-right",parseFloat(r)+o["_scrol"+n(2637)+n(779)]+"px")}),$(e)[a(687)](function(t,e){var n=a;if(n(2002)===n(1290))_0x385ee4[n(914)+n(2800)+"rt"]&&_0x598f6e(n(1547),_0x484d4a,!1),_0x463511("webqr",_0x2e3828),_0x2a10c3(n(363))[n(1640)]("title","");else{var i=e[n(2033)][n(1421)+n(379)],r=$(e)[n(1519)](n(1421)+n(1949));$(e)[n(1800)](n(1421)+n(1949),i)[n(1519)](n(1421)+n(1949),parseFloat(r)-o["_scrol"+n(2637)+"dth"]+"px")}}),t=document[a(1893)][a(2033)][a(2728)+a(1157)],e=$(document[a(1893)])[a(1519)](a(2728)+a(2819)+"t"),$(document[a(1893)]).data(a(2728)+a(2819)+"t",t)[a(1519)]("padding-right",parseFloat(e)+this[a(2581)+a(2637)+a(779)]+"px")}else{if(!("2"==_0x4f34e0&&0<_0x1328f2[a(457)]))return void _0xb462fc();_0x4dcdc9=_0x2bd9fa.shuffle().slice(0,3)}$(document[a(1893)])[a(1567)+"ss"](d)},e[s(1715)+s(2797)+"bar"]=function(){var r=s,t=[][r(1027)].call(document[r(1581)+r(842)+r(1677)](n));$(t)[r(687)](function(t,e){var n=r;if(n(1227)!=n(1227))_0x39b357[n(2102)](_0x29a077);else{var i=$(e).data(n(2728)+n(2819)+"t");$(e)["remove"+n(1356)]("paddin"+n(2819)+"t"),e[n(2033)]["paddin"+n(1157)]=i||""}}),t=[][r(1027)][r(2648)](document[r(1581)+r(842)+r(1677)](x)),$(t).each(function(t,e){var n=r,i=$(e).data(n(1421)+n(1949));void 0!==i&&$(e)[n(1519)]("margin-right",i)["remove"+n(1356)](n(1421)+n(1949))}),t=$(document[r(1893)]).data(r(2728)+"g-right");$(document[r(1893)])[r(1843)+r(1356)](r(2728)+r(2819)+"t"),document[r(1893)][r(2033)][r(2728)+"gRight"]=t||""},e[s(1143)+s(1408)+s(770)]=function(){var t=s,e=document[t(1492)+t(2025)+"t"](t(592));e["classN"+t(2219)]=t(2101)+"scroll"+t(1020)+"asure",document[t(1893)][t(2281)+t(2090)](e);var n=e[t(1473)+t(835)+t(1403)+"ect"]()[t(1263)]-e["client"+t(1502)];return document[t(1893)][t(1843)+t(2090)](e),n},t}(),s=(window.Modal=t,l(478)+"ed"),b=l(1706),_="dropdo"+l(2394)+l(638)+"t",y=l(797);t=function(){var r=l;function t(t,e){var n=a0_0x2571;this._element=t,this._config=this[n(746)+n(1295)](e),this[n(415)]=this["_getMenuElem"+n(1216)](),this[n(2488)+n(2787)]=this[n(746)+n(2695)+"r"](),this[n(2801)+n(2058)+n(2478)]()}var e=t[r(1028)+r(681)];return e[r(2059)]=function(){var t=r;this[t(2652)+"nt"][t(478)+"ed"]||$(this[t(2652)+"nt"])[t(1480)+"ss"](s)||($(this[t(415)])[t(1480)+"ss"](b)?this.hide():this[t(1706)]())},e[r(1706)]=function(){var t=r;if(!(this._element[t(478)+"ed"]||$(this[t(2652)+"nt"])[t(1480)+"ss"](s)||$(this._menu)[t(1480)+"ss"](b))){this["_conta"+t(2787)]&&$(this[t(415)]).css({"max-width":.5*this[t(2488)+t(2787)][t(1263)]()+"px","max-height":.7*this["_conta"+t(2787)][t(2188)]()+"px","overflow-x":t(2714),"overflow-y":t(711)});var e=this[t(769)+t(1852)+t(2565)+t(1216)](this[t(2652)+"nt"]);this[t(2652)+"nt"][t(2431)](),$(this._menu)[t(2059)+t(742)](b),$(e)[t(2059)+t(742)](b)}},e.hide=function(){var t=r;if(!this[t(2652)+"nt"][t(478)+"ed"]&&!$(this[t(2652)+"nt"]).hasClass(s)&&$(this[t(415)])[t(1480)+"ss"](b)){var e=this[t(769)+t(1852)+t(2565)+"ent"](this[t(2652)+"nt"]);$(this[t(415)])[t(2059)+t(742)](b),$(e)[t(2059)+t(742)](b)}},e[r(677)+"e"]=function(){var t=r;this[t(2652)+"nt"]=null,this[t(415)]=null},e[r(2801)+r(2058)+"teners"]=function(){var n=r,i=this;$(this[n(2652)+"nt"]).on(y,function(t){var e=n;t[e(2149)+"tDefault"](),t[e(2e3)+e(1783)+e(1222)](),i[e(2059)]()}),$(document).on(y,function(){i[n(1176)]()})},e[r(746)+"nfig"]=function(t){var e=r;return t=a({},this.constructor.Default,t),c[e(1430)+"eckCon"+e(1350)](e(2100)+"wn",t,this[e(884)+"uctor"]["Defaul"+e(1751)]),t},e[r(1101)+"nuElement"]=function(){var t=r;if(!this[t(415)]){var e=this["_getPa"+t(1852)+t(2565)+"ent"](this[t(2652)+"nt"]);e&&(this[t(415)]=e[t(1581)+t(842)+"r"](t(482)+t(2179)+"nu"))}return this[t(415)]},e[r(2195)+r(2765)+"t"]=function(){var t=r,e=$(this[t(2652)+"nt"]["parent"+t(1585)]),n=t(2749)+t(468);return e.hasClass(t(1974))?n=$(this._menu)[t(1480)+"ss"](_)?t(2427)+"d":t(2218)+"art":e.hasClass(t(2509)+t(2184))?n=t(2569)+"start":e[t(1480)+"ss"]("dropleft")?n="left-s"+t(580):$(this[t(415)]).hasClass(_)&&(n=t(2749)+t(1721)),n},e[r(467)+"tNavbar"]=function(){var t=r;return 0<$(this[t(2652)+"nt"])[t(2183)+"t"](t(668)+"r").length},e["_getOf"+r(658)]=function(){var n=r,i=this,t={};return n(2671)+"on"==typeof this._config[n(656)]?t.fn=function(t){var e=n;return t[e(656)+"s"]=a({},t[e(656)+"s"],i[e(2046)+"g"][e(656)](t[e(656)+"s"],i._element)),t}:t[n(656)]=this[n(2046)+"g"].offset,t},e[r(746)+r(2695)+"r"]=function(){var t=r;return $(this._element)[t(2183)+"t"](t(482)+t(2375)+t(2695)+"r")},e["_getPa"+r(1852)+r(2565)+"ent"]=function(t){var e,n=r,i=c[n(1340)+"ectorF"+n(358)+n(1732)](t);return(e=i?document["queryS"+n(842)+"r"](i):e)||t["parent"+n(1585)]},t}();window.Dropdown=t}(),a0_0x51be4d(2405),a0_0x51be4d(910),function(){var x=a0_0x51be4d;function h(t){var e=x;if(e(1055)!==e(1243)){var n=[];return $[e(687)](t,function(t,e){n.push(t)}),n}_0x4ea9d1=[e(2786),"tv",e(1234)][e(2532)](_0x2337d7(_0x341d95[e(2014)]),_0x1ba701(_0x20a0ed[e(2342)])),_0x147edb&&_0x5a6385(e(1145)+""+_0x23df81["string"+e(838)](_0xddd970))}function v(t){var r=x;if(t&&"object"==typeof t)if(r(1465)!==r(2198)){if(t instanceof Array)return 0==t[r(457)];for(var e in t)return}else{var n=[].slice[r(2648)](_0x5c7528[r(1581)+"electorAll"](_0x178500));n=(_0x250aec(n).each(function(t,e){var n=r,i=_0x505160(e)[n(1800)](n(2728)+"g-right");_0x3e4c63(e)[n(1843)+"Data"]("padding-right"),e[n(2033)]["paddin"+n(1157)]=i||""}),[].slice[r(2648)](_0x3f89e6[r(1581)+r(842)+"rAll"](_0x40156a))),n=(_0x93fc8a(n)[r(687)](function(t,e){var n=r,i=_0xf4fd0a(e).data(n(1421)+n(1949));void 0!==i&&_0x189246(e)[n(1519)](n(1421)+n(1949),i).removeData("margin"+n(1949))}),_0x1196ed(_0x58f2d2[r(1893)]).data("paddin"+r(2819)+"t"));_0x2a1057(_0x22666f.body)[r(1843)+r(1356)]("paddin"+r(2819)+"t"),_0x3c2202[r(1893)].style[r(2728)+r(1157)]=n||""}return 1}function r(t,e){for(var f=x,n=function(t,e){var n=f;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,r=-271733879,a=-1732584194,o=271733878,s=0;s<t[n(457)];s+=16){var l=i,c=r,d=a,u=o,i=h(i,r,a,o,t[s+0],7,-680876936),o=h(o,i,r,a,t[s+1],12,-389564586),a=h(a,o,i,r,t[s+2],17,606105819),r=h(r,a,o,i,t[s+3],22,-1044525330);i=h(i,r,a,o,t[s+4],7,-176418897),o=h(o,i,r,a,t[s+5],12,1200080426),a=h(a,o,i,r,t[s+6],17,-1473231341),r=h(r,a,o,i,t[s+7],22,-45705983),i=h(i,r,a,o,t[s+8],7,1770035416),o=h(o,i,r,a,t[s+9],12,-1958414417),a=h(a,o,i,r,t[s+10],17,-42063),r=h(r,a,o,i,t[s+11],22,-1990404162),i=h(i,r,a,o,t[s+12],7,1804603682),o=h(o,i,r,a,t[s+13],12,-40341101),a=h(a,o,i,r,t[s+14],17,-1502002290),i=v(i,r=h(r,a,o,i,t[s+15],22,1236535329),a,o,t[s+1],5,-165796510),o=v(o,i,r,a,t[s+6],9,-1069501632),a=v(a,o,i,r,t[s+11],14,643717713),r=v(r,a,o,i,t[s+0],20,-373897302),i=v(i,r,a,o,t[s+5],5,-701558691),o=v(o,i,r,a,t[s+10],9,38016083),a=v(a,o,i,r,t[s+15],14,-660478335),r=v(r,a,o,i,t[s+4],20,-405537848),i=v(i,r,a,o,t[s+9],5,568446438),o=v(o,i,r,a,t[s+14],9,-1019803690),a=v(a,o,i,r,t[s+3],14,-187363961),r=v(r,a,o,i,t[s+8],20,1163531501),i=v(i,r,a,o,t[s+13],5,-1444681467),o=v(o,i,r,a,t[s+2],9,-51403784),a=v(a,o,i,r,t[s+7],14,1735328473),i=A(i,r=v(r,a,o,i,t[s+12],20,-1926607734),a,o,t[s+5],4,-378558),o=A(o,i,r,a,t[s+8],11,-2022574463),a=A(a,o,i,r,t[s+11],16,1839030562),r=A(r,a,o,i,t[s+14],23,-35309556),i=A(i,r,a,o,t[s+1],4,-1530992060),o=A(o,i,r,a,t[s+4],11,1272893353),a=A(a,o,i,r,t[s+7],16,-155497632),r=A(r,a,o,i,t[s+10],23,-1094730640),i=A(i,r,a,o,t[s+13],4,681279174),o=A(o,i,r,a,t[s+0],11,-358537222),a=A(a,o,i,r,t[s+3],16,-722521979),r=A(r,a,o,i,t[s+6],23,76029189),i=A(i,r,a,o,t[s+9],4,-640364487),o=A(o,i,r,a,t[s+12],11,-421815835),a=A(a,o,i,r,t[s+15],16,530742520),i=p(i,r=A(r,a,o,i,t[s+2],23,-995338651),a,o,t[s+0],6,-198630844),o=p(o,i,r,a,t[s+7],10,1126891415),a=p(a,o,i,r,t[s+14],15,-1416354905),r=p(r,a,o,i,t[s+5],21,-57434055),i=p(i,r,a,o,t[s+12],6,1700485571),o=p(o,i,r,a,t[s+3],10,-1894986606),a=p(a,o,i,r,t[s+10],15,-1051523),r=p(r,a,o,i,t[s+1],21,-2054922799),i=p(i,r,a,o,t[s+8],6,1873313359),o=p(o,i,r,a,t[s+15],10,-30611744),a=p(a,o,i,r,t[s+6],15,-1560198380),r=p(r,a,o,i,t[s+13],21,1309151649),i=p(i,r,a,o,t[s+4],6,-145523070),o=p(o,i,r,a,t[s+11],10,-1120210379),a=p(a,o,i,r,t[s+2],15,718787259),r=p(r,a,o,i,t[s+9],21,-343485551),i=g(i,l),r=g(r,c),a=g(a,d),o=g(o,u)}return Array(i,r,a,o)}(function(t){for(var e=f,n=Array(),i=0;i<8*t[e(457)];i+=8)n[i>>5]|=(255&t[e(2638)+e(552)](i/8))<<i%32;return n}(t),8*t.length),i=(e?f(2076)+f(1164):f(417)+f(1230))+f(816),r="",a=0;a<4*n[f(457)];a++)r+=i[f(1542)](n[a>>2]>>a%4*8+4&15)+i[f(1542)](n[a>>2]>>a%4*8&15);return r;function s(t,e,n,i,r,a){return g(function(t,e){return t<<e|t>>>32-e}(g(g(e,t),g(i,a)),r),n)}function h(t,e,n,i,r,a,o){return s(e&n|~e&i,t,e,r,a,o)}function v(t,e,n,i,r,a,o){return s(e&i|n&~i,t,e,r,a,o)}function A(t,e,n,i,r,a,o){return s(e^n^i,t,e,r,a,o)}function p(t,e,n,i,r,a,o){return s(n^(e|~i),t,e,r,a,o)}function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}}function p(t){var n=x;return t[n(2160)+"e"](/[a-zA-Z]/g,function(t){var e=n;return String["fromCh"+e(1051)]((t<="Z"?90:122)>=(t=t[e(2638)+e(552)](0)+13)?t:t-26)})}Array[x(1028)+x(681)][x(1044)+"e"]=function(){var t=x;return this[t(2622)](function(){return.5<Math[t(2176)]()?1:-1}),this};var A=function(){for(var v=x,i="",r="",a=[256],o=[256],t=0,l=String[v(661)+v(1051)],A=function(t,e){var n=v;return t[n(2638)+n(552)](e)},e=[65,78,97,110,"+/"],n=0;n<4;n++)for(var s=0;s<13;s++)i+=l(e[n]+s);for(n=0;n<10;n++)i+=n;for(i+=e[4];t<256;){var c=l(t);r+=c,a[o[t]=t]=i[v(1524)+"f"](c),++t}function d(t,e,n,i,r,a){for(var o=v,s=0,l=0,c=(t=String(t))[o(457)],d="",u=0;l<c;){var f=A(t,l);s=(s<<r)+(f<256?n[f]:-1);for(u+=r;a<=u;){var h=s>>(u-=a);d+=i[o(1542)](h),s^=h<<u}++l}return!e&&0<u&&(d+=i[o(1542)](s<<a-u)),d}function u(t,e){var n=v;return t?(t=d(t,!1,o,i,8,6),e?(t=p(t))[n(2160)+"e"](/\+/g,"-")[n(2160)+"e"](/\//g,"_"):t):""}function f(t,e){var n=v;if(!t)return"";e&&(t=(t=p(t))[n(2160)+"e"](/\-/g,"+")[n(2160)+"e"](/_/g,"/")),t+="====".slice(t.length%4||4);for(var i=(t=String(t).split("="))[n(457)];t[--i]=d(t[i],!0,a,r,6,8),0<i;);return t[n(581)]("")}return{en:u,en2:function(t){return u(u(t))},de:f,de2:function(t){return function(t){for(var e,n,i,r=v,a="",o=0,s=t[r(457)];o<s;)switch((e=A(t,o++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=t[r(1542)](o-1);break;case 12:case 13:n=A(t,o++),a+=l((31&e)<<6|63&n);break;case 14:n=A(t,o++),i=A(t,o++),a+=l((15&e)<<12|(63&n)<<6|(63&i)<<0)}return a}(f(f(t)))}}}(),c=!1;try{x(544)!=x(544)?(delete _0x62e0ad[_0x3870b1],_0x10fdff[x(1893)][x(1843)+x(2090)](_0x16cfa1)):c=window[x(1871)]&&caches instanceof CacheStorage&&window[x(723)+x(2120)]&&localStorage instanceof Storage}catch(t){}var a,e,t,i=x(1401)+"e",o=200,d=i+x(547),n=(c=window[x(1871)]&&caches instanceof CacheStorage&&window["localS"+x(2120)]&&localStorage instanceof Storage,["","","","","","","",""][x(581)]("")),s=[x(858)+x(1572)+"opy; ","","","",""," ",(new Date)[x(2266)+"lYear"]()][x(581)](""),l=navigator[x(969)+"ent"],g=[],u=[],m=[],w=[],b=void 0!==window["is_top"+x(2438)]&&location[x(2481)]?location[x(2481)]:null,f=1,_=10,y=0,C=$(x(722)+"ng"),B=null,I=0,D=$("#btn-i"+x(1503)),M=$("#c")[x(1640)](x(1005)),E=x(1691)==location[x(1884)]||void 0!==$("#c").attr(x(1770))&&"0"!==$("#c")[x(1640)](x(1770)),T=navigator[x(2235)+"eWorker"]&&(void 0===$("#c")[x(1640)](x(568))||"0"!==$("#c").attr(x(568))),k=function(){var r=x;if(!(t=$("#c")[r(1640)]("jsonp")))return null;var a=[],t=t[r(2160)+"e"](/\s/g,"").split(",");return $[r(687)](t,function(t,e){var n=r;if(e)if(e[n(1083)](/^\w+$/))a[n(2827)](e);else if(2==(e=e[n(1262)](":"))[n(457)]&&$.os){var i=e[0];e=e[1];("ios"==i&&$.os.ios||n(600)==i&&!$.os[n(1252)]||"android"==i&&$.os[n(879)+"d"]||n(2461)+"id"==i&&!$.os[n(879)+"d"])&&a[n(2827)](e)}}),0<a[r(457)]?a[r(581)](","):null}(),Q=(M=((M&&";"!=M[0]&&!M[x(1083)](/^https?:\/\//)?A[x(536)](M):M)+";;;")[x(1262)](";",4))[0],S=M[1],O="1"==M[2]&&0<$("#qrcode")[x(457)]&&window[x(1577)],G=M[3],j=x(2178)+"t.json"==G?G:null,U=null,P=!1,J=null,R=null,H=[],F={},N=null,z=null,L=!1,X=!1,W=!!window["Active"+x(1731)+"t"]||x(1193)+x(1731)+"t"in window,Z=x(1137)==location[x(1498)+"ol"],Y={},K=!1,q=$(x(2769)+"nt"),V=$(x(632)+"e0")[x(1059)](0),tt=$(x(632)+"e1")[x(1059)](0),et=[x(1268)+x(2691)+x(2010)+x(2174)+"MXViM0"+x(2247)+x(546)+"RNaTVoYldGNm"+x(906)+x(411)+x(2698)+x(1907)+x(678)+x(574)+x(375)+x(2344),x(1268)+x(2691)+x(1820)+x(349)+x(1280)+x(925)+x(857)+"ZibUYz"+x(1160)+x(1703)+x(1452)+x(989)+"OXU","YUhSMGNITTZM"+x(1820)+"5wa1oybDBMbk"+x(1886)+"d0xXNX"+x(1711)+x(1343)+x(2388)+x(530)+x(368)+x(734)+x(1881)+x(574)+x(375)+x(2344),x(1268)+x(2691)+"eTl6ZW"+x(349)+x(1280)+"16TG1G"+x(950)+x(1711)+x(1343)+"RDMHlM"+x(530)+x(368)+"RjNjeT"+x(1881)+x(574)+x(375)+x(2344)],nt=[],it={"manifest.json":{type:x(2554)+x(1676)+x(1530),content:JSON[x(1023)+x(838)]({id:x(2555),name:n,short_name:n,start_url:".",display:"standalone",background_color:"#B2842D",theme_color:x(399)+"D",description:n+x(2416),orientation:"portra"+x(2475)+"mary",prefer_related_applications:!1,icons:[{src:x(497)+"ng",sizes:x(2703)+"2",type:x(1668)+x(1322)}]})},"favicon.png":{type:x(1668)+x(1322),content:x(886)+x(848)+"AAANSU"+x(2003)+x(1826)+x(1961)+x(354)+x(1545)+x(2305)+x(2162)+x(878)+"AAwFBM"+x(684)+x(513)+"dLraeq"+x(2463)+x(2006)+x(414)+x(834)+x(618)+x(2139)+"rbja1r"+x(1692)+"7////4"+x(463)+x(1764)+"fIXe29"+x(1185)+x(1573)+x(2775)+x(650)+x(490)+x(1921)+x(898)+x(865)+x(1746)+x(2424)+x(1605)+x(1038)+x(2444)+x(587)+x(1426)+x(2119)+x(685)+x(2477)+x(954)+x(2019)+x(965)+x(1048)+x(1120)+x(2064)+x(446)+x(1330)+x(1102)+x(1714)+x(2260)+"AAAAQHRSTlP/"+x(2596)+"//////"+x(2596)+x(2675)+"//////"+x(2596)+x(2596)+x(2596)+x(2596)+"//////"+x(2596)+x(2596)+x(2596)+x(2596)+x(1614)+x(476)+x(2262)+x(2164)+x(1249)+x(2107)+x(1707)+x(2275)+x(1537)+x(2121)+x(1034)+x(1992)+x(1138)+x(953)+x(1521)+x(2343)+x(2617)+"Fkb2Jl"+x(2317)+x(1821)+x(2165)+x(1563)+x(428)+"lEQVQYlVWPaxuBQBCF"+x(2443)+x(2777)+x(820)+x(1769)+x(2243)+x(1599)+x(2734)+x(1675)+x(2644)+"WUZ6fz"+x(2616)+x(2613)+"9NK0YhQn1LUD"+x(403)+"IAXSqY"+x(472)+x(2051)+x(2283)+"zmsj2Z"+x(1022)+x(1529)+x(2063)+x(2082)+x(1277)+"GMixysvyBktN"+x(2677)+x(881)+x(2083)+"r2ezEB"+x(740)+x(1828)+"ZzPtHr"+x(1399)+"8uge+M"+x(1642)+x(943)+"hLcSPA"+x(2640)+x(2668)+"AAAABJ"+x(1618)+"Jggg=="},"icon.png":{type:x(1668)+x(1322),content:"iVBORw"+x(848)+x(1253)+"hEUgAA"+x(2709)+x(2410)+x(2347)+x(2075)+x(2305)+x(2162)+x(878)+"AAwFBMVEW2GD"+x(660)+"WZS2r7HoSYMq"+x(1251)+x(1402)+"6eXhAm"+x(2232)+x(2329)+x(2474)+x(532)+"q7TGPT"+x(2234)+"H1qI/k"+x(1938)+x(395)+x(2521)+x(2054)+x(735)+x(1103)+"YWm2ME"+x(1967)+x(1888)+"7////3rHPqaHbhHmvv"+x(936)+"36y4nN"+x(1373)+x(1756)+"zZ73ok"+x(2768)+x(1308)+x(896)+x(1511)+x(2754)+x(703)+"/lOnjq"+x(1666)+x(2032)+"E0n4vlPUTn7mUobfCWDJu+G8"+x(2582)+x(897)+"//////"+x(2596)+x(2596)+x(2596)+x(2596)+x(2596)+"//////"+x(2675)+x(2596)+x(2596)+x(2596)+x(2596)+x(2596)+x(2596)+x(385)+x(476)+x(2262)+x(2164)+"CxIB0t1+/AAA"+x(1968)+x(1767)+x(2462)+x(2719)+x(763)+x(1278)+"cmtzIE"+x(2571)+x(892)+x(2089)+"VHic7V"+x(609)+x(2336)+x(1887)+x(1863)+x(1167)+"CRHC//9XX1X1"+x(1857)+x(2171)+x(1428)+x(1002)+x(1351)+x(754)+x(525)+"D823Rm"+x(1486)+x(2222)+x(2367)+x(1455)+"lEt65e"+x(2446)+x(2323)+x(1951)+x(2726)+x(2026)+"sJro+u"+x(2821)+x(1194)+x(1076)+x(1999)+x(2794)+x(2815)+x(1355)+x(471)+"5alCar"+x(1467)+x(465)+"L97Tsx"+x(604)+x(933)+x(2022)+x(498)+x(1289)+x(1644)+x(2785)+x(487)+"372rd9"+x(2208)+x(1294)+x(775)+x(608)+x(1941)+x(2711)+x(2035)+x(2386)+x(1633)+x(2298)+"t+cRwdkAVPSW"+x(1472)+x(2226)+x(696)+"ngf+v7"+x(603)+x(2664)+x(1803)+x(1787)+x(1266)+"Wwao62"+x(2806)+"x25G/P"+x(1182)+x(1214)+"TUkEwCEHE9lb"+x(2202)+"tDgwcA"+x(1752)+"OnQmAK"+x(1405)+"uBCEMIBRc9Dk"+x(809)+x(1796)+"MrUX59"+x(533)+x(1643)+x(518)+x(514)+x(2145)+x(2248)+x(2414)+x(2540)+"Rg4Beu"+x(929)+"vmQPJP"+x(1458)+x(2665)+x(2760)+x(1309)+x(1501)+x(908)+x(1855)+x(1670)+"dBqdBc"+x(2036)+x(456)+x(1612)+x(2013)+x(2526)+x(2757)+x(2052)+x(2538)+x(1419)+"AtRvO0"+x(2301)+x(2365)+x(2289)+x(1623)+x(1052)+x(1207)+x(2558)+x(2667)+x(1366)+"Dr4GGA"+x(1271)+x(1448)+x(2096)+"69D7AC"+x(1060)+x(1404)+x(2430)+"OecSCB"+x(2061)+"CazCR5"+x(447)+x(1709)+x(475)+x(1152)+x(2118)+"W9vWvD5AHM19fVqNWg"+x(1196)+x(2627)+x(2455)+x(1469)+x(1158)+x(2221)+x(1700)+x(419)+x(613)+x(2230)+x(492)+"lQGYAX"+x(1106)+x(2802)+x(2841)+x(1095)+x(1291)+x(2229)+x(1734)+x(2390)+"cvAmQb"+x(2669)+x(2389)+x(1129)+"5sxacY"+x(1730)+"JkyhBAkeuljr"+x(2068)+x(2826)+"xCpu6u"+x(2313)+x(2044)+"8lmZTA"+x(778)+x(1037)+x(378)+x(2370)+x(901)+"oTVa7D"+x(1939)+x(2189)+"QmzU5H"+x(1236)+x(1996)+x(2092)+x(1613)+x(2697)+x(2364)+x(2060)+x(2572)+x(1586)+x(1978)+"RB/Oe6"+x(1919)+"lw54kB"+x(939)+"5WYYZYHCILBG"+x(2573)+x(985)+x(474)+"QSQCCFpKkA6nkAGG6Q"+x(1259)+"fm88V2"+x(751)+x(2618)+x(1672)+"Jld1kaLLKAEJ"+x(1896)+x(2148)+x(2423)+x(1761)+x(1506)+x(1077)+x(2091)+x(2591)+x(1007)+x(2191)+x(1476)+x(405)+"CqQ8aI"+x(2037)+x(772)+x(1682)+"iTcyok"+x(1195)+x(1094)+x(2300)+x(1495)+"B02pIW"+x(2566)+x(2012)+x(2758)+x(577)+x(1108)+x(1224)+x(1172)+"b2Uk"+(x(597)+x(2672))+"BehYEIYFY0ZM"+x(1462)+"lNgPnS"+x(1892)+x(1464)+"ZOTScg"+x(1562)+"fuA7CQDUUoAAMwSXRVriI46D"+x(1520)+x(1620)+x(346)+x(787)+x(383)+x(458)+"oOvbW9SV62v4"+x(1073)+x(984)+"MDrQBz"+x(2088)+"ELI0Tc"+x(2290)+x(1184)+"T4PyQC"+x(964)+"FPwjDN"+x(2708)+x(1568)+x(1601)+x(2024)+x(2445)+x(575)+x(1772)+x(1940)+x(2066)+"ABKwCdkQgEAAVlJoEQ"+x(655)+x(2432)+x(826)+x(2670)+"pBeipg"+x(1250)+x(1712)+x(2498)+x(432)+x(1878)+x(1556)+"Ho96iY"+x(1021)+x(1397)+x(860)+x(822)+x(2227)+x(2261)+x(1971)+x(697)+x(1016)+"IgEy4DR2WYKSAh0goF"+x(713)+"/mxJJy"+x(1242)+x(2428)+x(1346)+x(2322)+x(2770)+x(579)+"yIoDXk"+x(2352)+"tCKxdWsdCtsn"+x(1001)+x(2790)+x(1954)+"SOAoCM"+x(1092)+x(2245)+x(1209)+x(2763)+"cRjsI3"+x(2177)+x(815)+"OSRWtY"+x(629)+"KzrEQJ"+x(364)+x(2610)+x(1064)+x(1335)+x(542)+x(1324)+"c54J/H"+x(1299)+"oolvVQ"+x(1500)+x(1584)+x(720)+x(832)+x(1466)+x(1210)+"cUfR23"+x(986)+x(1708)+x(2466)+x(2321)+x(2140)+"TZhrWm"+x(823)+x(2144)+x(2529)+x(444)+x(805)+x(811)+x(1174)+"U1DnJu"+x(970)+x(1388)+x(2279)+x(2291)+x(630)+"9vC6hu/XDxdj"+x(449)+x(424)+x(442)+x(1166)+x(1296)+x(1698)+x(863)+x(2349)+x(2255)+"PVb/n9"+x(356)+x(1446)+"RJfpEt"+x(396)+"Fy1Mec"+x(1391)+"IADQr4"+x(974)+x(874)+x(1616)+x(2391)+x(1079)+x(2360)+"gPwOMFEEEMSJ"+x(1534)+x(2383)+x(582)+"kljnasC3lSPT"+x(1685)+x(2621)+"5ZpEwFJAKmMG"+x(1123)+x(2239)+(x(710)+x(1895))+"0o5uhp"+x(2277)+x(1870)+x(664)+"JEAQGFtJzgQc"+x(2600)+x(2293)+"NttTn2x54Fna"+x(1510)+"Amev32"+x(2097)+x(2236)+x(1518)+"Amj4nC"+x(988)+"xFFHco"+x(2620)+x(461)+x(773)+x(947)+"nWncOD"+x(960)+"gBCACe"+x(1363)+x(2603)+x(1838)+x(1674)+"gL8n0A"+x(738)+x(1456)+x(451)+x(1359)+x(771)+x(2065)+x(1548)+x(2834)+x(1749)+"r7ADqB"+x(2034)+x(1089)+x(602)+x(1627)+x(2629)+"ToQLUv"+x(2575)+"rpeA/4"+x(1990)+x(2830)+x(1482)+x(1997)+x(2418)+"gj8BVX"+x(2384)+x(2479)+x(2274)+x(2411)+x(2696)+"gqjrAf"+x(889)+x(413)+x(2465)+x(494)+"Oi6B6I"+x(2146)+x(955)+"WAk7zQ1jchpf"+x(1528)+x(1876)+"LJuPCq"+x(708)+"MIEpkU"+x(2374)+"MVZ5Z5"+x(1873)+x(1966)+x(1258)+x(849)+"GISGHw"+x(1066)+"mgF4ZJQTRMCy"+x(1248)+x(1688)+x(1972)+"Y2zin7"+x(1619)+x(1994)+x(2631)+x(1576)+x(790)+x(2753)+x(2602)+x(1973)+x(1433)+x(1056)+"eq23dwJPicQj"+x(2377)+x(499)+x(2707)+x(949)+x(511)+x(2429)+"qgQrnn"+x(619)+"qC2pJ2rAc97Z"+x(2813)+x(1879)+x(614)+x(995)+"eHRUhG"+x(1015)+x(2315)+x(2105)+x(1190)+x(2799)+x(1443)+"qliRwX"+x(648)+"jIKcnc"+x(1768)+x(1235)+"u+rOTsMwy6lZ"+x(1232)+x(1122)+x(662)+x(2133)+x(2122)+x(2655)+x(1478)+x(531)+x(2476)+"2d2BO7"+x(917)+"kPpcTC"+x(2589)+x(856)+x(2112)+"Knzw3L"+x(1795)+"fX6+54"+x(894)+x(1215)+"VBBaCu"+x(1091)+x(1398)+"W3FD8BAK3AwS4zpS+J7U93vu"+x(2141)+"sOjL04fMu7DF"+x(2209)+x(1680)+x(410)+x(1760)+x(352)+x(759)+x(1438)+(x(670)+x(1596)+x(2453)+x(1981)+x(1349)+x(1470)+x(1837)+x(1238)+x(945)+x(1407)+x(2460)+x(1913)+x(916))+"ASSLHd"+x(1533)+x(2440)+x(485)+x(1811)+x(1353)+x(2210)+x(1722)+x(1782)+x(1273)+x(440)+x(1114)+x(1549)+"DmE8dMe9HvD/"+x(962)+x(2742)+x(573)+x(2507)+x(1750)+"2mzggH"+x(2710)+x(2482)+x(380)+"MBZLtm"+x(559)+x(2368)+x(1348)+x(1368)+"wPDQvm"+x(952)+x(1900)+"6lJ0MZJixWO6lLO/yp"+x(2473)+x(902)+x(2286)+x(627)+x(1594)+x(2643)+x(1390)+"YpAGClUPC47A"+x(690)+x(1710)+x(2114)+x(1487)+x(2436)+x(1011)+"cGIfR6"+x(1357)+x(1380)+x(844)+x(859)+x(1420)+"40G9Tr"+x(1646)+"2285IuhXB6bzQQexez"+x(1317)+x(1384)+x(1111)+x(1321)+x(1799)+"x1UfOH"+x(957)+x(1298)+x(1565)+x(1655)+x(717)+x(2551)+x(2028)+"6lTrMz"+x(2725)+x(1665)+x(1090)+x(2246)+x(1998)+x(907)+x(1774)+x(2835)+x(2772)+x(883)+x(732)+x(1869)+x(1635)+x(1162)+"Ls+m7F"+x(1474)+x(1105)+x(2104)+x(2168)+"7z9N5o"+x(1435)+x(791)+x(1107)+x(370)+x(2784)+x(521)+x(2472)+x(1074)+"KeC3Nz"+x(2755)+x(1093)+x(1583)+x(526)+x(2574)+x(1361)+x(1454)+"MQATGivjMV9u"+x(2304)+"gDbhrd"+x(2651)+"bE3rg9"+x(1211)+x(553)+x(2077)+x(1989)+x(872)+x(407)+x(524)+x(2597)+x(564)+"eOlqay"+x(350)+"wGdln/"+x(1982)+x(948)+"hduPHl"+x(1445)+x(909)+x(1069)+x(2406)+"xZ36DbQf25u9"+x(1386)+"hfpgJ0"+x(1891)+x(1413)+x(371)+x(374)+x(1550)+"GmmRGb"+x(2812)+"E4FIF0"+x(2071)+x(1017)+x(1110)+x(1131)+x(1561)+x(900)+(x(636)+x(760)+x(2401)+x(562)+x(2699)+x(448)+x(1019))+"Y7EqBh"+x(1045)+x(1360)+x(785)+x(1297)+x(1625)+x(1777)+x(1741)+x(1609)+x(2085)+"AhgAUC"+x(501)+"yLAAEI"+x(1690)+"WTs0Z5AGgIcW"+x(2442)+x(2491)+x(2422)+x(1201)+x(1792)+x(1241)+"TecAj6"+x(502)+x(1393)+x(2536)+x(2634)+x(1512)+x(1631)+x(537)+x(1578)+"tu3h7J"+x(781)+x(2011)+x(584)+x(2614)+x(847)+x(439)+x(1780)+x(2839)+x(1532)+x(2737)+x(1489)+x(828)+x(1088)+x(1648)+x(2244)+x(1701)+x(570)+"7QEIzd"+x(1993)+x(1312)+x(2169)+"dTVXbB"+x(1281)+x(1344)+x(1725)+x(1058)+x(1323)+x(508)+x(367)+"IH5ga8"+x(1440)+x(2807)+x(623)+x(2615)+x(2604)+x(2501)+x(1817)+x(2454)+x(2723)+x(523)+x(1622)+x(871)+x(2256)+"OhPU1V"+x(1904)+x(1130)+x(2087)+x(1955)+"E/dNMG"+x(560)+x(818)+x(427)+x(1246)+x(665)+x(2563)+x(825)+x(1284)+x(1611)+x(1689)+x(920)+x(682)+"ptVLul6y1K66"+x(406)+"I+9Naw"+x(2518)+"P2pv8CHD5QBs"+x(548)+"G6A1ES"+x(527)+x(1292)+"JITT5o"+x(2495)+x(2524)+x(1745)+x(1844)+x(1096)+x(1054)+x(2724)+"zwTFK0"+x(1169)+x(1382)+"/2g3IP"+x(2073)+"DPQVGD"+x(2211)+x(2407)+x(359)+x(841)+x(1310)+x(2456)+"/IAGw8"+x(1718)+x(496)+x(2115)+x(1274)+x(393)+x(2319)+x(2387)+"e+8ctL"+x(1490)+x(2324)+x(1062)+"cPvCBA"+x(1847)+"Hw5aXbHW7QXf"+x(1827)+x(1067)+"tTDTgVvUDFAJ"+x(2350)+"e2eUlTLnii9/"+x(1660)+x(2683)+"IeZnGB"+x(2545)+x(1909)+x(1477)+x(1882)+"P+3QvgAB1aAx"+x(1113)+"hw+chr"+x(1948)+"Cyjh"+(x(1447)+x(2358)+x(2116)+x(1793)+x(951)+x(2278)+x(1515)+x(643)+x(767)+x(2067))+"ykKVk5NCsN3ybid+Qx"+x(1918)+x(2047)+x(1412)+x(673)+x(2649)+"Pu02/M"+x(1318)+x(2803)+x(1723)+x(1929)+x(622)+x(1326)+x(1952)+x(731)+x(1146)+x(429)+"0bvH2r"+x(450)+x(796)+x(1626)+x(798)+"QrC56SOr4x89IipjgH/ENu6h"+x(1970)+x(1859)+x(2531)+x(1962)+x(2196)+"CcTR2m"+x(1525)+x(976)+x(1728)+"4jUFJC"+x(1597)+x(2516)+x(2496)+x(1575)+x(2792)+x(1737)+x(2713)+x(2686)+"/ZfuugufYfmhxE9TNt"+x(2193)+x(2486)+"llRXvCMOUlIC"+x(1139)+"AqCXn1"+x(2182)+x(876)+"smG/Y2"+x(2084)+x(821)+x(2369)+x(2587)+x(1667)+x(2761)+x(2166)+"o/LmQS"+x(2645)+"2tv5uK"+x(2611)+x(454)+x(817)+x(2639)+x(519)+x(2577)+x(810)+x(1444)+x(981)+"YAEa3X"+x(1320)+x(2568)+"nkacFzJwxtyg9g0TAb1jTHoD"+x(535)+"X7Wx3M"+x(2781)+x(2661)+x(2295)+x(1861)+x(2663)+"DLAMx4YW81YP"+x(583)+x(1140)+"04gN66"+x(1516)+x(725)+x(1186)+x(1802)+x(1705)+"ZrCwpe"+x(2508)+"5ocU+n"+x(2402)+x(2528)+x(2585)+x(749)+x(605)+"cHCaD+"+x(1409)+x(1789)+"hX5wn9"+x(827)+"eBzFc1"+x(1684)+x(1283)+x(462)+x(1727)+x(1559)+"wgMZBI"+x(2136)+"wI9RrG"+x(1264)+x(2134)+x(1198)+x(2413)+"Bwpu3N"+x(2457)+x(2592)+x(1332)+x(963)+x(707)+"wFA0C2jNzH/L"+x(2108)+x(1557)+x(830)+x(1656)+x(1923)+x(975)+x(1229)+"FQC1nq"+x(522)+"BrBo5J"+x(1449)+x(394)+"xY2MUa"+x(2804)+"gP4j0I"+x(2212)+x(761)+"ZK7S1Ofb6RRX"+x(1975)+x(2308)+x(991)+(x(1702)+x(800)+x(1833))+"BfcvZ/"+x(641)+x(473)+x(2552)+x(1142)+x(2626)+x(2143)+"o6xn4I"+x(491)+x(2825)+"kvum7C"+x(1928)+"EkQWAmltL2nz"+x(2647)+x(1868)+x(1856)+x(1509)+x(1908)+"CgngKI"+x(1148)+"oAMU8j"+x(2810)+x(2132)+x(2487)+"BDXyBQ"+x(2744)+x(1945)+"9UTD0h"+x(2156)+"0JdKUN"+x(2131)+x(1603)+"igZgzL"+x(829)+x(436)+x(541)+x(1735)+x(488)+x(1571)+x(2485)+x(2546)+x(1957)+x(1383)+x(1493)+x(977)+"r+dntr"+x(2500)+"jWxPsYAPWWB+"+x(2541)+x(2280)+x(676)+"YRKU6u"+x(418)+x(2646)+"FBEwac"+x(1293)+x(2158)+x(1733)+"x8RgAJIJhmvGyssb7H"+x(1387)+x(1244)+x(345)+x(1347)+x(1686)+x(1808)+x(1100)+x(807)+x(2152)+x(2215)+x(1191)+x(2789)+"BMVBgo"+x(853)+"Ahjc2H"+x(1991)+"cxrMae"+x(1729)+"J8mmH4"+x(2808)+x(1651)+x(669)+x(716)+"cALOnz"+x(2503)+x(1553)+x(2334)+"dadlO6EkB233"+x(1784)+"kBTxTe"+x(517)+x(2055)+"wmoonh"+x(2190)+x(1569)+x(504)+x(2123)+x(1431)+x(2426)+x(2598)+"gcMAZB"+x(1742)+x(2242)+x(1121)+"sIgYDFernHzQ"+x(510)+x(2829)+x(2201)+x(382)+x(2778)+x(500)+x(2722)+x(2109)+"UpnhGh"+x(1039)+x(1539)+x(1673)+x(2550)+x(2276)+x(2205)+x(386)+x(2001)+x(624)+x(2070)+"RgDBFS"+x(1170)+x(966)+x(2527)+x(2045)+x(2330)+"rP0rt/"+x(1418)+x(495)+x(2206)+x(1602)+"35yMjNG81dTI"+x(2316)+x(1181)+x(2270)+"/ra2aW"+x(2506)+x(1639)+x(621)+"TAR1oy"+x(2396)+x(1018)+x(1327)+x(1546)+"6Vjo0M"+x(743)+x(2348)+x(2586)+x(840)+x(606)+"f2ZOhQBmT3x0"+x(464)+"Gs7+"+(x(2662)+x(2214)+x(2251)+x(2113))+"uuQHiB"+x(657)+x(1126)+x(647)+"AKrzEt"+x(1775)+"jQ08Bm"+x(1910)+x(2338)+x(1231)+x(1922)+x(2480)+"cFpuj+"+x(1831)+x(1257)+x(1267)+x(520)+"DrQOfZ"+x(1301)+"qjI7u/J/avwC"+x(398)+x(1149)+x(730)+x(2732)+"LgoCBi"+x(2393)+"Ttg/tT"+x(2400)+x(1132)+x(2619)+x(1505)+x(1338)+x(1851)+x(2363)+"6ovjWNtDgcLK"+x(1161)+x(2399)+x(430)+x(1485)+x(1830)+x(2595)+x(1591)+x(529)+x(869)+x(2547)+x(2515)+x(610)+x(2224)+x(1117)+x(765)+x(912)+x(1687)+x(2520)+x(1551)+x(634)+x(1984)+x(2366)+"6zCPOV"+x(2170)+x(1719)+x(2779)+"wsij+Q"+x(1864)+x(2458)+x(784)+x(1905)+"QcvQZA"+x(1319)+x(2682)+"/vcAxB"+x(1362)+x(2241)+"sUmzfTrA/tXT"+x(1334)+x(1220)+"bY7Kv+"+x(459)+x(1588)+x(361)+x(1788)+x(1453)+x(1303)+"GJ4T89"+x(1316)+x(1151)+x(1624)+x(2380)+"31dXr4LwDV9fq9Wp4Q"+x(736)+x(2636)+"F/IDkG"+x(2452)+x(689)+x(2216)+"2/CODPqrNQpP6K3F9f"+x(1057)+x(2688)+x(1926)+x(1031)+"FeTh5A"+x(774)+x(2265)+x(599)+x(695)+x(422)+x(2408)+x(931)+"hIPy1F"+x(1479)+x(2657)+x(2666)+x(1282)+"vrH7m6"+x(2693)+"gEWnxB"+x(2499)+"sAgGw4"+x(1593)+"ryjovf"+x(998)+x(2828)+x(2425)+x(819)+x(628)+x(1457)+x(2397)+x(1225)+x(1315)+"fgf0t0S/b/dPWkKs+i"+x(2733)+x(2094)+"QqwTfJ"+x(721)+x(1226)+x(2213)+x(2135)+x(1213)+x(1369)+"kpY/9jy/8pAE"+x(2328)+"ayGvczrEmsIG"+x(941)+x(545)+x(2715)+"C+f6Ir"+x(1461)+x(2562)+x(391)+x(2606)+x(2584)+"ZpK9U05HO7xdJ2Kx"+x(611)+x(567)+x(1078)+"UqmE04"+x(2231)+x(1141)+x(1302)+"j4B6wl"+x(990)+x(780)+x(852)+x(2228)+x(1286)+x(924)+x(1785)+"Fve8A3"+x(2217)+x(563)+x(1629)+"xj/LXt"+x(2449)+x(2099)+x(2258)+x(348)+x(2747)+x(971)+x(890)+x(1536)+x(1086)+x(2692)+x(1652)+x(885)+"+07gRg"+x(2816)+x(1636)+"3LRJ7i"+x(2564)+x(942)+x(1188)+x(381)+"ptkX/f"+x(1610)+x(846)+x(1378)+x(1375)+x(1175)+"19BAAI"+x(895)+x(2030)+"38wai5"+x(1192)+x(2814)+x(1507)+x(758)+x(481)+x(808)+x(1156)+x(1865)+"IAUCJ8"+x(1104)+"93b/KP"+x(1364)+x(875)+x(1197)+x(2357)+"S7flfQ"+x(1541)+x(631)+x(1669)+x(812)+x(1411)+x(686)+"HYvsM+"+x(2659)+x(891)+x(727)+x(887)+x(2373)+x(2635)+x(1654)+x(1365)+x(2489)+x(1920)+"G1GQQRh8G4AO"+x(625)+x(2583)+x(1208)+x(1987)+"dsIoz8"+x(833)+x(1270)+"38TdUf"+x(1439)+x(369)+x(2296)+x(733)+"NgB/Ju"+x(2079)+x(1650)+x(2271)+x(1247)+x(1604)+x(1043)+"NvswHIRGuFQKZ8h00W"+x(996)+x(1638)+x(1835)+x(1010)+x(1829)+x(642)+x(1748)+x(1047)+"BmQjPBTE9tuS"+x(1854)+x(1755)+x(2181)+x(804)+x(2712)+x(2771)+x(2392)+x(469)+x(2590)+x(1488)+x(1805)+x(1628)+"VE2a1T"+x(692)+x(2048)+x(2207)+x(1183)+x(1168)+x(1187)+"vkdPyB70vm2F"+x(1944)+"4PN7EK/9zBDM"+x(1442)+x(2505)+"nGJSyp"+x(2502)+x(2197)+x(2451)+x(744)+x(2750)+x(1615)+"UvbVjA"+x(913)+"c4oW+rBwjBiu"+x(571)+"Hs3t/b"+x(1592)+"UWpOJi"+x(2326)+x(2820)+x(1494)+"azXlJ2"+x(2641)+x(2237)+"kTl2ratVpt"+(x(616)+x(1697)+x(423)+x(2376)+x(1024)+x(1352))+"DqqPBk"+x(888)+x(1115)+x(550)+x(2297)+x(453)+x(1261)+x(2331)+x(1075)+x(426)+x(1026)+"+/k0lQ"+x(1275)+x(1641)+"BDrkSG"+x(2161)+x(2110)+"GXDvyp"+x(2811)+x(663)+x(441)+x(854)+"2KZ/qqGY0YUA"+x(1791)+x(1937)+x(1400)+"8XAlDp"+x(980)+x(431)+"fQ8p9xct4GIA"+x(1950)+x(1522)+x(1042)+x(2009)+"SwH40x"+x(2381)+x(2403)+x(2180)+x(1228)+x(2756)+x(2735)+x(2522)+x(2351)+"OA1/oE"+x(691)+x(2764)+"/yUB/JmUWi7jOwOgVD"+x(1582)+x(855)+x(724)+"9YXuNg"+x(569)+x(1671)+x(2783)+x(2327)+"FiAI71"+x(2690)+x(2736)+x(1468)+x(1087)+x(1068)+x(1738)+"f/7z9xdUZ07R"+x(565)+"2ET9Hl"+x(2095)+x(1339)+"JHtUFw"+x(1979)+"5/jrLZIuC+Cf"+x(1040)+x(946)+x(2269)+"jOz8j/"+x(1566)+x(803)+x(1032)+x(1587)+x(1814)+x(1678)+x(534)+x(893)+x(2718)+"kd+WN0"+x(2192)+x(671)+x(1607)+"cLAtAJwDlX+x"+x(2748)+x(1287)+x(1269)+x(412)+x(612)+x(1661)+"AP0eUA"+x(1337)+"/zJ3Df"+x(1527)+x(1004)+x(1894)+"uXBIBx"+x(839)+"tyANQ4"+x(2833)+x(706)+x(1853)+"4njl0a"+x(1867)+"UBfE8c"+x(1417)+"ljF2xs"+x(680)+"iA74pj"+x(1662)+x(435)+"KY5dGM"+x(1376)+"AHxTHLswgMvH"+x(2385)+x(1699)+x(576)+x(1739)+x(1713)+"2OXQzA"+x(2766)+x(2020)+x(390)+x(794)+x(1590)+"9N/wdEfTf6uv"+x(718)+x(1933)+x(1574)+x(1535)}};function rt(t){var e=x;window[e(1810)+e(2340)]?window[e(1810)+e(2340)](t):0<C[e(457)]&&(t?C[e(1706)]():C[e(1176)]())}function at(t,e){var i=x,r=i(2593)+'ass="n'+i(2579)+"m drop"+i(1483)+i(1125)+'ss="na'+i(2312)+i(2548)+i(2653)+"ggle active "+i(1552)+i(512)+i(2730)+i(598)+'own" r'+i(922)+i(1127)+i(2124)+i(693)+'gle="dropdown" ari'+i(2537)+'nded="'+i(704)+">"+t+(i(926)+i(1072)+i(1885))+"pdown-"+i(2490)+i(2727)+i(1471)+i(460)+i(1815)+i(1065)+i(1354);return $.each(e,function(t,e){var n=i;e[n(2186)]&&(r+="<li><a"+n(626)+'="drop'+n(362)+'tem" t'+n(868)+'"_blan'+n(2282)+'f="'+st(e[n(2186)])+'">'+e[n(601)]+"</a></li>")}),r+=i(556)+i(793)}function ot(t){var i=x;-1!==t[i(601)][i(1524)+"f"]("")&&(t.title=t[i(601)][i(2160)+"e"](i(355),"")+"");var r=i(2129)+'lass="col mb'+i(1823)+i(1924)+'"'+(t.id?i(2361)+t.id+'"':"")+"><div "+i(1508)+'"card '+i(2303)+i(726)+(t[i(2484)+i(903)]||"")+">"+(t.title_url?i(1441)+i(1621)+i(1265)+i(1819)+'"'+st(t[i(2484)+"url"])+i(1953)+'s="link-secondary"'+i(968)+"56;&#22810;&"+i(2685)+i(2420):"")+i(402)+t[i(601)]+(i(2630)+i(993));switch(t[i(792)]&&(r+=t.desc),typeof t[i(484)]){case i(1023):r+=t[i(484)];break;case i(1902):r+=i(373)+(t[i(1806)+"p"]||"")+">",$[i(687)](t[i(484)],function(t,e){var n=i;r+=n(561)+n(452)+'t="_bl'+n(2018)+n(1035)+(e[n(2186)]?st(e[n(2186)]):n(2332)+n(1029))+'"'+(e[n(2027)]?' data-vid="'+e[n(2027)]+(n(1953)+n(2172))+'"':"")+">"+e[n(601)]+n(2684)+"li>"}),r+=i(1849)}return r+=i(2240)+i(2240)}function st(t){var e=x;if(N&&t&&"/"==t[e(1720)](0,1)){var n=(t=N+t)[e(1083)](/^https?:\/\/([^\?]+)\?(\w{2})\w{2}$/);n&&(t+=r(n[1]+n[2],!1)[e(1720)](0,6))}return t}function lt(t){return t[x(2160)+"e"](/(href=\\?['"]?)(\/)/g,"$1"+N+"$2")}function ct(){var r=x;function i(t){var e=r;if(t[e(2186)]&&"/"==t[e(2186)].substr(0,1))return 1;if(t[e(1683)]&&"/"==t.file.substr(0,1))return 1;if(t[e(484)])for(var n=0;n<t[e(484)][e(457)];n++)if(e(1379)!=e(1379))_0x264732[e(1425)](_0x5a8c32),_0x59fe1a.show(),_0x437542&&_0x334b63(_0x313ca8),_0x5ae42f=_0x4677ac(function(){_0x12818(_0x18add5),_0x4db9e0=null,_0x54aae8()},3e3);else{var i=t[e(484)][n];if("string"==typeof i&&"/"==i[e(1720)](0,1))return 1;if(e(1902)==typeof i){if(!i[e(2186)]&&!i[e(1683)])return 1;if(i[e(2186)]&&"/"==i[e(2186)][e(1720)](0,1))return 1;if(i.file&&"/"==i[e(1683)][e(1720)](0,1))return 1}}}if(U[r(694)]&&(P=!0),$[r(687)](U,function(t,e){var n=r;n(694)!=t&&0!=e[n(457)]||delete U[t]}),P&&dt("",U),U.media&&(K=!0,window[r(1084)+"edia"]&&window[r(1084)+r(1716)](U[r(586)]),$.each(U[r(586)],function(t,e){var n=r;i(e)||(F[n(938)+t]=e)})),U.m_data&&(J=[],$[r(687)](U[r(1119)],function(t,e){var n=r;i(e)||J[n(2827)](at(e.title,e[n(484)]))}),0==J[r(457)]?J=null:$(r(2225))[r(2281)](J[r(581)]("\n"))),U[r(1329)])if(R=[],$[r(687)](U.b_data,function(t,e){var n=r;i(e)||R[n(2827)](ot({title:e[n(601)],title_url:e[n(2186)],title_prop:(e.css?n(1392)+'="'+e.css+'"':"")+(e[n(2186)]?n(626)+'="nopa'+n(2650)+n(919)+n(935):""),list:e[n(484)]}))}),0==R.length)R=null;else{var t=r(2007)+r(904)+"-1";switch(R[r(457)]){case 1:break;case 2:t+=r(2623)+r(2544)+"-2";break;case 3:t+=r(2623)+r(2544)+r(2254)+r(1463)+"xl-3";break;case 4:t+=r(2623)+r(2544)+r(2175)+"-cols-"+r(1564);break;case 5:t+=r(2623)+r(2544)+r(2175)+"-cols-"+r(2459);break;default:t+=r(2623)+r(2544)+r(2175)+"-cols-"+r(776)}var e=R[r(581)]("");if(window[r(387)+r(958)+"ntent"]){var n=BeforeShowContent(e);null!==n&&(e=n)}$(r(675)+"ad")[r(615)](e),$("#preload")[r(1640)](r(2706),t)}}function dt(){console[x(1342)].apply(this,arguments)}function ut(t){var s=x;if(t&&z)if(s(997)==s(997)){L=!0;var e,r=[],l=[],i=[],n=null;if(F=[],z[s(2342)]&&z[s(2342)][s(1434)]&&(n=z[s(2342)][s(1434)],delete z[s(2342)].tui),$[s(687)](z[s(2014)],function(t,e){var n=s;!e.list&&e[n(1425)]&&(i[n(2827)](ot({title:e.site_title,title_url:e.site_url,list:lt(e.text)})),delete z[n(2014)][t])}),(U=U||{})[s(2702)+"r"]?(f=U[s(2702)+"r"],P&&dt(s(2310)+""+JSON[s(1023)+"ify"](f))):(f=[s(2786)].concat(h(z[s(2342)])),P&&dt(""+JSON[s(1023)+s(838)](f))),U[s(2353)+"r"]?(a=U[s(2353)+"r"],P&&dt(s(911)+""+JSON[s(1023)+"ify"](a))):(a=["custom","tv",s(1234)][s(2532)](h(z.news),h(z[s(2342)])),P&&dt(s(1145)+""+JSON[s(1023)+"ify"](a))),U[s(586)]&&$[s(687)](U[s(586)],function(t,e){F[s(938)+t]=e}),$[s(687)](f,function(t,e){var i=s;i(2786)==e?U[i(1119)]&&$[i(687)](U[i(1119)],function(t,e){var n=i;r[n(2827)](at(e[n(601)],e[n(484)]))}):z.links[e]&&(e=z[i(2342)][e],r.push(at(e[i(1763)],e[i(484)])))}),$[s(687)](a,function(t,i){var r=s;if(r(2786)==i&&U[r(1329)])$.each(U.b_data,function(t,e){var n=r;l[n(2827)](ot({id:"n_"+i,title:e[n(601)],title_url:e[n(2186)],title_prop:(e[n(1519)]?n(1392)+'="'+e.css+'"':"")+(e[n(2186)]?n(626)+n(2238)+n(2650)+n(919)+n(935):""),list:e.list}))});else if("tv"==i){if(v(n=z.tv||z[r(1276)]))return!0;K=!0,F.tv={title:r(2493)+"",image:st(r(2497)+r(2632)+"jpg"),file:st(n.url),type:r(1822)},l.push(ot({id:"n_"+i,title:r(2493)+"",desc:"<div s"+r(2822)+r(2309)+"on:rel"+r(1890)+'"><a c'+r(1144)+r(2832)+"n-warn"+r(1377)+r(1758)+r(1757)+r(1736)+r(1496)+r(1740)+'ata-vid="tv"'+r(1778)+r(972)+r(1798),list:"<ul id"+r(2658)+r(667)+n[r(1128)+"le"]+r(1849),ul_prop:" style"+r(409)+r(2745)+';"'}))}else if(r(1234)!=i||v(z[r(1234)])){if(z.news[i]){if((e=z[r(2014)][i])[r(484)]){var a=Math[r(2674)](10,10)-1,o=[];$.each(e[r(484)],function(t,e){var n=r,i={};i[n(601)]=e[n(601)],i.url=st(e.url),e[n(880)]&&!E&&(K=!0,i[n(2027)]="n"+function(t,e){for(var n=x,i=0,r=0;r<t.length;r++)i=37*i+t[n(2638)+n(552)](r),i%=e;return i}(e[n(880)],a)[n(2292)+"ng"](36),F[i[n(2027)]]={title:i[n(601)],file:e[n(880)]}),o[n(2827)](i)}),l[r(2827)](ot({id:"n_"+i,title:e[r(2704)+r(2005)],title_url:e[r(2513)+"rl"],list:o,type:"mp4"}))}}else if(z[r(2342)][i]){var e=z.links[i];l[r(2827)](ot({id:"n_"+i,title:e[r(1763)],title_url:e.url,list:e[r(484)],ul_prop:2==e.col?r(626)+'="col2"':""}))}}else{K=!0;var n=z[r(1234)][r(1027)](0,3)[r(2532)](z[r(1234)][r(1027)](3)[r(1044)+"e"]().slice(0,6));o=r(2129)+r(1144)+r(788)+r(851)+r(1061)+r(2824)+'div class="row g-2">';$[r(687)](n,function(t,e){var n=r;F["v"+t]=e,o+=n(2129)+n(1144)+"col-md"+n(2793)+n(1917)+(8==t?n(1416)+n(1033)+n(1325):"")+(n(921)+n(1807))+"iv cla"+n(679)+"g-thumbnail "+n(2204)+n(1180)+n(2738)+n(1544)+'c="'+st(e[n(357)])+n(645)+'"'+e[n(601)]+(n(1964)+n(2739)+n(1144))+"title "+n(701)+n(1499)+n(1866)+n(2050)+(e.url?'" href="'+st(e[n(2186)])+'" targ'+n(1935)+n(421):n(2138)+n(2836)+'javascript:" data-'+n(477)+t+'"')+">"+e.title+(n(2684)+n(961))}),o+=r(2240)+r(2240),l[r(2827)](ot({id:"n_"+i,title:r(1212),title_url:z.videourl||r(2434)+"/",title_prop:r(626)+r(2238)+r(2650)+"havemo"+r(935),list:o}))}}),0<r[s(457)]&&$(s(2225))[s(615)](r[s(581)]("\n")),0<l[s(457)]){$(s(675)+"ad")[s(1843)](),!window[s(387)+s(958)+"ntent"]&&6<l.length&&0<l[s(457)]%6&&(f=l[s(457)]-l[s(457)]%6,l=l[s(1027)](0,f));var a,o=l[s(581)]("\n");if(window[s(387)+"ShowCo"+s(2404)])null!==(a=BeforeShowContent(o))&&(o=a);$(s(2795)+"nt").html(o),$("#content")[s(1843)+"Class"](s(2714))}if(z[s(712)]){var c,d=z[s(712)];for(c in d)try{if("bVbNT"===s(1850))window[s(2318)](d[c]);else{var u=this;this[s(2652)+"nt"][s(2033)][s(2767)+"y"]=s(516),this[s(2652)+"nt"][s(2517)+"ribute"](s(2609)+s(2823),!0),this[s(2652)+"nt"][s(1843)+s(1165)+s(1394)]("aria-modal"),this._element[s(1843)+s(1165)+"ute"]("role"),this[s(1531)+"nsitioning"]=!1,this[s(1427)+"ackdrop"](function(){var t=s;_0x4928ea(_0x2f8a15[t(1893)])[t(1843)+t(742)](_0x4c6722),u[t(1715)+t(2512)+t(1977)](),u[t(1715)+t(2797)+t(2362)](),_0x112009(u[t(2652)+"nt"])[t(2570)+"r"]("hidden"+t(1147)+"dal")})}}catch(t){}delete z[s(712)]}if(n){var f=st(n.url);window[s(486)+"ui"]?window[s(486)+"ui"](f):($("h4",q).html(n[s(1763)]),V[s(1260)]=f,q[s(1843)+"Class"](s(2714)))}0<i[s(457)]&&($(s(617)+"s")[s(615)](i[s(581)]("\n")),$("#others")[s(1843)+s(742)](s(2714))),K&&$(s(2795)+s(1744)+"id")[s(797)](function(t){var e=s;if(e(493)==e(493)){var n=$(this)[e(1800)](e(2027));if(n&&F[n])return showModalPlayer(function(t){var i=x,e={};e.title=t.title,t[i(357)]&&(e[i(357)]=st(t[i(357)]));var r=ft(t[i(1915)]),n=t[i(1395)+"st"]||t[i(484)];if(!t[i(1683)]&&n&&1==n[i(457)]&&(t.file=n[0]),t[i(1683)])r=r||ft(t[i(1683)]),e[i(1683)]=st(t[i(1683)]);else if(n&&1<n[i(457)]){var a=[],o=[];$[i(687)](n,function(t,e){var n=i;"string"==typeof e?(r=r||ft(e),a[n(2827)](st(e))):(r=r||ft(e.file),o[n(2827)]({title:e[n(601)],file:st(e.file)}))}),0<o[i(457)]?e[i(1395)+"st"]=o:e[i(649)]=a}return e[i(1915)]=r||ft(i(2187)),e}(F[n])),!1}else _0x4b7a9a(_0x5d7738)||(_0x3c97d0[e(938)+_0x1d1ff4]=_0x1d0dce)}),z[s(1425)]&&z[s(1425)].notice&&($(s(1372)+"e").html(lt(z.text.notice)),$(s(1372)+"e").closest(".alert")[s(1843)+s(742)](s(2714))),1===(a=$(s(594))).length&&(location.href.match(/^https?:\/\/\w+\.github\.io\//)?(e=location.href.replace(/#.*$/,""),E&&(e+=s(1691))):(n=a[s(1640)](s(1005)))&&n.match(/^https?:\/\//)?(e=n,a[s(1425)](e)):n&&"/"==n[s(1720)](0,1)?(e=t+n,a[s(1425)](e)):e=E?t+"/Eio3n":t+s(2004),o=s(2129)+s(1144)+s(2782)+s(408)+s(1410)+s(646)+s(483)+'lass="'+s(1159)+"<butto"+s(2780)+'s="btn'+s(2519)+"econdary btn"+s(1153)+s(1423)+s(1127)+s(1481)+s(572)+"pan cl"+s(2805)+"pinner"+s(2628)+'r"></s'+s(2043)+s(2588)+s(585)+s(1410)+s(1508)+s(1178)+"black-"+s(1155)+'1"><a '+s(2836)+e+(s(2624)+s(1935)+s(1203))+e+(s(2684)+s(2705)+s(1154)+s(2468)+s(1862)+s(927)+s(1960)+s(2320)+s(653)+s(1367)+s(443)+s(1832)+s(1637)+s(836)+s(626))+'="text'+s(934)+s(1070)+"mall m"+s(2072)+""+s(1903)+s(2836)+t+(s(2259)+s(2624)+s(2040)+s(824)+s(626)+s(850)+s(2333)+s(1931)+s(1205)+s(633)+s(2150)+s(388)+s(2417)),a[s(797)](function(){var t=s;window[t(914)+t(2800)+"rt"]&&showModalAlert("",o,!1),vt(t(1860),e),$(t(363)).attr(t(601),"")})),O&&(navigator["userAg"+s(639)+"a"]?navigator["userAg"+s(639)+"a"][s(2560)]||At():$.os.phone||At())}else 15<(_0x362856=_0x5b251e[s(2250)+s(2371)+"me"]())&&(_0x3f49ee-=3),!_0x368019()&&(_0x58b9c5(".player-erro"+s(2580)+"en__ti"+s(1150))[s(615)](s(2687)+""),_0x2fc1ff(s(2469)+s(1081)+"r-scre"+s(764)+"ssage,"+s(1006)+s(1580)+s(2356)+s(1279)+s(2080))[s(1843)](),_0x3bbd71(s(2469)+s(1081)+s(2580)+s(365)+s(1050)+"vg").css({width:s(1177),height:s(1177)}))}function ft(t){var e=x;return t?t.match(/^\w+$/)?t:(t=t[e(1083)](/^[^\?]+\.(\w+)(\?|$)/))?t[1]:null:null}function ht(t){var a=x;if(t)try{if("CSNok"!==a(1874)){if("string"==typeof t)(t=$[a(2395)](t))[a(1083)](/^[\[\{]/)||(t=A[a(536)](t[a(2160)+"e"](/[\r\n]+/g,""))),U=JSON[a(2464)](t),ct();else if(a(1902)==typeof t&&!v(t)){if("gJfcn"===a(1135))return _0x34825d["charCo"+a(552)](_0xe1b2d8);U=t,ct()}}else{var e=[][a(1027)][a(2648)](_0x33e6b0[a(1581)+a(842)+a(1677)](_0xef7dde)),n=[].slice.call(_0x28ae6c[a(1581)+a(842)+a(1677)](_0x89b59a));_0x27f976(e)[a(687)](function(t,e){var n=a,i=e[n(2033)].paddingRight,r=_0x5d925e(e).css(n(2728)+n(2819)+"t");_0x3c5682(e).data("paddin"+n(2819)+"t",i).css(n(2728)+"g-right",_0x594d3f(r)+_0x1a5191[n(2581)+n(2637)+n(779)]+"px")}),_0x44b54e(n).each(function(t,e){var n=a,i=e[n(2033)][n(1421)+"Right"],r=_0x346725(e).css(n(1421)+n(1949));_0x276e2b(e)[n(1800)](n(1421)+"-right",i).css("margin"+n(1949),_0x3c4b6c(r)-_0xaa4e0c[n(2581)+n(2637)+n(779)]+"px")}),e=_0x5076d3[a(1893)][a(2033)][a(2728)+a(1157)],n=_0xf290ab(_0x1aaf9b[a(1893)]).css("paddin"+a(2819)+"t"),_0x46c8a4(_0x5f49b6[a(1893)])[a(1800)]("padding-right",e)[a(1519)](a(2728)+a(2819)+"t",_0x2e353e(n)+this[a(2581)+"lbarWi"+a(779)]+"px")}}catch(t){U=null,dt(t)}}function vt(t,e){var n=x;window.QRCode&&(Y[t]&&Y[t][n(2525)](),$("#"+t)[n(2633)](),Y[t]=new QRCode(document.getElementById(t),{text:e,width:o,height:o,colorDark:n(2441)+"0",colorLight:n(538)+"f",correctLevel:QRCode["Correc"+n(979)].L}))}function At(){var a=x;$(a(1097)+a(1385)).on(a(1786)+a(397),function(){var t=a,e=$(this).prop(t(1840));if(e&&-1===e[t(1524)+"f"](t(455)+"/")){vt(t(509),e);var n=$(window)[t(1263)](),i=$(window)[t(2188)](),r=$(this)[t(656)]();n=r.left+o<=n?r[t(1003)]:r[t(1003)]+r[t(1263)]-o-10,i=r[t(1109)]+r[t(2188)]+10+o<i?r[t(1109)]+r[t(2188)]+10:r[t(1109)]-o-20;e&&$(t(1116)+"e")[t(1519)]({left:n,top:i})[t(1706)]()}}).on(a(1754)+"eave",function(){$(a(1116)+"e").hide()})}function pt(){!$.os.ios&&(I=+new Date,B=setInterval(function(){var t=a0_0x2571;N?(gt(),D.text(t(2791))[t(1640)](t(1840),N+"/cTDaH")[t(1706)]()):3e4<+new Date-I&&gt()},5e3))}function gt(){B&&(clearInterval(B),B=null)}function xt(t,e){var n=x;for(var i in H)try{if(n(1436)===n(2252))switch(_0xb55142){case n(2187):return n(1663)+n(2187);case"webm":return n(1663)+n(1331);case n(1822):return n(2554)+n(1676)+"vnd.ap"+n(2578)+n(1233);default:return n(1663)+n(2187)}else{var r=H[i];if(t&&r===t)return i;if(e&&r[n(2178)+n(2840)+"w"]===e)return i}}catch(t){}return-1}function mt(t){var e=x;if("OyTdP"===e(595))if(e(1137)==location.protocol&&t.match(/^http:/))_t();else{var n=null,i=null,r=function(t){i&&(clearTimeout(i),i=null),i=setTimeout(function(){var t=a0_0x2571,e=xt(n,i=null);if(-1!=e){try{delete H[e],document[t(1893)][t(1843)+t(2090)](n)}catch(t){}y--,_t()}},1e3*t)};(n=document[e(1492)+e(2025)+"t"](e(1217)))[e(2033)].display="none",n[e(1260)]=t,$(n).on(e(1912),function(){r(10),_t()}),_--,y++;try{document[e(1893)][e(2281)+e(2090)](n),H[e(2827)](n),r(15)}catch(t){y--,_t()}}else{var a=_0x6a8c31(_0x1a13eb,_0x38dd35),o=(o<<_0x226f45)+(a<256?_0x118e2c[a]:-1);for(_0x6388ce+=_0x4be9d3;_0x3710df<=_0x11d7d6;){var s=o>>(_0x4678e7-=_0x55510d);_0x59ef4b+=_0x24cbcb[e(1542)](s),o^=s<<_0x5ec4a4}++_0x4ce05d}}function wt(d){var u=x,n=r(l,!1)[u(1720)](0,8),t=(i=r(n+d,!0))[u(1720)](0,6),e=i.substr(6,2),i=i.substr(8,6),f=z?0<m.length||0<w[u(457)]?0:3:E?6:5;t=[d,u(2497)+"s/",t,"/",e,"/",f,i,u(543),"?",!k||5!=f&&6!=f?"":k+"-",Math[u(1947)](+new Date/3e5)][u(581)]("");f[u(2292)+"ng"](),_--,$.ajax({url:t,dataType:"text",cache:!0,crossDomain:!0,headers:{Accept:u(1668)+u(1681)+u(756)},timeout:0==f?5e3:1e4,beforeSend:function(t){var e=u;y++,W&&t["setReq"+e(1513)+e(752)]("Token",n)},success:function(t,e,n){var i=u;if(i(558)!=i(558)){for(var r in _0x5e41ee){var a;if((a=_0x113578[r])&&i(1902)==typeof a&&1===a[0]&&!0===a[1])return _0x3264bc.push(r),void _0x5dce9d()}_0x351ef9&&_0x183f93[i(1843)+i(2678)](_0x32e3ed),_0x1f8f86()}else if(0<f&&t&&10<t[i(457)]){t=JSON[i(2464)](A.de(t[i(1720)](6),!0)),C.hide(),""===b&&(g[d]=[1,!0],w[i(2827)](d));var o=t[i(2173)];if(o){o[i(1044)+"e"]();for(var s=0;s<o[i(457)];s++){var l=o[s];if(l){var c=l[i(1083)](/^(https?:\/\/)?([\w\.\:]+)\/?$/);c&&(l=c[1]?c[1]+c[2]:"http://"+c[2],!g[l]&&(g[l]=[1,null],m[i(2827)](l)))}}}g[d]&&(g[d][1]=!0,1==g[d][0]&&-1==w[i(1524)+"f"](d)&&w[i(2827)](d)),t[i(2014)]&&(z=t),g[d]&&(g[d][1]=!0,0<m[i(457)]&&-1==w.indexOf(d)&&w[i(2827)](d))}else i(1668)+"gif"==n["getRes"+i(940)+i(2773)](i(1171)+i(845))&&g[d]&&(g[d][1]=!0,1==g[d][0]&&-1==w[i(1524)+"f"](d)&&w[i(2827)](d))},error:function(t){var e=u;404==t[e(802)]&&e(1668)+e(1825)==t[e(591)+e(940)+e(2773)](e(1171)+e(845))&&g[d]&&(g[d][1]=!0,1==g[d][0]&&-1==w.indexOf(d)&&w[e(2827)](d))},complete:function(t){var e=u;e(1555)!==e(420)?(y--,g[d]&&null===g[d][1]&&(g[d][1]=!1),_t()):(_0x37b448[e(2652)+"nt"][e(1606)+e(799)][e(1843)](_0x54c5d5),_0x18b9c5||_0x25d092(_0x4d08dc[e(2652)+"nt"])[e(1925)](_0x155914[e(1053)+e(1163)+"ND"],function(){var t=e;_0x3cfed1[t(2652)+"nt"].style[t(2838)+t(1901)]=""})[e(2098)+"eTrans"+e(2421)+"nd"](_0x3e2ae4[e(2652)+"nt"],_0x13cd47))}})}function bt(t){for(var e=x,n=!1;y<2&&0<t[e(457)];){var i=t[e(1071)]();i[e(1083)](/^(https?:\/\/[\w\.:-]+)$/)?(n=!0,wt(i)):i[e(1083)](/^(https?:\/\/[\w\.:-]+\/)/)&&(n=!0,mt(i))}n||_t()}function _t(){var t=x;if(b){var e=b;b="",wt(e)}if(0==u[t(457)]&&0==m.length&&0==w[t(457)]&&y<=0&&0<S.length)if(t(2533)===t(1880))404==_0x344dbf[t(802)]&&t(1668)+t(1825)==_0x1d05d1[t(591)+t(940)+t(2773)](t(1171)+t(845))&&_0x4656e9[_0x3043f7]&&(_0x29ee1b[_0x3e3ee9][1]=!0,1==_0x2cfad5[_0x36697d][0]&&-1==_0xdadf78[t(1524)+"f"](_0x3569ca)&&_0x1d5737[t(2827)](_0x20b0ac));else if("1"==(e=S[t(1071)]())&&Q){var n=Q,i=(Q="",/^https?:/),r=n[t(1262)](",")[t(1044)+"e"]()[t(1027)](0,3);if(0==r[t(457)])return void _t();for(var a=0;a<r[t(457)];a++)(l=r[a])&&(l[t(1083)](i)?Z&&(l=l[t(2160)+"e"](/^http:/,t(1137))):l=(Z?t(1137)+"//":t(2492)+"/")+l,!g[l]&&(g[l]=[0,null],u[t(2827)](l)))}else{if(!("2"==e&&0<et[t(457)]))return void _t();nt=et[t(1044)+"e"]()[t(1027)](0,3)}if(0<w[t(457)]&&(rt(0),z&&!N&&(N=w[0],window[t(2483)+"ite"]&&FoundSite(N),$(t(594))[t(1425)](N)[t(1567)+"ss"]("link_qr").attr(t(601),t(2601)+t(1589))[t(1706)](),ut(N)),w.length>=f)){if(c){var o=[];for(s in g)!(l=g[s])||t(1902)!=typeof l||1!==l[0]||!0!==l[1]&&null!==l[1]||o[t(2827)](s);localStorage[t(918)+"m"](d,A.en2(o[t(1027)](0,15)[t(581)](",")))}}else if(0<m.length&&0<_)rt(1),bt(m);else if(!(0<y))if(0<u[t(457)]&&0<_)rt(1),bt(u);else if(0<nt.length&&0<_)rt(1),function a(){var o=x,t="";if(0<nt[o(457)]){var e=nt[o(1071)]();e&&(t=A[o(536)](e))}if(t)try{$.ajax({url:t,dataType:o(2017),cache:!1,crossDomain:!0,headers:{Accept:o(2554)+"ation/"+o(2332)+o(702)},timeout:1e4,success:function(t){var e=o;if(t&&(nt=[]),t=t[e(2160)+"e"](e(714)+e(1965)+e(1255),""),(t=$[e(2339)+e(652)](t))&&t.domain&&t[e(1e3)].value&&0<t[e(1e3)][e(2567)][e(457)]){var n=t[e(1e3)].value;t.domain.fq&&-1===n[e(1524)+"f"](t[e(1e3)].fq)&&n.push(t[e(1e3)].fq),n.shuffle();for(var i=0;i<n[e(457)];i++){var r=A[e(536)](n[i]);r.match(/^https?:/)?Z&&(r=r[e(2160)+"e"](/^http:/,e(1137))):r=(Z?"https://":e(2492)+"/")+r,!g[r]&&(g[r]=[1,null],m[e(2827)](r))}}(0<m[e(457)]?_t:a)()},error:function(t){a()},complete:function(t){}})}catch(t){a()}else nt=[],_t()}();else if(0==w[t(457)]){for(var s in g){var l;if((l=g[s])&&t(1902)==typeof l&&1===l[0]&&!0===l[1])return w.push(s),void _t()}c&&localStorage[t(1843)+"Item"](d),function(t){var e=x;X&&!t||(rt(0),gt(),X=!0,window[e(1794)+e(2700)]?window[e(1794)+e(2700)]():!G||j||U||"file:"!=location[e(1498)+"ol"]&&!navigator[e(551)]?($(e(594))[e(615)](e(1526)),window["showMo"+e(2800)+"rt"]&&showModalAlert("",e(741)+e(1579)+"p>",!0)):($("#node").html(e(1526)),window[e(914)+e(2800)+"rt"]&&showModalAlert(e(1526),e(741)+e(2311)+"br>"+e(837)+e(1995)+e(2437)+e(1035)+G+e(1953)+'s="tooltip-t'+e(2128)+e(868)+e(2741)+e(1848)+G+e(2684)+"p>",!0)))}()}}if(T&&(c&&x(2235)+x(2053)+"r"in navigator&&(Z||x(715)+"ost"==location[x(928)])?(function(){var t=x;function n(r,a){var o=a0_0x2571;r.match(s+a)[o(666)](function(t){var e=o;if(!t){var n=(t=it[a]).content,i=n.length;n=-1!==t.type[e(1524)+"f"](e(1668))?function(t){for(var e=x,n=new ArrayBuffer(t[e(457)]),i=new Uint8Array(n),r=0,a=t[e(457)];r<a;r++)i[r]=t["charCo"+e(552)](r);return n}(A.de(n)):n,r[e(2435)](s+a,new Response(n,{status:200,statusText:"OK",headers:{"Content-Type":t[e(1915)],"Content-Length":i}}))}})}var s=location[t(445)+"me"][t(2160)+"e"](/\/[^\/]+$/,"/");caches[t(1256)](i)[t(666)](function(t){for(var e in it)n(t,e)})}(),function(){var n=x;if("hThrW"!==n(2039)){var i=this;_0x37a764(this[n(2652)+"nt"]).on(_0x5885c9,function(t){var e=n;t["preven"+e(992)+"lt"](),t[e(2e3)+"opagation"](),i[e(2059)]()}),_0x41e5f9(_0x125287).on(_0x31bd16,function(){i[n(1176)]()})}else window["addEventList"+n(866)](n(1912),function(){var i=n;navigator.serviceWorker[i(1959)+i(2372)+i(1517)]()[i(666)](function(t){var e=i;0<t[e(457)]&&(0<D[e(457)]&&pt(),$("head")[e(2281)](e(2117)+e(1036)+e(1570)+e(2642)+e(1899)+e(2656)+e(2412)+e(2117)+'rel="icon" h'+e(644)+e(2539)+'.png" type="'+e(1668)+e(480)+e(1842)+"k rel="+e(2355)+e(1554)+'-icon"'+e(1819)+e(2681)+e(1963)))}),navigator["servic"+i(2053)+"r"][i(709)+"er"]("sw.js")[i(666)](function(t){})[i(956)](function(t){}),0<D[i(457)]&&(window["addEve"+i(2127)+i(866)](i(2751)+"instal"+i(2605)+"t",function(t){var e=i;t[e(2149)+e(992)+"lt"](),gt();var n=t;D.text(e(1818)),D[e(1706)](),D[e(797)](function(){var t=e;null!==n&&(t(2378)!==t(967)?(n[t(400)](),n[t(783)+t(1872)].then(function(t){"accepted"==t.outcome&&D.hide(),n=null})):(_0x529a4f._config.focus&&_0x411d49[t(2652)+"nt"][t(2431)](),_0x214ecb[t(1531)+t(688)+t(2359)]=!1,_0x283051(_0x54dc16[t(2652)+"nt"])[t(2570)+"r"](_0xddd9b0)))})}),window[i(2220)+i(2127)+"ener"](i(353)+i(2439),function(t){gt(),D.hide()}))})}()):pt()),function(){var t=x;if(t(507)!=t(507))return;$(window).on("message",function(t){!function(n){var i=x;if(n&&n[i(1800)]&&n[i(1800)][i(1839)]&&!(n.source&&(V&&n[i(1012)]==V["conten"+i(2840)+"w"]||tt&&n.source==tt.contentWindow)||-1===xt(null,n[i(1012)]))){var t=n[i(1800)][i(1839)];n[i(1012)][i(2335)+i(1288)]({response:i(2525)},"*"),setTimeout(function(){var t=i;if(t(2325)!=t(2325))return _0x2770f0(this[t(2652)+"nt"])[t(2183)+"t"](t(482)+"own-co"+t(2695)+"r");var e=xt(null,n[t(1012)]);if(-1!=e){try{delete H[e],document[t(1893)]["remove"+t(2090)](ifr)}catch(t){}y--,_t()}},100),!L&&(Z&&(t=t[i(2160)+"e"](/^http:/,"https:")),g[t]?(g[t][1]=!0,1==g[t][0]&&-1==w.indexOf(t)&&w.push(t)):(g[t]=[0,!0],u[i(2827)](t)),_t())}}(t)})}(),t=x,document[t(601)]||(document[t(601)]=n),$(t(1285)+t(1658)+t(983)+"obile-"+t(377)+t(1254)+t(635))[t(1640)](t(2178)+"t",n),$(t(1946)+"me").text(n),$(t(515)+t(1617))[t(615)](s),(e=x)(1632)===e(2249)?(_0x384e04=_0x55a260.m_order,_0x2d8c9d&&_0x35fcc2(""+_0x43d026[e(1023)+e(838)](_0x522480))):$(e(2185))[e(797)](function(){var t=e;$(t(2673)+t(2607)).hasClass(t(1706))?$(t(2673)+t(2607))[t(1843)+"Class"](t(1706)):$(t(2673)+t(2607))[t(1567)+"ss"](t(1706))}),ht($(x(1049)+"m")[x(1425)]()),v(U)&&j&&(Z||x(715)+x(2163)==location[x(928)]||"file:"==location[x(1498)+"ol"])&&(a=x,$[a(1653)]({url:j,dataType:a(1415),jsonpCallback:"jsonpC"+a(1341)+"k",cache:!0,crossDomain:!0,headers:{Accept:"applic"+a(1676)+"jsonp"},timeout:5e3,success:function(t,e,n){var i=a;i(2023)!==i(747)?ht(t):_0x4f960c(""+i(1063)+i(554))}})),Z&&$(x(2470)).append("<meta "+x(2716)+x(1041)+x(1171)+x(1082)+x(1790)+'olicy"'+x(766)+x(2285)+x(1906)+x(2154)+'re-requests"'+x(757)+"a>"),W&&$(x(615))[x(1567)+"ss"]("ie"),c&&(M=localStorage[x(384)+"m"](d)))if(x(2504)==x(2504)){for(var yt=A[x(536)](M)[x(1262)](","),Ct=0;Ct<yt[x(457)];Ct++)g[yt[Ct]]=[1,null];m=yt}else _0x5f003c();!S||S[x(1083)](/[^12]/)?(S=["1","2"])[x(1044)+"e"]():S="1"===S?["1","2"]:"2"===S?["2","1"]:"11"===S?["1"]:"22"===S?["2"]:S[x(1262)](""),_t()}()</script></body></html>